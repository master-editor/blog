<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Terraform import All AWS Security Groups - How to | Devops Junction</title>
<meta name="description" content="Import and Manage existing AWS Security groups with Terraform, Terraform import existing AWS security groups and manage them. How to import all or multiple security groups at once to terraform using ansible. Terraform Import example. Manage already created security groups with Terraform. Terraform AWS Import example." />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Terraform import All AWS Security Groups - How to | Devops Junction" />
<meta property="og:description" content="Import and Manage existing AWS Security groups with Terraform, Terraform import existing AWS security groups and manage them. How to import all or multiple security groups at once to terraform using ansible. Terraform Import example. Manage already created security groups with Terraform. Terraform AWS Import example." />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="http://www.facebook.com/devopsjunc" />
<meta property="article:published_time" content="2020-09-05T21:44:57+00:00" />
<meta property="article:modified_time" content="2022-06-19T05:49:20+00:00" />
<meta property="og:image" content="https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM.png" />
<meta property="og:image:width" content="3278" />
<meta property="og:image:height" content="1768" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["http://www.facebook.com/devopsjunc","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#primaryimage","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM.png","width":3278,"height":1768,"caption":"Terraform Import"},{"@type":"WebPage","@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#webpage","url":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/","name":"Terraform import All AWS Security Groups - How to | Devops Junction","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#primaryimage"},"datePublished":"2020-09-05T21:44:57+00:00","dateModified":"2022-06-19T05:49:20+00:00","description":"Import and Manage existing AWS Security groups with Terraform, Terraform import existing AWS security groups and manage them. How to import all or multiple security groups at once to terraform using ansible. Terraform Import example. Manage already created security groups with Terraform. Terraform AWS Import example.","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/"]}]},{"@type":"Article","@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#article","isPartOf":{"@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"Terraform import All AWS Security Groups &#8211; How to","datePublished":"2020-09-05T21:44:57+00:00","dateModified":"2022-06-19T05:49:20+00:00","mainEntityOfPage":{"@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#primaryimage"},"articleSection":"Ansible,AWS,Terraform","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Terraform import All AWS Security Groups  &#8211; How to Comments Feed" href="feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2HY2B3N51X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2HY2B3N51X');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"3d8661396b"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.middlewareinventory.com/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/5641.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-terraform-import-securitygroup-aws-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-terraform-import-securitygroup-aws-&amp;format=xml.xml" />
<script>
    document.cookie = "cookie_notice_accepted=true;max-age=" + 3600*24*365 + "; path=/" + ";secure;";
    document.cookie = "cookie_notice_accepted=true;max-age=" + 3600*24*365 + "; path=/";
    if ( ! /(^|;)\s*cca_is_eu=/.test(document.cookie) ) {  // if check prevents reload loop
		  document.cookie = "cca_is_eu=false;max-age=" + 3600*24*364 + "; path=/";
      var ccaURL = window.location.protocol + '//',
      hostname = window.location.host + '/' + window.location.pathname;
			if ( '0' === '1' ) {
        window.location.reload( true );
      }
   }
</script>
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Terraform import All AWS Security Groups  &#8211; How to - Middleware Inventory" />
<meta property="og:description" content="In this post, we are going to see how to manage existing and already created AWS Security groups with Terraform. The new era of Infrastructure revolution has begun already and we already started provisioning, managing, administrating our Infra as a code with help of Configuration management tools like Ansible, Terraform, SaltStack etc.

If you are new to Terraform and to know" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="In this post, we are going to see how to manage existing and already created AWS Security groups with Terraform. The new era of Infrastructure revolution has begun already and we already started provisioning, managing, administrating our Infra as a code with help of Configuration management tools like Ansible, Terraform, SaltStack etc.

If you are new to Terraform and to know" />
<meta name="twitter:title" content="Terraform import All AWS Security Groups  &#8211; How to - Middleware Inventory" />
<meta property="twitter:image" content="https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM.png" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.middlewareinventory.com/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">article h3
{
    background-color: whitesmoke;
    color: black;
    padding-left: 1%;
    font-weight: 400;
    font-size: 22px;
}
code
{
  color: rgb(232, 44, 88);
}
li {
    padding: 2px;
    margin-left: 2%;
}
article h2
{
    background-color: #29558c;
    color: white;
    padding-left: 1%;
    border-left: 15px solid crimson;
    font-weight: 400;
    font-size: 22px;
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-5641 single-format-standard wp-custom-logo cookies-set cookies-accepted elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="300" height="107" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="300" height="107" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-5641" class="post-5641 post type-post status-publish format-standard has-post-thumbnail hentry category-ansible category-aws category-terraform wpautop">
<header class="entry-header">
<h1 class="entry-title">Terraform import All AWS Security Groups &#8211; How to</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="3:14 am" rel="bookmark"><time class="entry-date published updated" datetime="June 19, 2022">June 19, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Terraform%20import%20All%20AWS%20Security%20Groups%20%20%E2%80%93%20How%20to&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-import-securitygroup-aws%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="5641" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Terraform+import+All+AWS+Security+Groups++%E2%80%93+How+to&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-import-securitygroup-aws%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="5641" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Terraform%20import%20All%20AWS%20Security%20Groups%20%20%E2%80%93%20How%20to&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-import-securitygroup-aws%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="5641" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-import-securitygroup-aws%2F&subject=Terraform%20import%20All%20AWS%20Security%20Groups%20%20%E2%80%93%20How%20to" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="5641" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="5641" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p>In this post, we are going to see how to manage existing and already created AWS Security groups with Terraform. The new era of Infrastructure revolution has begun already and we already started provisioning, managing, administrating our Infra as a code with help of Configuration management tools like Ansible, Terraform, SaltStack etc.</p>
<p>If you are new to Terraform and to know how to use Terraform with AWS basics, Refer this article and come back here.</p>
<p>With no further ado, let us jump into today&#8217;s mission.</p>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#The_Problem_we_are_trying_to_Solve" title="The Problem we are trying to Solve">The Problem we are trying to Solve</a></li><li><a href="#Importing_and_Managing_Existing_AWS_Security_Groups_with_Terraform" title="Importing and Managing Existing AWS Security Groups with Terraform">Importing and Managing Existing AWS Security Groups with Terraform</a><ul><li><a href="#Ansible_Terraform_to_the_help" title="Ansible + Terraform &#8211; to the help">Ansible + Terraform &#8211; to the help</a></li></ul></li><li><a href="#How_Ansible_and_Terraform_works_together" title="How Ansible and Terraform works together">How Ansible and Terraform works together</a></li><li><a href="#The_Ansible_Playbook_to_import_all_security_groups_and_add_to_Terraform" title="The Ansible Playbook to import all security groups and add to Terraform">The Ansible Playbook to import all security groups and add to Terraform</a></li><li><a href="#Ansible_Playbook_tasks_explained" title="Ansible Playbook tasks explained">Ansible Playbook tasks explained</a><ul><li><a href="#Task1_EC2_information_fetch" title="Task1: EC2 information fetch">Task1: EC2 information fetch</a></li><li><a href="#Task2_Creating_a_Dictionary_with_the_Collected_Values" title="Task2:  Creating a Dictionary with the Collected Values 
">Task2:  Creating a Dictionary with the Collected Values
</a></li><li><a href="#Task3_Creating_a_Directory_for_each_security_group_Naming_Convention" title="Task3:  Creating a Directory for each security group &#8211; Naming Convention ">Task3:  Creating a Directory for each security group &#8211; Naming Convention </a></li><li><a href="#Task4_Terraform_Importing_tasks" title="Task4:  Terraform Importing tasks
">Task4:  Terraform Importing tasks
</a></li><li><a href="#Task5_Terraform_file_correction_and_removing_the_unwanted_fields" title="Task5:  Terraform file correction and removing the unwanted fields
">Task5:  Terraform file correction and removing the unwanted fields
</a></li><li><a href="#Task6_Validate_the_configuration_after_the_changes" title="Task6:  Validate the configuration after the changes
">Task6:  Validate the configuration after the changes
</a></li></ul></li><li><a href="#Playbook_Execution_and_Result" title="Playbook Execution and Result">Playbook Execution and Result</a></li><li><a href="#Make_Changes_in_Terraform_File_and_Apply_it_to_verify" title="Make Changes in Terraform File and Apply it to verify">Make Changes in Terraform File and Apply it to verify</a></li><li><a href="#Video_Guide_Screen_record" title="Video Guide &#8211; Screen record">Video Guide &#8211; Screen record</a></li></ul></nav></div>
<h2><span class="ez-toc-section" id="The_Problem_we_are_trying_to_Solve">The Problem we are trying to Solve</span></h2>
<p>We know how powerful terraform and how efficient we can manage or create the Entire AWS/GCP/DigitalOcean Cloud Infrastructure with Terraform but we often find ourselves having a few additional resources which are created earlier often manually and not managed by Terraform.</p>
<p>To bring all of these unmanaged resources (security groups) into Terraform and make them as Infra as code. We can use <code>Terraform import</code> command.</p>
<p>But it is not productive to import these resources one by one. So I tried to automate it with Ansible and this is how it goes.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Importing_and_Managing_Existing_AWS_Security_Groups_with_Terraform">Importing and Managing Existing AWS Security Groups with Terraform</span></h2>
<p>Still, many DevOps engineers are logging into AWS Management console to update the Security group Inbound and Outbound traffic routes manually like opening ports, enabling traffic route etc. There is nothing wrong about it but the problem is you cannot track the changes your team is making unless you have it under revision control. that is where the Infra as code is winning.</p>
<p>Imagine you have your security group as a code and every change you make is properly committed and manged in your Git repositories like BitBucket or Github.  Every change would be tracked with git log and commit message and there would be a backup of the configuration too in case you want to roll back. Not just that. I listed a few reasons why you should be managing your AWS Security group as a code.</p>
<ul>
<li>It enables you to track all your changes like Open/Close ports and the reasons for the changes.</li>
<li>You can do better Security Auditing with Commit messages</li>
<li>Easy and efficient management</li>
<li>Enabling you to automate your infrastructure further</li>
<li>Easily find your publically open routes and prevent any security incident before happening</li>
<li>Better Continuity of Business/Disaster Recovery strategy.</li>
<li>Allow/Disallow IP/Port/Group with a single click of Jenkins job</li>
</ul>
<p>So I cannot insist enough to manage your AWS Security groups as a code. so now let us see how I managed to import my existing AWS security groups ( All of them ) into Terraform and manging it.</p>
<p>Let us see it in a practical way. how it is possible</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Ansible_Terraform_to_the_help">Ansible + Terraform &#8211; to the help</span></h3>
<p>I am a fan of both Ansible and Terraform, Both are wonderful when it comes to managing the infrastructure, while Ansible is pythonic, Terraform has its own language called Hashicorp Configuration Language and supports JSON too.</p>
<p>The reason why we are going to use Python here is that we are going to fetch all the Security groups and its information using Ansible&#8217;s <code>ec2_group_facts</code> module this can be done with the AWS CLI too but I preferred this way for better data processing.</p>
<p>here is the pictorial representation of how our design is going to be.</p>
<p><a href="../../wp-content/uploads/2020/09/TerraformImport.jpg"><img class="alignnone size-full wp-image-5669 lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1487.png" alt="" width="3475" height="2692" data-src="../../wp-content/uploads/2020/09/TerraformImport.jpg" loading="lazy" data-srcset="../../wp-content/uploads/2020/09/TerraformImport.jpg 3475w, ../../wp-content/uploads/2020/09/TerraformImport-300x232.jpg 300w, ../../wp-content/uploads/2020/09/TerraformImport-768x595.jpg 768w, ../../wp-content/uploads/2020/09/TerraformImport-1024x793.jpg 1024w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-5669" src="../../wp-content/uploads/2020/09/TerraformImport.jpg" alt="" width="3475" height="2692" srcset="../../wp-content/uploads/2020/09/TerraformImport.jpg 3475w, ../../wp-content/uploads/2020/09/TerraformImport-300x232.jpg 300w, ../../wp-content/uploads/2020/09/TerraformImport-768x595.jpg 768w, ../../wp-content/uploads/2020/09/TerraformImport-1024x793.jpg 1024w" sizes="(max-width: 3475px) 100vw, 3475px" data-eio="l" /></noscript></a></p>
<p>If you are not able to understand my handwriting in the picture, Here I write the same for additional reference.</p>
<p>In our setup. Ansible playbook is the main component which invokes both Terraform and EC2 data collection using <code>ec2_group_facts</code> module.</p>
<p>For Ansible to be able to access AWS you need to have AWS programmatic access enabled and Authentication keys in your environment variable.</p>
<pre class="hljs">$ <span class="hljs-built_in">export</span> AWS_ACCESS_KEY_ID=AK************IEVXQ
$ <span class="hljs-built_in">export</span> AWS_SECRET_ACCESS_KEY=gbaIbK*********************iwN0dGfS</pre>
<p>This is enough to enable Ansible and Terraform to access your AWS Infrastructure. But however, there are few hidden details and problems you may encounter ( like i did ) you can refer the following articles in case you are stuck or let me know in comments, I will try to help as soon as I can</p>
<ul>
<li><a href="../ansible-aws-ec2/index.html#Environment_Setup_for_Ansible_to_work_with_AWS_EC2_module">Setup Boto python for Ansible AWS </a></li>
<li><a href="../terraform-aws-example-ec2/index.html#Setup_Programmatic_Access">Setup programmatic Access for AWS – Key and Secret</a></li>
<li><a href="../aws-cli-ec2/index.html#Install_AWS_CLI">Install and configure AWS CLI</a></li>
<li><a href="../terraform-aws-example-ec2/index.html">Terraform AWS Configuration Basics </a></li>
</ul>
<p>Having your environment ready for Ansible and Terraform we can proceed further.</p>
<p><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-31-at-2.20.07-AM.png" loading="lazy" class="lazyload" /><noscript><img src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-31-at-2.20.07-AM.png" data-eio="l" /></noscript></p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="How_Ansible_and_Terraform_works_together">How Ansible and Terraform works together</span></h2>
<p>Having completed the Access setup for AWS and Ansible integration,  You would be able to reach your AWS account from ansible and execute all AWS related modules.</p>
<p>In this playbook also we are going to use such a module named <code>ec2_group_facts</code> which helps us to fetch all the information about the security groups.  that is going to be our first step</p>
<p>Then we will create a directory for each security group we are fetching from the AWS account and creating the terraform configuration files using the <code>terraform import</code> command and the security group id</p>
<p>Once the import is complete, we need to remove a few configuration elements in the terraform configuration file such as <strong>ownerid, arn, group id</strong> etc, these values/elements should be auto-populated by Terraform so terraform would not let you define it prior.</p>
<p>Once we have removed these auto-generated elements/variables from the configuration file, we are going to validate the file using the <code>terraform validate</code> command</p>
<p>So these are the four steps we are going to perform in order to get all your Security groups managed by Terraform.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="The_Ansible_Playbook_to_import_all_security_groups_and_add_to_Terraform">The Ansible Playbook to import all security groups and add to Terraform</span></h2>
<p>So, The time has come for some code, Enough with the theory.</p>
<p>Few Points to remember before executing the playbook</p>
<ul>
<li>You need to update the <code>destdir</code> variable where ansible would create new directories for each security group it is fetching. the directory name would be as same the security group name ( if there are spaces in the security group name it would be converted to <code>-</code> hyphen )</li>
<li>You need to replace the vpc-id variable of your corresponding vpc</li>
</ul>
<p>&nbsp;</p>
<p><strong>The Playbook</strong></p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;"> - name:</span> Security Group Playbook
<span class="hljs-attr" style="color: #6d9cbe;">   hosts:</span> localhost
<span class="hljs-attr" style="color: #6d9cbe;">   vars:</span>
<span class="hljs-attr" style="color: #6d9cbe;">      destdir:</span> /apps/gritfy/Terraform/SecGroups
<span class="hljs-attr" style="color: #6d9cbe;">      itemstochange:</span> [<span class="hljs-string" style="color: #a5c261;">'arn\s+=.+$'</span>,<span class="hljs-string" style="color: #a5c261;">'\sid\s+=.+$'</span>,<span class="hljs-string" style="color: #a5c261;">'owner_id\s+=.+$'</span>]

<span class="hljs-attr" style="color: #6d9cbe;">   tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> ec2 security group information fetch
<span class="hljs-attr" style="color: #6d9cbe;">      ec2_group_facts:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        filters:</span>
<span class="hljs-attr" style="color: #6d9cbe;">          vpc-id:</span> vpc<span class="hljs-bullet" style="color: #6d9cbe;">-0</span>a8ae2c90f5ca6cfa
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> result

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Creating a dictionary of Security Group IDs and Names
<span class="hljs-attr" style="color: #6d9cbe;">      set_fact:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        secdict:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ secdict | default ([]) + [ { 'name': item.group_name.replace(' ','-'), 'id': item.group_id } ] }}</span> "</span>
<span class="hljs-attr" style="color: #6d9cbe;">      with_items:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{result.security_groups}}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      loop_control:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        label:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ item.group_name}}</span>"</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Create the Directory  
<span class="hljs-attr" style="color: #6d9cbe;">      file:</span>
<span class="hljs-attr" style="color: #6d9cbe;">          path:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{destdir}}</span>/<span class="hljs-template-variable" style="color: #a5c261;">{{item.name}}</span><span class="hljs-template-variable" style="color: #a5c261;">{{item.id[0:7]}}</span>"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># required. Path to the file being managed.</span>
<span class="hljs-attr" style="color: #6d9cbe;">          state:</span> directory 
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> dircrt
<span class="hljs-attr" style="color: #6d9cbe;">      loop:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{secdict}}</span>"</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Terraform Import
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span> <span class="hljs-string" style="color: #a5c261;">|
        git init
        echo 'provider "aws" {\n\tregion = "us-east-1"\n} \n\nresource  "aws_security_group" "elb_sg" {\n\n}' &gt; main.tf
        terraform init
        terraform import aws_security_group.elb_sg <span class="hljs-template-variable" style="color: #a5c261;">{{item.id}}</span> 
        echo 'provider "aws" {\n\tregion = "us-east-1"\n} \n' &gt; main.tf
        terraform show -no-color &gt;&gt; main.tf
        git add .
        git status
        git commit -m "Updated Git"
        pwd &amp;&amp; ls -lrt
</span><span class="hljs-attr" style="color: #6d9cbe;">      args:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{destdir}}</span>/<span class="hljs-template-variable" style="color: #a5c261;">{{item.name}}</span><span class="hljs-template-variable" style="color: #a5c261;">{{item.id[0:7]}}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      loop:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{secdict}}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      when:</span> dircrt is changed

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Change config
<span class="hljs-attr" style="color: #6d9cbe;">      lineinfile:</span>
<span class="hljs-attr" style="color: #6d9cbe;">          path:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{destdir}}</span>/<span class="hljs-template-variable" style="color: #a5c261;">{{item.0.name}}</span><span class="hljs-template-variable" style="color: #a5c261;">{{item.0.id[0:7]}}</span>/main.tf"</span>
<span class="hljs-attr" style="color: #6d9cbe;">          regexp:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ item.1 }}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">          state:</span> absent
<span class="hljs-attr" style="color: #6d9cbe;">          backup:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      with_nested:</span>
<span class="hljs-bullet" style="color: #6d9cbe;">        -</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ secdict }}</span>"</span>
<span class="hljs-bullet" style="color: #6d9cbe;">        -</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ itemstochange }}</span>"</span>
      
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Terraform Validate
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span> <span class="hljs-string" style="color: #a5c261;">|
        terraform validate 
</span><span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{destdir}}</span>/<span class="hljs-template-variable" style="color: #a5c261;">{{item.name}}</span><span class="hljs-template-variable" style="color: #a5c261;">{{item.id[0:7]}}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      loop:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{secdict}}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> tfvalidate
<span class="hljs-attr" style="color: #6d9cbe;">      failed_when:</span> <span class="hljs-string" style="color: #a5c261;">"'Success' not in tfvalidate.stdout"</span>
</pre>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Ansible_Playbook_tasks_explained">Ansible Playbook tasks explained</span></h2>
<p>Let us go through the playbook and understand what each task is designed to do.</p>
<h3><span class="ez-toc-section" id="Task1_EC2_information_fetch"><span style="color: #0b4f70;"><strong>Task1: EC2 information fetch</strong></span></span></h3>
<p>This task is using the module named <code>ec2_group_facts</code> and it uses the AWS access key and secret from your environment directly to connect to your AWS account and fetch all the security groups belong to the specific <code>vpc</code> which is mentioned in the arguments.  make sure to update the <code>vpc-id</code> filter value before running the playbook.</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Task2_Creating_a_Dictionary_with_the_Collected_Values"><strong><span style="color: #0b4f70;">Task2:  Creating a Dictionary with the Collected Values </span><br />
</strong></span></h3>
<p>ec2_group_facts module would result in a lot of information about the security group but all we need is a <code>security group name</code> and <code>security group id</code></p>
<p>So we are iterating through the collected output from the previous task and creating a dictionary named <code>secdict</code> we are using <code>set_fact</code> module to create a variable during the runtime</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Task3_Creating_a_Directory_for_each_security_group_Naming_Convention"><strong><span style="color: #0b4f70;">Task3:  Creating a Directory for each security group &#8211; Naming Convention</span> </strong></span></h3>
<p>As mentioned earlier, we would be creating dedicated directories for each security group where the Terraform configuration file of that corresponding sec group would be saved.</p>
<p>The Name of this directory would be combo of the security group name and the first 7 characters of the security group id, this is to avoid duplicates. AWS does not have unique name constraint for the security group naming, so there can be one more security groups with the same name.</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Task4_Terraform_Importing_tasks"><span style="color: #0b4f70;"><strong>Task4:  Terraform Importing tasks<br />
</strong></span></span></h3>
<p>in this task, we are running multiple commands one after another just like we type in a shell prompt. using <a href="../ansible-shell-examples/index.html">ansible shell module</a>  These are list of tasks we are going to do with this task</p>
<ol>
<li>we initialize a git repo under the newly created sec group directory</li>
<li>create a terraform configuration file named <code>main.tf</code> with AWS provider specifications</li>
<li>Performing <code>terraform init</code> to initialize terraform on the directory</li>
<li>Performing the import process with <code>terraform import</code> command and the corresponding security group&#8217;s id</li>
<li>Writing the imported configuration back into <code>main.tf</code> configuration file we have created at step2</li>
<li>Rest of the steps are for version controlling changes like add, commit etc.</li>
</ol>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Task5_Terraform_file_correction_and_removing_the_unwanted_fields"><span style="color: #0b4f70;"><strong>Task5:  Terraform file correction and removing the unwanted fields<br />
</strong></span></span></h3>
<p>In this task, we are removing the unwanted lines from the created <code>main.tf</code> configuration file which otherwise makes the file syntactically incorrect</p>
<h3></h3>
<h3><span class="ez-toc-section" id="Task6_Validate_the_configuration_after_the_changes"><strong><span style="color: #0b4f70;">Task6:  Validate the configuration after the changes</span><br />
</strong></span></h3>
<p>Finally, we can validate if the Terraform configuration file <code>main.tf</code> is valid for each security group using the <code>terraform validate</code> command which would be executed inside all the security group directories. It has been designed to fail when the validate command returns a failure message using ansible <a href="../ansible-changed_when-and-failed_when-examples/index.html">failed_when</a></p>
<h3></h3>
<h2><span class="ez-toc-section" id="Playbook_Execution_and_Result">Playbook Execution and Result</span></h2>
<p>If you have done everything correct. You would be able to import all the security groups belong to the specific VPC in your AWS account and would be able to manage using Terraform.</p>
<p>You would have directories created with the security group names beneath the workspace(destdir) directory you have defined in the playbook</p>
<p><a href="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM.png"><img class="alignnone size-full wp-image-5681 lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1355.png" alt="" width="2438" height="1720" data-src="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM.png 2438w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-300x212.png 300w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-768x542.png 768w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-1024x722.png 1024w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-5681" src="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM.png" alt="" width="2438" height="1720" srcset="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM.png 2438w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-300x212.png 300w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-768x542.png 768w, ../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-1.51.24-AM-1024x722.png 1024w" sizes="(max-width: 2438px) 100vw, 2438px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Make_Changes_in_Terraform_File_and_Apply_it_to_verify">Make Changes in Terraform File and Apply it to verify</span></h2>
<p>Once the configuration files are imported and ready go to any of the security group directory created and edit the <code>main.tf</code> file and make changes like adding a new ingress rule or changing the CIDR IP address for the allowed port number etc</p>
<p>Once you have done the changes. you are good to go and <code>terraform plan</code> and then <code>terraform apply</code> it</p>
<p>You would be able to see that your security group is successfully managed by Terraform.</p>
<p>Any further change you would like to make to the security group can be done with Terraform Infrastructure as code technique. (Refer the video for more information)</p>
<p>Congratulations.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Video_Guide_Screen_record">Video Guide &#8211; Screen record</span></h2>
<p>Here is the screen record of me, talking about this setup and testing this playbook in my aws account.</p>
<p><iframe title="Import AWS Security Groups to Terraform using Ansible" width="840" height="630" src="https://www.youtube.com/embed/IyrGFo4Se5c?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></p>
<p>&nbsp;</p>
<p>Hope this article is helpful</p>
<p>&nbsp;</p>
<p>Cheers<br />
Rumen Lishkov சரவணன் அ.க</p>
<div id="postfollow">
<a href='https://ko-fi.com/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' border='0' alt='Buy Me a Coffee at ko-fi.com' data-src="https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2" loading="lazy" class="lazyload" /><noscript><img height='46' style='border:0px;height:46px;width: 186px' src='https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' data-eio="l" /></noscript></a>
<p>Follow us on<a href="https://www.facebook.com/rumenlishkov">Facebook</a> or<a href="https://www.twitter.com/mwinventory">Twitter</a>
</br>
For more practical videos and tutorials. <a href="https://www.youtube.com/kiss2mark">Subscribe to our channel</a>
</br>
Find me on Linkedin <a href="https://www.linkedin.com/in/rumen-lishkov/">My Profile</a>
</br>
</i>For any Consultation or to hire us <a href="../../cdn-cgi/l/email-protection.html#9ef6fbf2f2f1def9ecf7eaf8e7b0fdf1f3"> <span class="__cf_email__" data-cfemail="6a020f0606052a0d18031e0c1344090507">[email&#160;protected]</span></a>
</br>
If you like this article. Show your Support! <a href="https://ko-fi.com/middlewareinventory">Buy me a Coffee.</a>
</br>
</p>
<p style="color: palevioletred !important;">Signup for Exclusive "Subscriber-only" Content</p>
<div class="emaillist">
<form action="#" method="post" class="es_subscription_form es_shortcode_form" id="es_subscription_form_1657191591" data-source="ig-es">
<div class="es-field-wrap"><label>Name*<br /><input type="text" name="name" class="ig_es_form_field_name" placeholder="" value="" required="required" /></label></div><div class="es-field-wrap"><label>Email*<br /><input class="es_required_field es_txt_email ig_es_form_field_email" type="email" name="email" value="" placeholder="" required="required" /></label></div><input type="hidden" name="lists[]" value="1" /><input type="hidden" name="form_id" value="3" />
<input type="hidden" name="es_email_page" value="5641" />
<input type="hidden" name="es_email_page_url" value="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" />
<input type="hidden" name="status" value="Unconfirmed" />
<input type="hidden" name="es-subscribe" id="es-subscribe" value="915ddf1a10" />
<label style="position:absolute;top:-99999px;left:-99999px;z-index:-99;"><input type="email" name="es_hp_email" class="es_required_field" tabindex="-1" autocomplete="-1" value="" /></label>
<input type="submit" name="submit" class="es_subscription_form_submit es_submit_button es_textbox_button" id="es_subscription_form_submit_1657191591" value="Subscribe" />
<span class="es_spinner_image" id="spinner-image"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Loading" data-src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" loading="lazy" class="lazyload" /><noscript><img src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" alt="Loading" data-eio="l" /></noscript></span>
</form>
<span class="es_subscription_message" id="es_subscription_message_1657191591"></span>
</div>
</div>
<hr>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-dynamic-inventory-aws/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Dynamic inventory" data-src="../../wp-content/uploads/2020/05/Screenshot-2020-05-07-at-8.42.54-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/05/Screenshot-2020-05-07-at-8.42.54-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Dynamic inventory" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-dynamic-inventory-aws/index.html'>Ansible dynamic inventory AWS - How to use</a><p>Ansible Dynamic inventory is a wonderful feature to efficiently manage the entire infrastructure, In an ideal world the list of hosts we have in our infrastructure would not be static, the number of hosts would increase or decrease based on the new instance provisioning and server decommissioning. In this variable&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-aws-ec2/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible EC2 Create" data-src="../../wp-content/uploads/2019/12/Screenshot-2019-12-02-at-2.07.39-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/12/Screenshot-2019-12-02-at-2.07.39-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible EC2 Create" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-aws-ec2/index.html'>Ansible EC2 Example - Create EC2 instance with Ansible</a><p>Infrastructure as Code is getting all attention it deserves and everyone is trying to find their way to the `Completely automated Infrastructure Provisioning &amp; Management` While there are a lot of tools available now in the market starting from Terraform, AWS CloudFormation, Chef, Puppet, Salt Stack There are some differences&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-ec2-ssh-key/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="add ssh key to EC2 instance" data-src="../../wp-content/uploads/2019/11/Screenshot-2020-11-07-at-7.00.04-AM-150x150.jpg" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/11/Screenshot-2020-11-07-at-7.00.04-AM-150x150.jpg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="add ssh key to EC2 instance" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-ec2-ssh-key/index.html'>Add SSH Key to EC2 instances with Ansible - Automated</a><p>Whether it is On-Prem (or) Cloud-hosted, A Typical Non-Containerized Enterprise infrastructure would have ample of Virtual Machines aka Servers [ Linux ] Let us suppose that you work for the DevOps team of a Big Organization where you manage 100+ ec2 instances. You have a new hire in your team&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../terraform-aws-example-ec2/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2020/01/TerraformAWS-1-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/01/TerraformAWS-1-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../terraform-aws-example-ec2/index.html'>Terraform AWS Example - Create EC2 instance with Terraform</a><p>Terraform, An outstanding and innovative product from hashicorp and it is a leader in Infrastructure as Code tools Segment.&nbsp; Before I go any further, I think I should set the context. In this article, we are going to learn how to use Terraform to create AWS EC2 instance and create&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../packer-aws-terraform-example/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/03/cloud-150x150.jpeg" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/03/cloud-150x150.jpeg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../packer-aws-terraform-example/index.html'>Packer AWS Example with Terraform</a><p>In this article, we are going to see a quick packer aws example setup and provide the steps to create an AWS Image (AMI) using Packer and we are also going to Create Amazon EC2 Instance ( Elastic Bean Stack - EBS)&nbsp; from the same AMI Image we have created,&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../aws-route53-ansible/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>Ansible Route53 Examples &#8211; read add remove update DNS records</a></div><div class="nav-next"><a href="../ansible-dict/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>Ansible Dictionary &#8211; How to create and add items to dict</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>

<ins class="adsbygoogle" style="display:inline-block;width:270px;height:400px" data-ad-client="ca-pub-3398911159151128" data-ad-slot="5950599981"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="search-3" class="widget widget_search clearfix">
<form role="search" method="get" class="search-form" action="../../index.html">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
</label>
<button type="submit" class="search-submit">
<span class="genericon-search"></span>
<span class="screen-reader-text">Search</span>
</button>
</form>
</aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 100%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 100%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-5641 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Terraform+import+All+AWS+Security+Groups++%E2%80%93+How+to&url=https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Terraform+import+All+AWS+Security+Groups++%E2%80%93+How+to&body=https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"5641 https:\/\/www.middlewareinventory.com\/?p=5641","disqusShortname":"mwinventory","disqusTitle":"Terraform import All AWS Security Groups  \u2013 How to","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/terraform-import-securitygroup-aws\/","postId":"5641"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"2019084a26"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"b4d440853b","post_id":"5641"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"0b980bed5f","ip":"137.254.7.181","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://www.middlewareinventory.com/blog/terraform-import-securitygroup-aws/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 1;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657191591;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
</div>
</body>
</html>

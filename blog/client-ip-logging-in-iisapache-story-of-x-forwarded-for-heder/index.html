<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Client IP Logging in IIS/Apache - Story of X-Forwarded-For Header</title>
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Client IP Logging in IIS/Apache - Story of X-Forwarded-For Header" />
<meta property="og:description" content="0 We all at some point wanted to know who is accessing our web page. Our Source of information is the access log file. Sometimes we do not get what we expect to. In case if we want to know the exact client&rsquo;s IP.&nbsp; Sometimes All you get is some[...]" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="http://www.facebook.com/devopsjunc" />
<meta property="article:published_time" content="2017-12-14T01:04:10+00:00" />
<meta property="article:modified_time" content="2018-07-30T20:24:50+00:00" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["http://www.facebook.com/devopsjunc","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#primaryimage","inLanguage":"en-US","url":"http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png"},{"@type":"WebPage","@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#webpage","url":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/","name":"Client IP Logging in IIS/Apache - Story of X-Forwarded-For Header","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#primaryimage"},"datePublished":"2017-12-14T01:04:10+00:00","dateModified":"2018-07-30T20:24:50+00:00","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/"]}]},{"@type":"Article","@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#article","isPartOf":{"@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"Client IP Logging in IIS/Apache &#8211; Story of X-Forwarded-For Header","datePublished":"2017-12-14T01:04:10+00:00","dateModified":"2018-07-30T20:24:50+00:00","mainEntityOfPage":{"@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#webpage"},"commentCount":1,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#primaryimage"},"keywords":"Client IP Logging in IIS/Apache - Story of X-Forwarded-For Heder,How to Enable to X-Forwarded-For logging in Bigip,How to Enable X-Forwarded-For loggin in IIS,XFF header in webserver","articleSection":"Apache,Webserver","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Client IP Logging in IIS/Apache &#8211; Story of X-Forwarded-For Header Comments Feed" href="feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-6674956-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-6674956-8');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"9fe2b70daf"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.middlewareinventory.com/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/648.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder-&amp;format=xml.xml" />
<script>
    document.cookie = "cookie_notice_accepted=true;max-age=" + 3600*24*365 + "; path=/" + ";secure;";
    document.cookie = "cookie_notice_accepted=true;max-age=" + 3600*24*365 + "; path=/";
    if ( ! /(^|;)\s*cca_is_eu=/.test(document.cookie) ) {  // if check prevents reload loop
		  document.cookie = "cca_is_eu=false;max-age=" + 3600*24*364 + "; path=/";
      var ccaURL = window.location.protocol + '//',
      hostname = window.location.host + '/' + window.location.pathname;
			if ( '0' === '1' ) {
        window.location.reload( true );
      }
   }
</script>
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Client IP Logging in IIS/Apache &#8211; Story of X-Forwarded-For Header - Middleware Inventory" />
<meta property="og:description" content="We all at some point wanted to know who is accessing our web page.

Our Source of information is the access log file. Sometimes we do not get what we expect to.

In case if we want to know the exact client's IP.  Sometimes All you get is some network/firewall endpoint IP address which is none of your concern.

So how to get" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c1bf1a032.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c09d5eb4f.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2b5c95fe.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2efab5ff.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9b07add9.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9f8865d7.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cada34363.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cb67d95d1.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d04216779.png" />
<meta property="og:image" content="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d13702e1b.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="We all at some point wanted to know who is accessing our web page.

Our Source of information is the access log file. Sometimes we do not get what we expect to.

In case if we want to know the exact client's IP.  Sometimes All you get is some network/firewall endpoint IP address which is none of your concern.

So how to get" />
<meta name="twitter:title" content="Client IP Logging in IIS/Apache &#8211; Story of X-Forwarded-For Header - Middleware Inventory" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c1bf1a032.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c09d5eb4f.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2b5c95fe.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2efab5ff.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9b07add9.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9f8865d7.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cada34363.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cb67d95d1.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d04216779.png" />
<meta property="twitter:image" content="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d13702e1b.png" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.middlewareinventory.com/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-648 single-format-standard wp-custom-logo cookies-not-set elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="300" height="107" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="300" height="107" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-648" class="post-648 post type-post status-publish format-standard hentry category-apache category-webserver tag-client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder tag-how-to-enable-to-x-forwarded-for-logging-in-bigip tag-how-to-enable-x-forwarded-for-loggin-in-iis tag-xff-header-in-webserver wpautop">
<header class="entry-header">
<h1 class="entry-title">Client IP Logging in IIS/Apache &#8211; Story of X-Forwarded-For Header</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="6:34 am" rel="bookmark"><time class="entry-date published updated" datetime="July 31, 2018">July 31, 2018</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Client%20IP%20Logging%20in%20IIS%2FApache%20%E2%80%93%20Story%20of%20X-Forwarded-For%20Header&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fclient-ip-logging-in-iisapache-story-of-x-forwarded-for-heder%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="648" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Client+IP+Logging+in+IIS%2FApache+%E2%80%93+Story+of+X-Forwarded-For+Header&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fclient-ip-logging-in-iisapache-story-of-x-forwarded-for-heder%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="648" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Client%20IP%20Logging%20in%20IIS%2FApache%20%E2%80%93%20Story%20of%20X-Forwarded-For%20Header&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fclient-ip-logging-in-iisapache-story-of-x-forwarded-for-heder%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="648" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fclient-ip-logging-in-iisapache-story-of-x-forwarded-for-heder%2F&subject=Client%20IP%20Logging%20in%20IIS%2FApache%20%E2%80%93%20Story%20of%20X-Forwarded-For%20Header" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="648" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="648" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p id="MDBNmBS"><style>li
{
margin-bottom: 10px;
}
</style></p>
<p>We all at some point wanted to know who is accessing our web page.</p>
<p>Our Source of information is the access log file. Sometimes we do not get what we expect to.</p>
<p>In case if we want to know the exact client&#8217;s IP.  Sometimes All you get is some network/firewall endpoint IP address which is none of your concern.</p>
<p>So how to get your exact client IP address in your web server log file.</p>
<p>Before discussing that part. We have to set a stage first, an infrastructure setup which we could relate and understand. The objective of this post will only be met if we are on the same page.</p>
<p>&nbsp;</p>
<h5><strong>Let&#8217;s consider a scenario like this. </strong></h5>
<ul>
<li style="text-align: left;">A user named &#8220;Tony Stark&#8221; { I like him :)} is launching the URL <strong>www.mwinventory.in</strong> from his home in his favorite browser.</li>
<li style="text-align: left;">After all the DNS resolution story, It gets the IP of the domain name mwinventory.in as 166.62.30.153</li>
<li style="text-align: left;">This must be a <strong>Public IP address</strong>, Generally denoted or pointing to some internal virtual IP  of the company  mwinventory VIP [<em>Virtual IP is an IP created/used in Load Balancer (Bigip, F5, Squid) to receive the global request before applying any load balancing (or) IP spraying (or) internal re-routing strategies</em>.]</li>
<li style="text-align: left;">These VIPs will forward the requests to the actual web server IP address (or) to a group of web server organized and denoted in the name of <b>pool</b></li>
<li style="text-align: left;">When the HTTP request reaches the Load balancer, it continues the journey through the load balancing rules and find its way to the web server using  <b>server_pool</b> or an <b>Irule </b>[<em>Rules, written for routing, A kind of algorithm</em>]</li>
<li style="text-align: left;">After reaching the web server based on the technology this site is using it will either go to the application server (or) will be processed at the web server itself. i.e LAMP/WAMP [PHP/CGI] websites</li>
<li style="text-align: left;">In case of java based web application, HTTP request will proceed further to application server with the help of application server proxies/plugins like [mod_proxy/mod_jk/WebLogic Proxy Plugin/Websphere Proxy Plugin]</li>
</ul>
<div>In this long voyage,  Tony Stark&#8217;s actual IP address would get lost or gets replaced by the IP address of any edge components like load balancer (or) firewall</div>
<p>&nbsp;</p>
<div>So finally, on the web server what we get is not the IP address of Tony Stark. ( Not even Hulk 🙂 ) it is some edge component&#8217;s IP. We do not need that.</div>
<p>&nbsp;</p>
<p><iframe class="giphy-embed" src="https://giphy.com/embed/RWCetJu76wAsE" width="480" height="240" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<div>So how to handle it?</div>
<p>&nbsp;</p>
<div>Here comes the header, which is going to help us on this mysterious journey of HTTP request</div>
<p>&nbsp;</p>
<h5><strong>What is X-Forwarded-For</strong></h5>
<p>The <b>X-Forwarded-For</b> (<b>XFF</b>) <a title="List of HTTP header fields" href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields">HTTP header field</a> is a common method for identifying the originating <a title="IP address" href="https://en.wikipedia.org/wiki/IP_address">IP address</a> of a client connecting to a <a title="Web server" href="https://en.wikipedia.org/wiki/Web_server">web server</a> through an <a class="mw-redirect" title="HTTP" href="https://en.wikipedia.org/wiki/HTTP">HTTP</a> <a title="Proxy server" href="https://en.wikipedia.org/wiki/Proxy_server">proxy</a> or <a class="mw-redirect" title="Load balancer" href="https://en.wikipedia.org/wiki/Load_balancer">load balancer</a>.</p>
<p>So let us start with, how to enable X-Forwarding in the Load Balancer</p>
<p>I am taking Big-IP Load balancer for this article.</p>
<h5><strong>How to enable XFF in BigIP</strong></h5>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">To configure the BIG-IP system to insert the original client IP address in an <span style="font-weight: bold;">X-Forwarded-For</span> HTTP header, perform the following procedure:</p>
<ol style="margin-top: 0px; margin-bottom: 10px; clear: both; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">
<li>Log in to the Configuration utility.</li>
<li>Navigate to <span style="font-weight: bold;">Local Traffic</span> &gt; <span style="font-weight: bold;">Profiles</span>.</li>
<li>From the <span style="font-weight: bold;">Services</span> menu, click <span style="font-weight: bold;">HTTP</span>.</li>
<li>Click <span style="font-weight: bold;">Create</span>.</li>
<li>Type a name for the HTTP profile.</li>
<li>Select the <span style="font-weight: bold;">Insert X-Forwarded-For</span> check box.
<p style="margin: 0px 0px 10px;"><span class="note" style="padding: 6px 0px; font-style: italic; color: #078a85;"><span style="font-weight: bold;">Note</span>: Older versions of BIG-IP software may display the option as <span style="font-weight: bold;">Insert XForwarded For </span>instead of <span style="font-weight: bold;">Insert X-Forwarded-For</span>.</span></p>
</li>
<li>From the <span style="font-weight: bold;">Insert X-Forwarded-For </span>menu, select <span style="font-weight: bold;">Enabled</span>.</li>
<li>Click <span style="font-weight: bold;">Finished</span>.
<p style="margin: 0px 0px 10px;">You must now associate the new HTTP profile with the virtual server/VIP</p>
</li>
</ol>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;"><span class="subsectiontitle" style="font-weight: bold; margin: 20px 0px 0px;">Using an iRule to insert the original client IP address in an X-Forwarded-For HTTP header</span></p>
<ol style="margin-top: 0px; margin-bottom: 10px; clear: both; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">
<li>Log in to the Configuration utility.</li>
<li>Navigate to <span style="font-weight: bold;">Local Traffic</span> &gt; <span style="font-weight: bold;">iRules</span> &gt; <span style="font-weight: bold;">Create</span>.</li>
<li>In the <span style="font-weight: bold;">Name</span> box, type a name.</li>
<li>In the <span style="font-weight: bold;">Definition</span> box, copy and paste the following iRule:
<p class="code" style="margin: 0px 0px 10px; padding: 2px 4px; color: #000000; background-color: #ebebeb; border-radius: 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;"><span class="example2" style="padding: 2px 0px; border: 0px;">when HTTP_REQUEST {<br style="box-sizing: border-box;" />HTTP::header insert X-Forwarded-For [IP::remote_addr]<br style="box-sizing: border-box;" />}</span></p>
</li>
<li>Click <span style="font-weight: bold;">Finished</span>.
<p style="margin: 0px 0px 10px;">You must now associate the new iRule with the virtual server/VIP</p>
</li>
</ol>
<h5 style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;"><strong>Configuring the web server to extract the IP address from the HTTP header</strong></h5>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">After you have configured the BIG-IP system to insert the original client IP address in an HTTP header using an <span style="font-weight: bold;">X-Forwarded-For</span> HTTP header, you must also configure the web server to extract the IP address from the HTTP header, and then log the IP address to the web server log file.</p>
<h5 style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;"><span class="subsectiontitle" style="font-weight: bold; margin: 20px 0px 0px;">Apache web server</span></h5>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">You can configure an Apache web server to extract the IP address from the <span style="font-weight: bold;">X-Forwarded-For</span> HTTP header and log that IP address to the web server log file by adding the appropriate logging directives to the main Apache configuration file (typically named <span style="font-weight: bold;">httpd.conf</span>) or to the relevant virtual host configuration files.</p>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">For example:</p>
<p class="example2" style="margin: 0px 0px 10px; padding: 2px 0px; font-size: 14px; color: #000000; background-color: #ffffff; border: 0px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;">LogFormat &#8220;%v %{<strong>X-Forwarded-For</strong>}i %l %u %t \&#8221;%r\&#8221; %&gt;s %b&#8221; X-Forwarded-For<br style="box-sizing: border-box;" />CustomLog /var/log/apache/www.example.com-xforwarded.log X-Forwarded-For</p>
<h5 style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;"><strong>IIS web server</strong></h5>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">Unlike Apache Web server, to make IIS web server to extract the IP address from the X-Forwarded-For HTTP Header and log that IP address to the log file, we need to perform list of configuration changes in the site.</p>
<h6 style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;"><strong>For IIS 7</strong></h6>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">Open IIS manager by the run command <strong>inetmgr </strong>(or) using control panel.</p>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">To enable XFF logging you must have a <strong>Advanced Logging</strong> feature enabled</p>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">In general &#8220;Advanced Logging&#8221; does not come as built in with IIS 7, you must install as an add-on</p>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">From here you can download the same <a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=7211">https://www.microsoft.com/en-us/download/confirmation.aspx?id=7211</a></p>
<p style="margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;">You will get a installation binary with  a name  <strong>AdvancedLogging.msi </strong>double click on the package to install it on the server</p>
<p id="cfYsRVE"><img width="499" height="385" class="alignnone size-full wp-image-663  lazyload" src="../../wp-content/ewww/lazy/placeholder-499x385.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c4e7b0335.png 499w, ../../wp-content/uploads/2017/12/img_5a31c4e7b0335-300x231.png 300w" data-sizes="auto" /><noscript><img width="499" height="385" class="alignnone size-full wp-image-663 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c4e7b0335.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c4e7b0335.png 499w, ../../wp-content/uploads/2017/12/img_5a31c4e7b0335-300x231.png 300w" sizes="(max-width: 499px) 100vw, 499px" data-eio="l" /></noscript></p>
<p>After installing the Advanced Logging plugin, close and re-open the iis manager and click on the server node</p>
<p>You will be able to see an Icon named Advanced Logging under the IIS grouping on the center panel</p>
<p id="jECqLBR">Double click on Advanced Logging Icon</p>
<p id="yZMtdmR"><img width="1215" height="353" class="alignnone size-full wp-image-657  lazyload" src="../../wp-content/ewww/lazy/placeholder-1215x353.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c1bf1a032.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c1bf1a032.png 1215w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-300x87.png 300w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-768x223.png 768w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-1024x298.png 1024w" data-sizes="auto" /><noscript><img width="1215" height="353" class="alignnone size-full wp-image-657 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c1bf1a032.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c1bf1a032.png 1215w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-300x87.png 300w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-768x223.png 768w, ../../wp-content/uploads/2017/12/img_5a31c1bf1a032-1024x298.png 1024w" sizes="(max-width: 1215px) 100vw, 1215px" data-eio="l" /></noscript></p>
<p>you will get screen like this, you must enable it by clicking &#8220;<strong>Enable Advanced Logging</strong>&#8221; option on the right panel</p>
<p>After enabling the Advanced Logging</p>
<p>Expand the Server Node  -&gt; Click on Sites -&gt;  Click on your corresponding Site name</p>
<p>Here my website name is &#8220;WebServices&#8221; , click to select it</p>
<p><a href="http://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c09d5eb4f.png"><img class="alignnone size-full wp-image-656 lazyload" src="../../wp-content/ewww/lazy/placeholder-1005x476.png" alt="img_5a31c09d5eb4f" width="1005" height="476" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c09d5eb4f.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c09d5eb4f.png 1005w, ../../wp-content/uploads/2017/12/img_5a31c09d5eb4f-300x142.png 300w, ../../wp-content/uploads/2017/12/img_5a31c09d5eb4f-768x364.png 768w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-656" src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c09d5eb4f.png" alt="img_5a31c09d5eb4f" width="1005" height="476" srcset="../../wp-content/uploads/2017/12/img_5a31c09d5eb4f.png 1005w, ../../wp-content/uploads/2017/12/img_5a31c09d5eb4f-300x142.png 300w, ../../wp-content/uploads/2017/12/img_5a31c09d5eb4f-768x364.png 768w" sizes="(max-width: 1005px) 100vw, 1005px" data-eio="l" /></noscript></a></p>
<p>Double click on Advanced Logging Icon available on the center panel.</p>
<p>on the right panel click on &#8220;<strong>Edit Logging Fields</strong>&#8221;  link  to add a new logging field</p>
<p>You will get screen like below</p>
<p id="RsGdhrj"><img width="549" height="424" class="alignnone size-full wp-image-658  lazyload" src="../../wp-content/ewww/lazy/placeholder-549x424.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2b5c95fe.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c2b5c95fe.png 549w, ../../wp-content/uploads/2017/12/img_5a31c2b5c95fe-300x232.png 300w" data-sizes="auto" /><noscript><img width="549" height="424" class="alignnone size-full wp-image-658 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2b5c95fe.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c2b5c95fe.png 549w, ../../wp-content/uploads/2017/12/img_5a31c2b5c95fe-300x232.png 300w" sizes="(max-width: 549px) 100vw, 549px" data-eio="l" /></noscript></p>
<p>Now click on <strong>Add Field  </strong>and fill the values as shown in the below Screen snap</p>
<p id="tUFYOhx"><img width="1008" height="597" class="alignnone size-full wp-image-659  lazyload" src="../../wp-content/ewww/lazy/placeholder-1008x597.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2efab5ff.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c2efab5ff.png 1008w, ../../wp-content/uploads/2017/12/img_5a31c2efab5ff-300x178.png 300w, ../../wp-content/uploads/2017/12/img_5a31c2efab5ff-768x455.png 768w" data-sizes="auto" /><noscript><img width="1008" height="597" class="alignnone size-full wp-image-659 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c2efab5ff.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c2efab5ff.png 1008w, ../../wp-content/uploads/2017/12/img_5a31c2efab5ff-300x178.png 300w, ../../wp-content/uploads/2017/12/img_5a31c2efab5ff-768x455.png 768w" sizes="(max-width: 1008px) 100vw, 1008px" data-eio="l" /></noscript></p>
<p>Now hit <strong>OK </strong></p>
<p>From the Actions pane on the right, click <strong>Add Log Definition.</strong></p>
<p id="DtGTZYd"><img width="580" height="439" class="alignnone size-full wp-image-665  lazyload" src="../../wp-content/ewww/lazy/placeholder-580x439.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9b07add9.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c9b07add9.png 580w, ../../wp-content/uploads/2017/12/img_5a31c9b07add9-300x227.png 300w" data-sizes="auto" /><noscript><img width="580" height="439" class="alignnone size-full wp-image-665 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9b07add9.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c9b07add9.png 580w, ../../wp-content/uploads/2017/12/img_5a31c9b07add9-300x227.png 300w" sizes="(max-width: 580px) 100vw, 580px" data-eio="l" /></noscript></p>
<p>Enter &#8220;Client Source IP&#8221; in the <strong>Base file name</strong> field.</p>
<p id="bFvNklR"><img width="584" height="674" class="alignnone size-full wp-image-666  lazyload" src="../../wp-content/ewww/lazy/placeholder-584x674.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9f8865d7.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31c9f8865d7.png 584w, ../../wp-content/uploads/2017/12/img_5a31c9f8865d7-260x300.png 260w" data-sizes="auto" /><noscript><img width="584" height="674" class="alignnone size-full wp-image-666 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31c9f8865d7.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31c9f8865d7.png 584w, ../../wp-content/uploads/2017/12/img_5a31c9f8865d7-260x300.png 260w" sizes="(max-width: 584px) 100vw, 584px" data-eio="l" /></noscript></p>
<p>Click <strong>Select Fields </strong>and select the Logging Field we have added in the previous section &#8220;<strong>Client Source IP</strong>&#8221;</p>
<p>&nbsp;</p>
<p id="zosCQkG"><img width="546" height="388" class="alignnone size-full wp-image-667  lazyload" src="../../wp-content/ewww/lazy/placeholder-546x388.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cada34363.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31cada34363.png 546w, ../../wp-content/uploads/2017/12/img_5a31cada34363-300x213.png 300w" data-sizes="auto" /><noscript><img width="546" height="388" class="alignnone size-full wp-image-667 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cada34363.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31cada34363.png 546w, ../../wp-content/uploads/2017/12/img_5a31cada34363-300x213.png 300w" sizes="(max-width: 546px) 100vw, 546px" data-eio="l" /></noscript></p>
<p>Click <em>OK</em> on the Select Logging Fields form, then click <em>Apply</em> in the actions pane.</p>
<p>Restart the corresponding website</p>
<p>The advanced log must be viewed rather than the default log. The advanced log is located in <strong>%SystemDrive%inetpublogsAdvancedLogs.</strong> To view the logs, right-click the Client Source IP log definition and click <strong>View Log Files</strong>.</p>
<p id="ytXkRRk"><img width="578" height="383" class="alignnone size-full wp-image-668  lazyload" src="../../wp-content/ewww/lazy/placeholder-578x383.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cb67d95d1.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31cb67d95d1.png 578w, ../../wp-content/uploads/2017/12/img_5a31cb67d95d1-300x199.png 300w" data-sizes="auto" /><noscript><img width="578" height="383" class="alignnone size-full wp-image-668 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31cb67d95d1.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31cb67d95d1.png 578w, ../../wp-content/uploads/2017/12/img_5a31cb67d95d1-300x199.png 300w" sizes="(max-width: 578px) 100vw, 578px" data-eio="l" /></noscript></p>
<h6><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></h6>
<h6><strong>For IIS8</strong></h6>
<p>In IIS8 this is much simpler to enable XFF and to capture XFF in the log</p>
<ol>
<li>Select your website and click on it</li>
<li>Click the Logging Icon in the center panel</li>
<li>In the <strong>Log File</strong> Grouping click on <strong><strong>Select Fields</strong></strong>
<p id="xjnAayY"><img width="572" height="85" class="alignnone size-full wp-image-675  lazyload" src="../../wp-content/ewww/lazy/placeholder-572x85.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d04216779.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31d04216779.png 572w, ../../wp-content/uploads/2017/12/img_5a31d04216779-300x45.png 300w" data-sizes="auto" /><noscript><img width="572" height="85" class="alignnone size-full wp-image-675 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d04216779.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31d04216779.png 572w, ../../wp-content/uploads/2017/12/img_5a31d04216779-300x45.png 300w" sizes="(max-width: 572px) 100vw, 572px" data-eio="l" /></noscript></p>
</li>
<li>Click on <strong>Add Field</strong> and add a new Field as shown in the following snap
<p id="ilSVSkI"><img width="598" height="589" class="alignnone size-full wp-image-677  lazyload" src="../../wp-content/ewww/lazy/placeholder-598x589.png" alt="" data-src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d13702e1b.png" loading="lazy" data-srcset="../../wp-content/uploads/2017/12/img_5a31d13702e1b.png 598w, ../../wp-content/uploads/2017/12/img_5a31d13702e1b-300x295.png 300w" data-sizes="auto" /><noscript><img width="598" height="589" class="alignnone size-full wp-image-677 " src="https://www.mwinventory.in/wp-content/uploads/2017/12/img_5a31d13702e1b.png" alt="" srcset="../../wp-content/uploads/2017/12/img_5a31d13702e1b.png 598w, ../../wp-content/uploads/2017/12/img_5a31d13702e1b-300x295.png 300w" sizes="(max-width: 598px) 100vw, 598px" data-eio="l" /></noscript></p>
</li>
<li>Click OK and return to previous page and restart the corresponding website</li>
</ol>
<p>That&#8217;s it, you will be able to see the XFF information in the current log file of your website.</p>
<p>&nbsp;</p>
<p>Hope this post is helpful. Please comment and let me know your feedback</p>
<p>For more contents like this, Please follow us in facebook by liking our page <a href="https://www.facebook.com/rumenlishkov">http://www.facebook.com/middlewareinventory</a></p>
<p>Thanks</p>
<p>A K SARAV</p>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='../apache-webserver-basic-authentication-using-htpasswd/index.html'>Apache Webserver Basic Authentication using htpasswd - How to</a><p>Overview To Secure the Apache&nbsp; Virtualhost (or) a particular document root /directory.&nbsp; We can use this Basic Auth mechanism. When the user is trying to access the resource from the directory. User will be prompted&nbsp; for Authentication. &nbsp; Step1 Create a Password file with username and password entry using&nbsp;htpasswd&nbsp;&nbsp;tool. Available&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='../how-to-integrate-weblogic-apache-web-server/index.html'>How to integrate weblogic and apache web server - Steps</a><p>Weblogic and Apache Webserver integration To Integrate Weblogic Application server with Apache Webserver, We have to install weblogic plugin on the Apache HTTP Server. Plugins for Apache will be available on Oracle (or) you can find them in your weblogic installed location under&nbsp;" ServerRoot/server/plugins" Under plugins directory of weblogic server&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../f5-big-ip-ltm-how-to-export-pools-and-their-members-as-csv/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2018/03/Screen-Shot-2018-03-18-at-10.48.47-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2018/03/Screen-Shot-2018-03-18-at-10.48.47-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../f5-big-ip-ltm-how-to-export-pools-and-their-members-as-csv/index.html'>F5-BIG-IP LTM - How to Export Pools and their members as CSV</a><p>If you are looking for a way to export (or) print&nbsp; F5 Bigip&nbsp;Local Traffic Manager (LTM)&nbsp; Load Balancer pools and their members in Comma Separated Values (CSV) format. This script is for you Note*: It uses tmsh&nbsp;command line and this has to be executed in the F5 Big-IP Advanced Shell&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-get-ip-address/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-get-ip-address/index.html'>Ansible get ip address of current host or target</a><p>How to get the IP address of the current or remote host in Ansible. That's the question, this article is going to address. While running a Playbook you might have had a requirement where you need to get the IP address of the connected and current remote host.&nbsp; There are&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../apache-reverse-proxy-what-how-to-configure-setup-reverse-proxy/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2017/03/BalancerRP-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2017/03/BalancerRP-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../apache-reverse-proxy-what-how-to-configure-setup-reverse-proxy/index.html'>Apache Reverse Proxy - What is it and How to Configure Reverse Proxy</a><p>Introduction Proxy, &nbsp;In general terms it means "a person who is authorized to act for another". In Server infrastructure, a Proxy Server do the same thing, It stands in for some other server, which should be&nbsp;kept away and hidden for so many reasons. Proxy servers are used for both legal&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<div class="entry-tags clearfix">
<span class="meta-tags">
<a href="../tag/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/index.html" rel="tag">Client IP Logging in IIS/Apache - Story of X-Forwarded-For Heder</a><a href="../tag/how-to-enable-to-x-forwarded-for-logging-in-bigip/index.html" rel="tag">How to Enable to X-Forwarded-For logging in Bigip</a><a href="../tag/how-to-enable-x-forwarded-for-loggin-in-iis/index.html" rel="tag">How to Enable X-Forwarded-For loggin in IIS</a><a href="../tag/xff-header-in-webserver/index.html" rel="tag">XFF header in webserver</a> </span>
</div>
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../weblogic-application-deployment-parser/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>Weblogic Application Deployment Parser</a></div><div class="nav-next"><a href="../weblogic-server-status-script-wlst/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>weblogic server status script &#8211; WLST</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>


<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 100%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 100%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-648 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Client+IP+Logging+in+IIS%2FApache+%E2%80%93+Story+of+X-Forwarded-For+Header&url=https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Client+IP+Logging+in+IIS%2FApache+%E2%80%93+Story+of+X-Forwarded-For+Header&body=https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"648 http:\/\/www.mwinventory.in\/?p=648","disqusShortname":"mwinventory","disqusTitle":"Client IP Logging in IIS\/Apache \u2013 Story of X-Forwarded-For Header","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/","postId":"648"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"c3faebb42a"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"ad1aa689b7","post_id":"648"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"f0b2747bdc","ip":"66.249.66.138","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/13d7d.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://www.middlewareinventory.com/blog/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 1;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657215922;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
</div>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Ansible Shell Module Examples | Devops Junction</title>
<meta name="description" content="Ansible Shell Examples, How to Execute Shell Commands with Ansible Shell module. How to use Ansible Shell modules. Ansible Shell commands and how to run Commands in Ansible Shell. How to run a Script using Ansible Shell, run Linux Commands using Ansible Shell. Run Script in background with Shell, Run multiple commands" />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Ansible Shell Module Examples | Devops Junction" />
<meta property="og:description" content="Ansible Shell Examples, How to Execute Shell Commands with Ansible Shell module. How to use Ansible Shell modules. Ansible Shell commands and how to run Commands in Ansible Shell. How to run a Script using Ansible Shell, run Linux Commands using Ansible Shell. Run Script in background with Shell, Run multiple commands" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ansible-shell-examples/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="http://www.facebook.com/devopsjunc" />
<meta property="article:published_time" content="2019-10-21T00:04:57+00:00" />
<meta property="article:modified_time" content="2022-06-19T05:55:54+00:00" />
<meta property="og:image" content="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png" />
<meta property="og:image:width" content="1371" />
<meta property="og:image:height" content="749" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["http://www.facebook.com/devopsjunc","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#primaryimage","inLanguage":"en-US","url":"../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png","width":1371,"height":749,"caption":"Ansible Shell"},{"@type":"WebPage","@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#webpage","url":"https://www.middlewareinventory.com/blog/ansible-shell-examples/","name":"Ansible Shell Module Examples | Devops Junction","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#primaryimage"},"datePublished":"2019-10-21T00:04:57+00:00","dateModified":"2022-06-19T05:55:54+00:00","description":"Ansible Shell Examples, How to Execute Shell Commands with Ansible Shell module. How to use Ansible Shell modules. Ansible Shell commands and how to run Commands in Ansible Shell. How to run a Script using Ansible Shell, run Linux Commands using Ansible Shell. Run Script in background with Shell, Run multiple commands","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.middlewareinventory.com/blog/ansible-shell-examples/"]}]},{"@type":"Article","@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#article","isPartOf":{"@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"Ansible Shell Module Examples","datePublished":"2019-10-21T00:04:57+00:00","dateModified":"2022-06-19T05:55:54+00:00","mainEntityOfPage":{"@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://www.middlewareinventory.com/blog/ansible-shell-examples/#primaryimage"},"keywords":"Ansible Script execute,Ansible Shell,Ansible Shell Examples,Ansible Shell multiple commands,Ansible Shell script","articleSection":"Ansible","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://www.middlewareinventory.com/blog/ansible-shell-examples/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Ansible Shell Module Examples Comments Feed" href="feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BE71V6F634"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BE71V6F634');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"3d8661396b"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.middlewareinventory.com/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/4250.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-shell-examples-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-shell-examples-&amp;format=xml.xml" />
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Ansible Shell Module Examples - Middleware Inventory" />
<meta property="og:description" content="&nbsp;

Ansible shell module is designed to execute Shell commands against the target Unix based hosts. Unlike the Ansible command module, Ansible Shell would accept any highly complexed commands with pipes, redirection etc and you can also execute Shell scripts using Ansible Shell module.



The Advantage of Ansible Shell module of supporting highly complexed commands with pipes and semicolons  can also be" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ansible-shell-examples/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="&nbsp;

Ansible shell module is designed to execute Shell commands against the target Unix based hosts. Unlike the Ansible command module, Ansible Shell would accept any highly complexed commands with pipes, redirection etc and you can also execute Shell scripts using Ansible Shell module.



The Advantage of Ansible Shell module of supporting highly complexed commands with pipes and semicolons  can also be" />
<meta name="twitter:title" content="Ansible Shell Module Examples - Middleware Inventory" />
<meta property="twitter:image" content="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.middlewareinventory.com/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">article h3
{
    background-color: whitesmoke;
    color: black;
    padding-left: 1%;
    border-left: 10px solid black;
    font-weight: 400;
    font-size: 22px;
}
li {
    padding: 2px;
    margin-left: 2%;
}

code
{
  color: rgb(232, 44, 88);
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-4250 single-format-standard wp-custom-logo cookies-set cookies-accepted elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="300" height="107" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="300" height="107" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-4250" class="post-4250 post type-post status-publish format-standard has-post-thumbnail hentry category-ansible tag-ansible-script-execute tag-ansible-shell tag-ansible-shell-examples tag-ansible-shell-multiple-commands tag-ansible-shell-script wpautop">
<header class="entry-header">
<h1 class="entry-title">Ansible Shell Module Examples</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="5:34 am" rel="bookmark"><time class="entry-date published updated" datetime="June 19, 2022">June 19, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Ansible%20Shell%20Module%20Examples&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-shell-examples%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="4250" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-shell-examples/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Ansible+Shell+Module+Examples&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-shell-examples%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="4250" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-shell-examples/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Ansible%20Shell%20Module%20Examples&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-shell-examples%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="4250" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-shell-examples/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-shell-examples%2F&subject=Ansible%20Shell%20Module%20Examples" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="4250" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-shell-examples/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="4250" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-shell-examples/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p>&nbsp;</p>
<p>Ansible <code>shell</code> module is designed to execute Shell commands against the target Unix based hosts. Unlike the Ansible command module, Ansible Shell would accept any highly complexed commands with pipes, redirection etc and you can also execute Shell scripts using Ansible Shell module.</p>
<p><a href="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png"><img class="alignnone size-full wp-image-4270 lazyload" src="../../wp-content/ewww/lazy/placeholder-1371x749.png" alt="Ansible Shell" width="1371" height="749" data-src="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png 1371w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-300x164.png 300w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-768x420.png 768w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-1024x559.png 1024w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-4270" src="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png" alt="Ansible Shell" width="1371" height="749" srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM.png 1371w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-300x164.png 300w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-768x420.png 768w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-21-at-5.29.32-AM-1024x559.png 1024w" sizes="(max-width: 1371px) 100vw, 1371px" data-eio="l" /></noscript></a></p>
<p>The Advantage of Ansible Shell module of supporting highly complexed commands with <code>pipes</code> and <code>semicolons</code>  can also be a disadvantage from the security perspective as a single mistake could cost a lot and break the system integrity. But there are some security best practices you can follow while using Shell module and you will be fine. It will also be discussed in this post.</p>
<p>Before we proceed further to see the examples. I must mention something important.</p>
<blockquote><p>Ansible Shell module is designed to work only with Linux based Machines and not Windows. For windows you should use <code>win_shell</code> module</p>
<p>Though Ansible <code>Shell</code> module can be used to execute Shell scripts. Ansible  has a dedicated module named <code>Script</code> which can be used to copy the Shell script from the control machine to the remote server and to execute.</p>
<p>Based on your requirement you can use either Script or Shell module to execute your scripts.</p></blockquote>
<p>Let us see the syntax of how to use ansible shell module in Adhoc and playbooks.</p>
<p>&nbsp;</p>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#Index" title="Index">Index</a></li><li><a href="#A_Quick_Syntax_of_Ansible_Shell_module_ADHOC" title="A Quick Syntax of Ansible Shell module &#8211; ADHOC">A Quick Syntax of Ansible Shell module &#8211; ADHOC</a></li><li><a href="#A_Quick_Syntax_of_Ansible_Shell_module_in_a_Playbook" title="A Quick Syntax of Ansible Shell module in a Playbook">A Quick Syntax of Ansible Shell module in a Playbook</a></li><li><a href="#Ansible_Shell_Examples" title="Ansible Shell Examples">Ansible Shell Examples</a><ul><li><a href="#Example_1_Execute_a_Single_Command_with_Ansible_Shell" title="Example 1: Execute a Single Command with Ansible Shell">Example 1: Execute a Single Command with Ansible Shell</a></li><li><a href="#Example_2_Execute_a_Command_with_Pipe_and_Redirection" title="Example 2: Execute a Command with Pipe and Redirection">Example 2: Execute a Command with Pipe and Redirection</a></li><li><a href="#Example_3_Execute_a_Shell_Script_with_Shell_command" title="Example 3:  Execute a Shell Script with Shell command">Example 3:  Execute a Shell Script with Shell command</a></li><li><a href="#Example_4_Run_a_Shell_Command_in_a_Specific_directory" title="Example 4: Run a Shell Command in a Specific directory">Example 4: Run a Shell Command in a Specific directory</a></li><li><a href="#Example_5_Run_a_Shell_Command_based_on_file_availability" title="Example 5: Run a Shell Command based on file availability">Example 5: Run a Shell Command based on file availability</a></li><li><a href="#Example_6_Usage_of_quote_filter_to_avoid_Injection" title="Example 6:  Usage of quote filter to avoid Injection">Example 6:  Usage of quote filter to avoid Injection</a></li><li><a href="#Example_7_Execute_multiple_commands_in_a_Single_Shell_Play" title="Example 7:  Execute multiple commands in a Single Shell &#8211; Play">Example 7:  Execute multiple commands in a Single Shell &#8211; Play</a></li></ul></li><li><a href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div>
<h2><span class="ez-toc-section" id="Index">Index</span></h2>
<ul>
<li>Quick Syntax of Ansible Shell in ADHOC</li>
<li>Quick Syntax of Ansible Shell in Playbook</li>
<li>Ansible Shell module Examples
<ol>
<li>Ansible Shell module to execute a Single Command</li>
<li>Ansible Shell &#8211; Execute a Command with Pipe and Redirection</li>
<li>Execute a Shell Script with Ansible Shell command</li>
<li>Run a Shell command in a specific directory</li>
<li>Run a Shell Command only if the file present or not present</li>
<li>Using Templated Variable and Usage of Quote Filter &#8211; Security Best practice</li>
<li>Execute Multiple commands in a Single Shell</li>
</ol>
</li>
<li>Conclusion</li>
</ul>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="A_Quick_Syntax_of_Ansible_Shell_module_ADHOC">A Quick Syntax of <span style="color: #e0105c;">Ansible Shell</span> module &#8211; <span style="color: #e0105c;">ADHOC</span></span></h2>
<p>Here is the quick Syntax of Ansible Shell module in ADHOC manner.</p>
<p><a href="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM.png"><img class="alignnone size-full wp-image-4254 lazyload" src="../../wp-content/ewww/lazy/placeholder-600x276.png" alt="Ansible Shell" width="600" height="276" data-src="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM.png 600w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM-300x138.png 300w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-4254" src="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM.png" alt="Ansible Shell" width="600" height="276" srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM.png 600w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-8.58.01-PM-300x138.png 300w" sizes="(max-width: 600px) 100vw, 600px" data-eio="l" /></noscript></a></p>
<p>To know more about Ad hoc commands and how to use them please refer to the following Cheat Sheet.</p>
<p><a href="../ansible-ad-hoc-commands/index.html" target="_blank" rel="noopener noreferrer">Ansible AD HOC commands Cheatsheet</a></p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="A_Quick_Syntax_of_Ansible_Shell_module_in_a_Playbook">A Quick Syntax of <span style="color: #e0105c;">Ansible Shell</span> module in a <span style="color: #e0105c;">Playbook</span></span></h2>
<p>The Beauty of Playbook is the way it looks and written. Since it is written in <code>yaml</code> it can be easily understood as well.</p>
<p>The following picture would demonstrate how an ADHOC command would be transformed as a PLAY of a Ansible Playbook.</p>
<p><a href="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM.png"><img class="alignnone size-full wp-image-4256 lazyload" src="../../wp-content/ewww/lazy/placeholder-603x578.png" alt="" width="603" height="578" data-src="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM.png 603w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM-300x288.png 300w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-4256" src="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM.png" alt="" width="603" height="578" srcset="../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM.png 603w, ../../wp-content/uploads/2019/10/Screenshot-2019-10-19-at-9.21.45-PM-300x288.png 300w" sizes="(max-width: 603px) 100vw, 603px" data-eio="l" /></noscript></a></p>
<p>If you are new to Playbook. I recommend you reading this article before proceeding further</p>
<p><a href="../ansible-playbook-example/index.html" target="_blank" rel="noopener noreferrer">Ansible Playbook Introduction and Example</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Ansible_Shell_Examples">Ansible Shell <span style="color: #e0105c;">Examples</span></span></h2>
<ol>
<li><a href="#Example_1_Execute_a_Single_Command_with_Ansible_Shell">Ansible Shell module to execute a Single Command</a></li>
<li><a href="#Example_2_Execute_a_Command_with_Pipe_and_Redirection">Ansible Shell &#8211; Execute a Command with Pipe and Redirection</a></li>
<li><a href="#Example_3_Execute_a_Shell_Script_with_Shell_command">Execute a Shell Script with Ansible Shell command</a></li>
<li><a href="#Example_4_Run_a_Shell_Command_in_a_Specific_directory">Run a Shell command in a specific directory</a></li>
<li><a href="#Example_5_Run_a_Shell_Command_based_on_file_availability">Run a Shell Command only if the file present or not present</a></li>
<li><a href="#Example_6_Usage_of_quote_filter_to_avoid_Injection">Using Templated Variable and Usage of Quote Filter &#8211; Security Best practice</a></li>
<li><a href="#Example_7_Execute_multiple_commands_in_a_Single_Shell_Play">Execute Multiple commands in a Single Shell</a></li>
</ol>
<p>&nbsp;</p>
<p>Before we proceed.  I presume that you have basic knowledge about Ansible and know what is hostgroup, Play etc. If not. please read the Ansible Playbook Introduction and come back here</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div id="ex1">
<h3><span class="ez-toc-section" id="Example_1_Execute_a_Single_Command_with_Ansible_Shell">Example 1: Execute a Single Command with Ansible Shell</span></h3>
</div>
<p>Our First Example is to run any command on the remote host using the Shell module.</p>
<p>Rather taking any command, Let us follow the same convention we have followed in this post and get the date of the remote server. In my case the remote server is under the hostgroup named <code>testservers</code></p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Check Date with Shell command
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
         <span class="hljs-string" style="color: #a5c261;">"date"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> datecmd
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> datecmd

<span class="hljs-attr" style="color: #6d9cbe;">    - debug:</span> msg=<span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{datecmd.stdout}}</span>"</span></pre>
<p>In the preceding example, you can see that we are running our playbook against a hostgroup named <code>testservers</code> and executing a simple <code>date</code> command and saving the output of that command into a Register variable named <code>datecmd</code></p>
<p>At the last line, we are retrieving the registered variable and printing only the date command output stored in the  <code>stdout</code> property of <code>datacmd</code></p>
<p>Here is the execution output of the same playbook as recorded</p>
<p><script id="asciicast-opAtJPpKAEa7v8vX43g6xR0gX" src="https://asciinema.org/a/opAtJPpKAEa7v8vX43g6xR0gX.js" async></script></p>
<p>Hope this gives you an idea about the playbook and how Shell module works. Let&#8217;s explore more.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_2_Execute_a_Command_with_Pipe_and_Redirection">Example 2: Execute a Command with Pipe and Redirection</span></h3>
<p>As said earlier Shell module would accept the Linux commands with symbols such as Pipes, Redirections and Semicolons.</p>
<p>Now let us take some Linux command with Redirection and Pipes.</p>
<p>Let us suppose that we want to execute a given below command with Pipe and redirection. It is a basic  <code>ls</code> command with some processing with <code>awk</code> and we remove the empty lines with <code>sed</code> and redirect the final output to a file named <code>dirlist.txt</code></p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;">ls -lrt|awk <span class="hljs-string" style="color: #a5c261;">'{print $9}'</span>|sed <span class="hljs-string" style="color: #a5c261;">'/^$/d'</span> &gt; /tmp/dirlist.txt</pre>
<p>Here is the playbook with the preceding command.</p>
<p>&nbsp;</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Dir list and write to file
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
         <span class="hljs-string" style="color: #a5c261;">" ls -lrt /apps|awk '{print $9}'|sed '/^$/d' &gt; /tmp/dirlist.txt "</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> lsout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> lsout

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Display the file
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span> cat /tmp/dirlist.txt
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> displaylist
      
<span class="hljs-attr" style="color: #6d9cbe;">    - debug:</span> msg=<span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{displaylist.stdout_lines}}</span>"</span></pre>
<p>In the preceding playbook, we are executing the command without any modification and on the next play <code>Display the file</code> we are trying displaying the file content with <code>cat</code> and saving the output to a register variable named <code>displaylist</code></p>
<p>At last, we are using debug to display the output saved in the <code>displaylist</code> variable</p>
<p>Here is the execution output of the playbook.</p>
<p><script id="asciicast-dyvck4WgT0jSmCOSvoKM3xQbg" src="https://asciinema.org/a/dyvck4WgT0jSmCOSvoKM3xQbg.js" async></script></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_3_Execute_a_Shell_Script_with_Shell_command">Example 3:  Execute a Shell Script with Shell command</span></h3>
<p>Though it is recommended to use <code>script</code> module for executing the shell script.  <code>Shell</code>  module can also execute the scripts just the way you would execute it on your terminal.</p>
<p>Here is the playbook which starts the tomcat server on the remote server by executing the tomcat&#8217;s startup script.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Start tomcat
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      become_user:</span> tomcat
<span style="color: #ffff00;"><span class="hljs-attr">      async:</span> <span class="hljs-number">10</span>
<span class="hljs-attr">      poll:</span> <span class="hljs-number">0</span></span>
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
         <span class="hljs-string" style="color: #a5c261;">"./startup.sh"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"/apps/tomcat/tomcat8/bin"</span> 
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> datecmd
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> datecmd

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Validate if tomcat is UP
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> tomvalidate
<span class="hljs-attr" style="color: #6d9cbe;">      wait_for:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        host:</span> <span class="hljs-string" style="color: #a5c261;">"localhost"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        port:</span> <span class="hljs-number" style="color: #a5c261;">8080</span>
<span class="hljs-attr" style="color: #6d9cbe;">        delay:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">        timeout:</span> <span class="hljs-number" style="color: #a5c261;">30</span>
<span class="hljs-attr" style="color: #6d9cbe;">        state:</span> started
<span class="hljs-attr" style="color: #6d9cbe;">        msg:</span> <span class="hljs-string" style="color: #a5c261;">"Tomcat server is not running"</span></pre>
<p>There are playbooks in the playbook, The First one is to start the tomcat using the <code>shell</code> module and the another is to validate if the service is running by validating the <code>port status</code>  using  <code>wait_for</code>module.</p>
<blockquote><p><strong> Some Important Note *:</strong></p>
<p>You might wonder why I have used the <span style="color: #e82c58;"><code>async</code></span>  and the <span style="color: #e82c58;"><code>poll</code></span> directives here along with the shell module.</p>
<p>The reason is that my Tomcat JVM is a long running process, If I try to start my Tomcat without this asynchrnous flag. My Tomcat process would be stopped as soon as my play is completed.</p>
<p>If you want your command or the script you are using in Shell  to start something which should be UP and RUNNING even after your playbook completed. You should use async flag</p>
<p>In other words this is called `Fire and Forget` in Ansible parlance. I will write a post about this shortly.</p></blockquote>
<p>Here is the execution output of the preceding Playbook.</p>
<p><script id="asciicast-yStDaaM7SH8gMM6hv2wwZDV0Q" src="https://asciinema.org/a/yStDaaM7SH8gMM6hv2wwZDV0Q.js" async></script></p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_4_Run_a_Shell_Command_in_a_Specific_directory">Example 4: Run a Shell Command in a Specific directory</span></h3>
<p>Sometimes we want to execute a command after <code>cd</code> ing into some specific directory.  For example, you can consider the previous example of starting tomcat. If you have noticed, we used a parameter named <code>chdir</code> to specify in which directory the command should be executed.</p>
<p>So this example is about the same <code>chdir</code> parameter.</p>
<p>Since this parameter is self-descriptive. I hope you can easily understand it without further ado.</p>
<p>In the previous example we have already used this <code>chdir</code> .However, I will give one more example down below</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Open /etc/password file
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span>
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
         <span class="hljs-string" style="color: #a5c261;">"cat password"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span style="color: #ffff00;"><span class="hljs-attr">        chdir:</span> <span class="hljs-string">"/etc"</span> </span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> fileout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> fileout

<span class="hljs-attr" style="color: #6d9cbe;">    - debug:</span> msg=<span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ fileout.stdout-lines }}</span>"</span></pre>
<p>We all know that the Linux <strong>passwd</strong> file is available in the <code>/etc</code> directory.  I am trying to display the content of this file, In order to explain this chdir, I have made my shell command with just a file name and not the path.</p>
<p>I am passing the directory name with the help of  <code>chdir</code> so the this play would successfully display the content of  <code>etc/passwd</code></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_5_Run_a_Shell_Command_based_on_file_availability">Example 5: Run a Shell Command based on file availability</span></h3>
<p>We cannot always go blind and try to execute a command/script without any prior validation. In most of the cases, it might be necessary that we should check if the execution is really needed?</p>
<p>There are various conditional based execution methods available in Ansible. Here we are going to see a quick one, almost built-in with many modules.</p>
<p>The <code>creates</code> parameter.</p>
<p>All it does is to tell a Shell that the command we are executing would create some file.  As a biproduct it also validates if the file is already available and skips the command execution if the file is already present. Thereby avoiding a Duplicate process Creation and protect the system integrity by an accidental overdo.</p>
<p>Here is a simple example with <code>creates</code> in it.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Start the DB batch upload
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span>
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
         <span class="hljs-string" style="color: #a5c261;">"./startbatchupload.sh"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"/apps/dbscripts/"</span>
<span style="color: #ffff00;"><span class="hljs-attr">        creates:</span> <span class="hljs-string">"startbatchupload.lock"</span> </span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> fileout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> fileout</pre>
<p>What we do in the previous example is that we try to start an important db patch process after validating the presence of a lock file <code>startbatchupload.lock</code></p>
<p>The lock file is supposed to be created by the script that we are trying to execute. If it is already present which means there is another instance of the same script already running on the server. Thats the logic behind this validation.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_6_Usage_of_quote_filter_to_avoid_Injection">Example 6:  Usage of quote filter to avoid Injection</span></h3>
<p>In all these previous examples, we were executing a Shell commands directly specified in the <code>Shell</code> module. We have not  used any variables and templating like declaring the command to be executed as a varible and calling it out later in the play.</p>
<p>I presume you are aware of the <code>Jinja2 templates</code> in Ansible. It is the way we should access the variables inside the playbook. ( more like a $VARIABLE_NAME in shell)</p>
<p>First, let us see how to declare the command as variable and use it later.</p>
<p>For better understanding, Let me take the same playbook we have used in Example 5 and make some modification.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers<span style="color: #ffff00;">
<span class="hljs-attr">    vars:</span>
<span class="hljs-attr">      - script-to-start:</span> <span class="hljs-string">"./startbatchupload.sh"</span></span>
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Start the DB batch upload
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span><span style="color: #ffff00;">
<span class="hljs-attr">      shell:</span>
          <span class="hljs-string">"<span class="hljs-template-variable">{{ script-to-start }}</span>"</span></span>
<span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"/apps/dbscripts/"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        creates:</span> <span class="hljs-string" style="color: #a5c261;">"startbatchupload.lock"</span> 
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> fileout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> fileout</pre>
<p>In the preceding playbook you can see that we have declared the script name as a variable and calling it out later inside the play using Jinja2 filter <code><span class="hljs-string">"<span class="hljs-template-variable">{{ script-to-start }}</span>"</span></code></p>
<p>Thought it would look Good and work good. It has a security issue. As it is prone to <code>Injection attack</code> it is more like an `SQL injection` where the hacker can change the command at the runtime.</p>
<p>In order to avoid the same. Ansible recommends using <strong>quote filter </strong>whenever you have to template the variable in the Shell module like given below.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span style="color: #ff9900;"> WRONG WAY :</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ script-to-start }}</span>"</span>

<span style="color: #00ff00;"> THE RIGHT WAY :</span>  <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ script-to-start <span style="color: #ffff00;">| quote</span> }}</span>"</span></pre>
<p>as shown in the above snippet, the right way to template the Shell Command is to use a <code>quote</code> at the end.</p>
<p>the modified playbook would like this</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    vars:</span>
<span class="hljs-attr" style="color: #6d9cbe;">      - script-to-start:</span> <span class="hljs-string" style="color: #a5c261;">"./startbatchupload.sh"</span>
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Start the DB batch upload
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span>
<span style="color: #ffff00;"><span class="hljs-attr">      shell:</span>
          <span class="hljs-string">"<span class="hljs-template-variable">{{ script-to-start | quote}}</span>"</span></span>
<span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"/apps/dbscripts/"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        creates:</span> <span class="hljs-string" style="color: #a5c261;">"startbatchupload.lock"</span> 
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> fileout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> fileout</pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Example_7_Execute_multiple_commands_in_a_Single_Shell_Play">Example 7:  Execute multiple commands in a Single Shell &#8211; Play</span></h3>
<p>In all the previous examples we have only seen a Single command in a Shell module, Last but not least you should also know that Shell can accept multiple commands ( a batch) together in a Single Shell Play.</p>
<p>In fact, You can write your own Shell script alike inline with Ansible Shell module.</p>
<p>Here is the playbook, where I have grouped some shell commands to perform a Controlled and Clean tomcat restart.</p>
<p>The playbook is designed to perform the following steps in an order.</p>
<ul>
<li>Stop the TomcatServer</li>
<li>Clear the Cache</li>
<li>Truncate the Log file</li>
<li>Start the instance</li>
</ul>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Shell Examples
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> testservers
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Clear Cache and Restart tomcat
<span class="hljs-attr" style="color: #6d9cbe;">      become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">      delay:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">60</span>
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span> <span class="hljs-string" style="color: #a5c261;">|

        echo -e "\n Change directory to the Tomcat"
        cd tomcat8/

        echo -e "\n Present working directory is" `pwd`
        
        echo -e "\n Stopping the tomcat instance"
        bin/shutdown.sh
      
        echo -e "\n Clearning the tmp and work directory of tomcat"
        rm -rfv tmp/*
        rm -rfv work/*

        echo -e "\nTruncate the log file"
        &gt; logs/catalina.out

        echo -e "\nDirectory listing"
        ls -lrtd logs/catalina.out

        echo -e "\nStarting the instance"
        bin/startup.sh
          
</span><span class="hljs-attr" style="color: #6d9cbe;">      args:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        chdir:</span> <span class="hljs-string" style="color: #a5c261;">"/apps/tomcat/"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> fileout
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> fileout 

<span class="hljs-attr" style="color: #6d9cbe;">    - debug:</span> msg=<span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ fileout.stdout_lines }}</span>"</span></pre>
<p>You might really get a question this time how this would run and what output it would give. No worries, refer the following screen record.</p>
<p><script id="asciicast-TMCvyQzpQwsF2G8bUTDEODHPJ" src="https://asciinema.org/a/TMCvyQzpQwsF2G8bUTDEODHPJ.js" async></script><br />
So it works!.</p>
<p>However!. I recommend writing a Script and using the script module instead of writing an inline script like this but let the requirement be the Judge.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Conclusion">Conclusion</span></h2>
<p>Ansible Shell module is powerful and widely used, but with a lot of power comes the great fear.   As mentioned earlier, There are chances Ansible Shell module could lead to an Injection attack or break the system integrity so remember to use <code>quote</code> with Template variables and follow other best practices.</p>
<p>For controlled execution of Shell commands, You can use the Ansible <code>Command</code> module but as I already mentioned, Let your requirement be the judge.</p>
<p><script type="test/javascript">
   var codes =  document.querySelectorAll('code');
   codes.forEach( function(code, index) {
     code.style.setProperty('color', 'rgb(232, 44, 88)')
   });
</script></p>
<p>Hope it helps!.</p>
<p>Rate this article [ratings]</p>
<p>Cheers<br />
Rumen Lishkov</p>
<div id="postfollow">
<a href='https://ko-fi.com/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' border='0' alt='Buy Me a Coffee at ko-fi.com' data-src="https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2" loading="lazy" class="lazyload" /><noscript><img height='46' style='border:0px;height:46px;width: 186px' src='https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' data-eio="l" /></noscript></a>
<p>Follow us on<a href="https://www.facebook.com/rumenlishkov">Facebook</a> or<a href="https://www.twitter.com/mwinventory">Twitter</a>
</br>
For more practical videos and tutorials. <a href="https://www.youtube.com/kiss2mark">Subscribe to our channel</a>
</br>
Find me on Linkedin <a href="https://www.linkedin.com/in/rumen-lishkov/">My Profile</a>
</br>
</i>For any Consultation or to hire us <a href="../../cdn-cgi/l/email-protection.html#ff979a939390bf988d968b9986d19c9092"> <span class="__cf_email__" data-cfemail="afc7cac3c3c0efc8ddc6dbc9d681ccc0c2">[email&#160;protected]</span></a>
</br>
If you like this article. Show your Support! <a href="https://ko-fi.com/middlewareinventory">Buy me a Coffee.</a>
</br>
</p>
<p style="color: palevioletred !important;">Signup for Exclusive "Subscriber-only" Content</p>
<div class="emaillist">
<form action="#" method="post" class="es_subscription_form es_shortcode_form" id="es_subscription_form_1657190848" data-source="ig-es">
<div class="es-field-wrap"><label>Name*<br /><input type="text" name="name" class="ig_es_form_field_name" placeholder="" value="" required="required" /></label></div><div class="es-field-wrap"><label>Email*<br /><input class="es_required_field es_txt_email ig_es_form_field_email" type="email" name="email" value="" placeholder="" required="required" /></label></div><input type="hidden" name="lists[]" value="1" /><input type="hidden" name="form_id" value="3" />
<input type="hidden" name="es_email_page" value="4250" />
<input type="hidden" name="es_email_page_url" value="https://www.middlewareinventory.com/blog/ansible-shell-examples/" />
<input type="hidden" name="status" value="Unconfirmed" />
<input type="hidden" name="es-subscribe" id="es-subscribe" value="915ddf1a10" />
<label style="position:absolute;top:-99999px;left:-99999px;z-index:-99;"><input type="email" name="es_hp_email" class="es_required_field" tabindex="-1" autocomplete="-1" value="" /></label>
<input type="submit" name="submit" class="es_subscription_form_submit es_submit_button es_textbox_button" id="es_subscription_form_submit_1657190848" value="Subscribe" />
<span class="es_spinner_image" id="spinner-image"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Loading" data-src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" loading="lazy" class="lazyload" /><noscript><img src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" alt="Loading" data-eio="l" /></noscript></span>
</form>
<span class="es_subscription_message" id="es_subscription_message_1657190848"></span>
</div>
</div>
<hr>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-when-variable-is-defined-or-undefined-examples/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2018/12/Screen-Shot-2018-12-01-at-7.06.23-AM-150x150.png.html" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2018/12/Screen-Shot-2018-12-01-at-7.06.23-AM-150x150.png.html" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-when-variable-is-defined-or-undefined-examples/index.html'>Ansible When Variable is defined or undefined Examples</a><p>The Purpose The purpose of this post is to give you a real-time example and explanation of how ansible variable is defined and not defined (undefined) conditionals are working along with "when"&nbsp;conditional statement and how it controls the flow of the task and the play. The following ansible playbook is&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-ad-hoc-commands/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/01/Screen-Shot-2019-01-16-at-4.23.23-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/01/Screen-Shot-2019-01-16-at-4.23.23-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-ad-hoc-commands/index.html'>Ansible AD HOC Command Examples - Ansible Cheat Sheet | Devops Junction</a><p>Ansible ad hoc commands are one-liners designed to achieve a very specific task they are like quick snippets and your compact swiss army knife when you want to do a quick task across multiple machines. To put simply, Ansible ad hoc commands are one-liner Linux shell commands and playbooks are&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-sudo-ansible-become-example/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Sudo" data-src="../../wp-content/uploads/2019/08/Screenshot-2019-08-05-at-5.09.25-PM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/08/Screenshot-2019-08-05-at-5.09.25-PM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Sudo" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-sudo-ansible-become-example/index.html'>Ansible sudo - ansible become example</a><p>Ansible Sudo or Ansible become Introduction Ansible Sudo or become is a method to run a particular task in a playbook with Special Privileges like root user or some other user. In the earlier versions of ansible there is an option named as sudo which is deprecated now, Since ansible&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-command-examples/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Command" data-src="../../wp-content/uploads/2019/04/AnsibleCommand-1-150x150.jpeg" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/04/AnsibleCommand-1-150x150.jpeg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Command" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-command-examples/index.html'>Ansible Command Module Examples</a><p>Ansible Command Module Introduction Ansible Command module is used to execute commands on a remote node. The Command module, is used mostly to run simple Linux commands on a remote node/server which is part of a host group or Stand alone server mentioned in the host group. If you want&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-changed_when-and-failed_when-examples/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2018/09/Screen-Shot-2018-09-23-at-8.13.12-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2018/09/Screen-Shot-2018-09-23-at-8.13.12-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-changed_when-and-failed_when-examples/index.html'>Ansible changed_when and failed_when examples</a><p>In this post, we are going to see how to use conditional statements of Ansible&nbsp;such as&nbsp;when, changed_when, failed_when and where to use them appropriately and how it works. By these conditional modules, Ansible provides a way for us to define when should ansible run a certain task or consider the&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<div class="entry-tags clearfix">
<span class="meta-tags">
<a href="../tag/ansible-script-execute/index.html" rel="tag">Ansible Script execute</a><a href="../tag/ansible-shell/index.html" rel="tag">Ansible Shell</a><a href="../tag/ansible-shell-examples/index.html" rel="tag">Ansible Shell Examples</a><a href="../tag/ansible-shell-multiple-commands/index.html" rel="tag">Ansible Shell multiple commands</a><a href="../tag/ansible-shell-script/index.html" rel="tag">Ansible Shell script</a> </span>
</div>
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../ansible-git-example/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>Ansible Git Example &#8211; Checkout code from Git Repo Securely</a></div><div class="nav-next"><a href="../powershell-find-string-in-file/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>Powershell Find String in file &#8211; How to use windows find command</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>


<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 100%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 100%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-4250 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://www.middlewareinventory.com/blog/ansible-shell-examples/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Ansible+Shell+Module+Examples&url=https://www.middlewareinventory.com/blog/ansible-shell-examples/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://www.middlewareinventory.com/blog/ansible-shell-examples/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Ansible+Shell+Module+Examples&body=https://www.middlewareinventory.com/blog/ansible-shell-examples/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://www.middlewareinventory.com/blog/ansible-shell-examples/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"4250 https:\/\/www.middlewareinventory.com\/?p=4250","disqusShortname":"mwinventory","disqusTitle":"Ansible Shell Module Examples","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/ansible-shell-examples\/","postId":"4250"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"2019084a26"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"b4d440853b","post_id":"4250"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"0b980bed5f","ip":"82.76.84.52","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://www.middlewareinventory.com/blog/ansible-shell-examples/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 0;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657190848;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="#" id="cn-refuse-cookie" data-cookie-set="refuse" class="cn-set-cookie cn-button bootstrap button">No</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
<div class="cookie-notice-revoke-container"><a href="#" class="cn-revoke-cookie cn-button bootstrap button">Revoke cookies</a></div>
</div>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Ansible SSH Key transfer from one host to another - local and remote</title>
<meta name="description" content="SSH Key based authentication setup using ansible. In this post, we are going to see how to enable the SSH key-based authentication between two remote servers using ansible by creating and exchanging the keys. We are going to use ansible built-in modules like Shell and Copy and Fetch and most importantly authorized_key" />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="ansible-ssh-key-exchange/index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Ansible SSH Key transfer from one host to another - local and remote" />
<meta property="og:description" content="SSH Key based authentication setup using ansible. In this post, we are going to see how to enable the SSH key-based authentication between two remote servers using ansible by creating and exchanging the keys. We are going to use ansible built-in modules like Shell and Copy and Fetch and most importantly authorized_key" />
<meta property="og:url" content="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="https://www.facebook.com/rumenlishkov" />
<meta property="article:published_time" content="2018-09-12T22:56:35+00:00" />
<meta property="article:modified_time" content="2022-02-04T05:19:28+00:00" />
<meta property="og:image" content="https://airdata.gitlab.io/blog/wp-content/uploads/2018/09/TheObjective.png" />
<meta property="og:image:width" content="741" />
<meta property="og:image:height" content="404" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["https://www.facebook.com/rumenlishkov","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://airdata.gitlab.io/blog/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#primaryimage","inLanguage":"en-US","url":"https://airdata.gitlab.io/blog/wp-content/uploads/2018/09/TheObjective.png","width":741,"height":404},{"@type":"WebPage","@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#webpage","url":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/","name":"Ansible SSH Key transfer from one host to another - local and remote","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#primaryimage"},"datePublished":"2018-09-12T22:56:35+00:00","dateModified":"2022-02-04T05:19:28+00:00","description":"SSH Key based authentication setup using ansible. In this post, we are going to see how to enable the SSH key-based authentication between two remote servers using ansible by creating and exchanging the keys. We are going to use ansible built-in modules like Shell and Copy and Fetch and most importantly authorized_key","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/"]}]},{"@type":"Article","@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#article","isPartOf":{"@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"Ansible SSH Key transfer from one host to another &#8211; local and remote","datePublished":"2018-09-12T22:56:35+00:00","dateModified":"2022-02-04T05:19:28+00:00","mainEntityOfPage":{"@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#primaryimage"},"keywords":"Ansible authorized_key module example,ansible examples,ansible SSH key based authentication between servers,SSH Key based authentication","articleSection":"Ansible","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Ansible SSH Key transfer from one host to another &#8211; local and remote Comments Feed" href="ansible-ssh-key-exchange/feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-6674956-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-6674956-8');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"3d8661396b"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://airdata.gitlab.io/blog/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../wp-json/index.json" /><link rel="alternate" type="application/json" href="../wp-json/wp/v2/posts/1735.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='ansible-ssh-key-exchange/index.html' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-ssh-key-exchange-.json" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-ssh-key-exchange-&amp;format=xml.xml" />
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Ansible SSH Key transfer from one host to another &#8211; local and remote - Middleware Inventory" />
<meta property="og:description" content="SSH Key-based authentication setup in LINUX (or) UNIX based OS is one of the major platform services related task and most frequently executed task by Unix admins. Ansible, An IT Automation tool could automate this tedious task as well.

SSH Key based authentication is indispensable when it comes to automation. Even some of the Ansible related tasks like SCP and RSYNC(synchronize) requires" />
<meta property="og:url" content="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="https://airdata.gitlab.io/blog/wp-content/uploads/2018/09/TheObjective.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="SSH Key-based authentication setup in LINUX (or) UNIX based OS is one of the major platform services related task and most frequently executed task by Unix admins. Ansible, An IT Automation tool could automate this tedious task as well.

SSH Key based authentication is indispensable when it comes to automation. Even some of the Ansible related tasks like SCP and RSYNC(synchronize) requires" />
<meta name="twitter:title" content="Ansible SSH Key transfer from one host to another &#8211; local and remote - Middleware Inventory" />
<meta property="twitter:image" content="https://airdata.gitlab.io/blog/wp-content/uploads/2018/09/TheObjective.png" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://airdata.gitlab.io/blog/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">article h2
{
    background-color: #29558c;
    color: white;
    padding-left: 1%;
    border-left: 15px solid crimson;
    font-weight: 400;
}
article h3
{
    background-color: whitesmoke;
    color: black;
    padding-left: 1%;
    border-left: 10px solid black;
    font-weight: 400;
    font-size: 22px;
}
#precode
{
  background-color: transparent !important;
  color: #00193a !important;
  font-size: 16px;
}
.post-img
{
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  border: 1px solid lightgray;
}
article h2
{
    background-color: #29558c;
    color: white;
    padding-left: 1%;
    border-left: 15px solid crimson;
    font-weight: 400;
    font-size: 22px;
}
pre
{
  display: block; 
  overflow-x: auto; 
  padding-left: 2em;
  padding-top: 3em;
  padding-bottom: 3em;
  background: #eaeef3 none repeat scroll 0% 0%; 
  color: #00193a;
}
li {
    padding: 2px;
    margin-left: 2%;
}
code
{
  color: black;
}
blockquote {
    padding: 2%;
    background-color: none !important;
}
div.enlighter{
  font-size: 1.2em;  
}
.enlighter-default {
    font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-1735 single-format-standard wp-custom-logo cookies-set cookies-accepted elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../index.html" class="custom-logo-link" rel="home"><img width="160" height="120" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="160" height="120" src="../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1513"><a href="category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3220"><a href="category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>

<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-1735" class="post-1735 post type-post status-publish format-standard has-post-thumbnail hentry category-ansible tag-ansible-authorized_key-module-example tag-ansible-examples tag-ansible-ssh-key-based-authentication-between-servers tag-ssh-key-based-authentication wpautop">
<header class="entry-header">
<h1 class="entry-title">Ansible SSH Key transfer from one host to another &#8211; local and remote</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="ansible-ssh-key-exchange/index.html" title="4:26 am" rel="bookmark"><time class="entry-date published updated" datetime="February 4, 2022">February 4, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Ansible%20SSH%20Key%20transfer%20from%20one%20host%20to%20another%20%E2%80%93%20local%20and%20remote&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-ssh-key-exchange%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="1735" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Ansible+SSH+Key+transfer+from+one+host+to+another+%E2%80%93+local+and+remote&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-ssh-key-exchange%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="1735" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Ansible%20SSH%20Key%20transfer%20from%20one%20host%20to%20another%20%E2%80%93%20local%20and%20remote&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-ssh-key-exchange%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="1735" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-ssh-key-exchange%2F&subject=Ansible%20SSH%20Key%20transfer%20from%20one%20host%20to%20another%20%E2%80%93%20local%20and%20remote" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="1735" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="1735" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p>SSH Key-based authentication setup in LINUX (or) UNIX based OS is one of the major platform services related task and most frequently executed task by Unix admins. Ansible, An IT Automation tool could automate this tedious task as well.</p>
<p>SSH Key based authentication is indispensable when it comes to automation. Even some of the Ansible related tasks like SCP and RSYNC(synchronize) requires SSH Key based authentication to be enabled before running the ansible playbook.</p>
<p>In this post, we are going to see</p>
<p>How to enable the SSH Key-based authentication setup between multiple servers (or) hosts using Ansible <code>ad-hoc</code> commands and <code>playbook</code></p>
<p>Or How to transfer SSH Keys using ansible playbook and ad-hoc commands.</p>
<h2></h2>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#The_Objective" title="The Objective">The Objective</a></li><li><a href="#Index" title="Index">Index</a></li><li><a href="#The_Plan" title="The Plan">The Plan</a></li><li><a href="#Ansible_AD-HOC_Commands_Ansible_SSH_Key" title="Ansible AD-HOC Commands &#8211; Ansible SSH Key">Ansible AD-HOC Commands &#8211; Ansible SSH Key</a></li><li><a href="#Ansible_Playbook_to_Exchange_keys_between_hosts" title="Ansible Playbook  to Exchange keys between hosts">Ansible Playbook  to Exchange keys between hosts</a><ul><li><a href="#Type1_With_Ansible_Shell_module_and_Typical_Commands" title="Type1: With Ansible Shell module and Typical Commands">Type1: With Ansible Shell module and Typical Commands</a></li><li><a href="#Type2_With_Ansible_authorized_key_module" title="Type2: With Ansible authorized_key module">Type2: With Ansible authorized_key module</a></li></ul></li><li><a href="#Ansible_SSH_Key_Exchange_between_multiple_hosts" title="Ansible SSH Key Exchange between multiple hosts">Ansible SSH Key Exchange between multiple hosts</a><ul><li><a href="#Playbook_execution_Output" title="Playbook execution Output">Playbook execution Output</a></li></ul></li></ul></nav></div>
<h2><span class="ez-toc-section" id="The_Objective"><span style="font-size: 18pt;">The Objective</span></span></h2>
<p>I have two Red Hat Enterprise Linux servers named <code>mwiapp01</code> and <code>mwiapp02</code> and I have to enable SSH key based (passwordless) authentication between them, in both directions.</p>
<p><a href="../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM.png"><img class="post-img alignnone wp-image-2843 size-full lazyload" src="../wp-content/ewww/lazy/placeholder-1191x508.png" alt="" width="1191" height="508" data-src="../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM.png" loading="lazy" data-srcset="../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM.png 1191w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-300x128.png 300w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-768x328.png 768w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-1024x437.png 1024w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-2843 size-full" src="../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM.png" alt="" width="1191" height="508" srcset="../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM.png 1191w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-300x128.png 300w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-768x328.png 768w, ../wp-content/uploads/2018/09/Screen-Shot-2019-02-01-at-12.25.15-PM-1024x437.png 1024w" sizes="(max-width: 1191px) 100vw, 1191px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Index">Index</span></h2>
<ol>
<li> The Plan ( What we are trying to achieve in this article)</li>
<li> SSH Key creation and Exchange using Ansible <strong>AD HOC</strong> commands</li>
<li> SSH Key Creation and Exchange using Ansible<strong> Playbook</strong>
<ol style="list-style-type: lower-alpha;">
<li> Using <strong>Shell</strong> Module</li>
<li> Using the <strong>authorized_key</strong> module</li>
</ol>
</li>
<li>SSH Key Creation and Exchange between <strong>multiple hosts </strong></li>
</ol>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="The_Plan"><span style="font-size: 18pt;">The Plan</span></span></h2>
<p>We are going to see how to achieve our objective (or) requirement using Ansible <strong>ad-hoc</strong> command and ansible <strong>playbook</strong> with and without SSH <strong>authorized_key</strong> module.</p>
<p>Now we will see how to do this with both Ansible ad-hoc commands and playbook.</p>
<p>Let us consider that I have already grouped these servers into a host group  named &#8220;<strong>app</strong>&#8221; in <code>ansible_hosts</code> inventory file</p>
<p><a href="../wp-content/uploads/2018/09/TheObjective.png"><img class="post-img alignnone wp-image-1756 size-full lazyload" src="../wp-content/ewww/lazy/placeholder-741x404.png" alt=" Enable SSH Key based authentication using Ansible" width="741" height="404" data-src="../wp-content/uploads/2018/09/TheObjective.png" loading="lazy" data-srcset="../wp-content/uploads/2018/09/TheObjective.png 741w, ../wp-content/uploads/2018/09/TheObjective-300x164.png 300w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-1756 size-full" src="../wp-content/uploads/2018/09/TheObjective.png" alt=" Enable SSH Key based authentication using Ansible" width="741" height="404" srcset="../wp-content/uploads/2018/09/TheObjective.png 741w, ../wp-content/uploads/2018/09/TheObjective-300x164.png 300w" sizes="(max-width: 741px) 100vw, 741px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<h2></h2>
<h2><span class="ez-toc-section" id="Ansible_AD-HOC_Commands_Ansible_SSH_Key"><span style="font-size: 18pt;">Ansible AD-HOC Commands &#8211; Ansible SSH Key</span></span></h2>
<p>In this method, we are going to use the Ansible ad hoc commands to perform the ssh key exchange and to copy the ssh keys between hosts. to know more about ansible ad hoc command <a href="ansible-ad-hoc-commands/index.html">refer to this article</a></p>
<p><span style="font-size: 14pt;"><strong>Step 1: </strong></span> Create SSH Private key using SSH-KEYGEN for the user <code>weblogic</code></p>
<pre><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="87e6ecf4e6f5e6f1c7eaeee3e3ebe2f0e6f5e2eee9f1e2e9f3e8f5fe">[email&#160;protected]</a>:~$ ansible app -m shell -a "ssh-keygen -q -b 2048 -t rsa -N '' -C 'creating SSH' -f ~/.ssh/id_rsa creates='~/.ssh/id_rsa'" -i ansible_hosts -b --become-user=weblogic

mwiapp02 | SUCCESS | rc=0 &gt;&gt;
mwiapp01 | SUCCESS | rc=0 &gt;&gt;</pre>
<p>&nbsp;</p>
<p><strong><span style="font-size: 14pt;">Step 2:</span> </strong> Make sure the Private key file is created</p>
<pre><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="8feee4fceefdeef9cfe2e6ebebe3eaf8eefdeae6e1f9eae1fbe0fdf6">[email&#160;protected]</a>:~$ ansible app -m shell -a "ls -lrt  ~/.ssh/id_rsa" -i ansible_hosts -b --become-user=weblogic

mwiapp02 | SUCCESS | rc=0 &gt;&gt;
-rw------- 1 weblogic weblogic 1679 Sep 10 17:25 /home/weblogic/.ssh/id_rsa
mwiapp01 | SUCCESS | rc=0 &gt;&gt;
-rw------- 1 weblogic weblogic 1675 Sep 10 17:25 /home/weblogic/.ssh/id_rsa</pre>
<p>&nbsp;</p>
<p><span style="font-size: 14pt;"><strong>Step 3:  </strong></span>Fetch the Key  Public Key from the servers to the ansible master</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-linenumbers="false" data-enlighter-theme="bootstrap4"><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="e1808a9280938097a18c8885858d8496809384888f97848f958e9398">[email&#160;protected]</a>:~$ ansible app -m fetch -a "src='~/.ssh/id_rsa.pub' dest='buffer/{{inventory_hostname}}-id_rsa.pub' flat='yes'" -i ansible_hosts -b --become-user=weblogic

mwiapp02 | SUCCESS =&gt; {

    "changed": true,
    "checksum": "e128efa0cf4008d6f0a8652da44249d016a1c4fb",
    "dest": "/Users/aksarav/VirtualBox VMs/vagrantVM/buffer/mwiapp02-id_rsa.pub",
    "md5sum": "92332ffb86a310f2f7fa55e9e18e1f65",
    "remote_checksum": "e128efa0cf4008d6f0a8652da44249d016a1c4fb",
    "remote_md5sum": null
}

mwiapp01 | SUCCESS =&gt; {
    "changed": true,
    "checksum": "8ccbec5b91fd027e0e3ba8ca6fe2fa5e6faec0e8",
    "dest": "/Users/aksarav/VirtualBox VMs/vagrantVM/buffer/mwiapp01-id_rsa.pub",
    "md5sum": "f46044276aba3e4e6d4e918192676b76",
    "remote_checksum": "8ccbec5b91fd027e0e3ba8ca6fe2fa5e6faec0e8",
    "remote_md5sum": null

}</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><strong><span style="font-size: 14pt;">Step 4: </span>  </strong>Copy the public key files to their respective destination servers to update <code>authorized_keys</code>.  <em>mwiapp01</em> server&#8217;s public key <code>mwiapp01-id_rsa.pub</code> would go to <em>mwiapp02</em> server and vice versa</p>
<p><span style="font-size: 14pt;"><strong>4a)</strong> </span>Copy the <code>mwiapp01</code> public key to <code>mwiapp02</code> and update authorized key using <span style="color: #096c87;">ansible authorized_key module</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="a3c2c8d0c2d1c2d5e3cecac7c7cfc6d4c2d1c6cacdd5c6cdd7ccd1da">[email&#160;protected]</a>:~$ ansible app -m authorized_key -a "user='weblogic' state='present' key='{{ lookup('file','buffer/mwiapp01-id_rsa.pub')}}'" --limit=mwiapp02 -i ansible_hosts -b --become-user=weblogic

mwiapp02 | SUCCESS =&gt; {
    "changed": true,
    "comment": null,
    "exclusive": false,
    "key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDIRJwtqDW614wf9vKm51oTi3mNt4CkYXB7aLxhT1sEsZILUBYBLFqc78QB2eqelmbvgWN471CcR4XAYPxImB+ibZLhBuLqz49lPWpaVl+D55THVJFiCJ5MrXZBeSD73hRX0y1cR4kuPflaYLodz/sNOeScufomlhs+cQzwGpShSXqNtTJMl9KqqWnczBut6mdK5X/+ETruCTVigLrKfoAGDbpFHm2MNuVNud34HUffKcnqXz8ihbH1tmlW5jy+j6mMDsMNfIA7coP/bKoa2vVMX1sFpAQQCPhejLV26IYM5fYABVYrzxLtaiioylRyvSWl7NFTpgua+dtkbdV7aEWr creating SSH",
    "key_options": null,
    "keyfile": "/home/weblogic/.ssh/authorized_keys",
    "manage_dir": true,
    "path": null,
    "state": "present",
    "unique": false,
    "user": "weblogic",
    "validate_certs": true
}</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 14pt;">4b) </span> </strong>Copy the <code>mwiapp02</code>&#8216;s public key to <code>mwiapp01</code>and update authorized key using <span style="color: #096c87;">ansible authorized_key module</span></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="fb9a90889a899a8dbb96929f9f979e8c9a899e92958d9e958f948982">[email&#160;protected]</a>:~$ ansible app -m authorized_key -a "user='weblogic' state='present' key='{{ lookup('file','buffer/mwiapp02-id_rsa.pub')}}'" --limit=mwiapp01 -i ansible_hosts -b --become-user=weblogic

mwiapp01 | SUCCESS =&gt; {

    "changed": true,
    "comment": null,
    "exclusive": false,
    "key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDh50TVgulXoAEcRz0rn8SEXgVVoLpaebqk+PvhpRO27JbGC6WMlwpDNxEOdXjEn9Qlotm7zF/JUAjXaxEiPS7P5QSQjSTRxBu6YrTEV8sPnJyiocp+ll+1U74r18R88jE03+JOdxDroKROz3qpfT/vqzTHi6hnMdWs0n8vE09+oWPorW9lqrdWQ0C+AZShIWoSc/9nrLVDXci4rxhbwgrzyJbPd77sbV5yDoDfFLTKf3z3NQ48Gku/7zTdTNxrHOz8wop5Iqy7fqfH7jWAxlT0mWdJ6Ac+++ARj+x/v59hNfwMswc3rI2fE4tPNXIKC9tcnwVG3teaV1h4XxpHyWEt creating SSH",
    "key_options": null,
    "keyfile": "/home/weblogic/.ssh/authorized_keys",
    "manage_dir": true,
    "path": null,
    "state": "present",
    "unique": false,
    "user": "weblogic",
    "validate_certs": true
}</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 14pt;">Step 5:</span> </strong>Validate the SSH Key-based authentication between each server as <code>weblogic</code> user ( If everything we did is correct, we should be able to execute commands over SSH from one another.</p>
<p><span style="font-size: 14pt;"><strong>5a) </strong></span> Invoke SSH login from <code>mwiapp01</code> to <code>mwiapp02</code>  and execute <span style="color: #096c87;">uname -n</span> command</p>
<pre><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="fa9b91899b889b8cba97939e9e969f8d9b889f93948c9f948e958883">[email&#160;protected]</a>:~$ ansible app -m shell -a "ssh mwiapp02 'uname -a'" -i ansible_hosts -b --become-user=weblogic --limit=mwiapp01

mwiapp01 | SUCCESS | rc=0 &gt;&gt;
Linux mwiapp02 3.10.0-514.2.2.el7.x86_64 #1 SMP Wed Nov 16 13:15:13 EST 2016 x86_64 x86_64 x86_64 GNU/Linux</pre>
<p><strong><span style="font-size: 14pt;">5b)</span> </strong>Invoke SSH login from <code>mwiapp02</code> to <code>mwiapp01</code>  and execute <span style="color: #096c87;">uname -n</span> command</p>
<pre><a href="../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="5b3a30283a293a2d1b36323f3f373e2c3a293e32352d3e352f342922">[email&#160;protected]</a>:~/VirtualBox VMs/vagrantVM$ ansible app -m shell -a "ssh mwiapp01 'uname -a'" -i ansible_hosts -b --become-user=weblogic --limit=mwiapp02

mwiapp02 | SUCCESS | rc=0 &gt;&gt;
Linux mwiapp01 3.10.0-514.2.2.el7.x86_64 #1 SMP Wed Nov 16 13:15:13 EST 2016 x86_64 x86_64 x86_64 GNU/Linux</pre>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Ansible_Playbook_to_Exchange_keys_between_hosts"><span style="font-size: 18pt;">Ansible Playbook  to Exchange keys between hosts</span></span></h2>
<h3><span class="ez-toc-section" id="Type1_With_Ansible_Shell_module_and_Typical_Commands">Type1: With Ansible <span style="color: #db4861;">Shell </span>module and <span style="color: #db4861;">Typical Commands</span></span></h3>
<p><a href="../wp-content/uploads/2018/09/AnsibleMethod1.png"><img class="alignright wp-image-1751 size-medium lazyload" src="../wp-content/ewww/lazy/placeholder-300x268.png" alt=" How to enable SSH Key based authentication using Ansible" width="300" height="268" data-src="../wp-content/uploads/2018/09/AnsibleMethod1-300x268.png" loading="lazy" data-srcset="../wp-content/uploads/2018/09/AnsibleMethod1-300x268.png 300w, ../wp-content/uploads/2018/09/AnsibleMethod1-768x686.png 768w, ../wp-content/uploads/2018/09/AnsibleMethod1-1024x915.png 1024w, ../wp-content/uploads/2018/09/AnsibleMethod1.png 1581w" data-sizes="auto" /><noscript><img class="alignright wp-image-1751 size-medium" src="../wp-content/uploads/2018/09/AnsibleMethod1-300x268.png" alt=" How to enable SSH Key based authentication using Ansible" width="300" height="268" srcset="../wp-content/uploads/2018/09/AnsibleMethod1-300x268.png 300w, ../wp-content/uploads/2018/09/AnsibleMethod1-768x686.png 768w, ../wp-content/uploads/2018/09/AnsibleMethod1-1024x915.png 1024w, ../wp-content/uploads/2018/09/AnsibleMethod1.png 1581w" sizes="(max-width: 300px) 100vw, 300px" data-eio="l" /></noscript></a></p>
<p>In this method, We are not going to use any ansible in-built module and every step is done manually by executing the shell command. The Playbook contains the following tasks</p>
<ol>
<li><strong>Create</strong> an SSH Private and Public Key using  <code>ssh-keygen</code> command</li>
<li><strong>Fetch</strong> generated key files from remote servers [mwiapp01,mwiapp02]  to ansible master</li>
<li><strong>Copy</strong> the file from the master to remote destination servers</li>
<li><strong>Add</strong> the public to the mentioned user&#8217;s <code>authorized_keys</code> file</li>
</ol>
<p>&nbsp;</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">---
- name: Exchange Keys between servers
  become: yes
  become_user: weblogic
  hosts: app
  tasks:
    - name: SSH KeyGen command
      shell: &gt; 
        ssh-keygen -q -b 2048 -t rsa -N "" -C "creating SSH" -f ~/.ssh/id_rsa
        creates="~/.ssh/id_rsa"

    - name: Fetch the keyfile from one server to another
      fetch: 
        src: "~/.ssh/id_rsa.pub"
        dest: "buffer/{{ansible_hostname}}-id_rsa.pub"
        flat: yes

    - name: Copy the file from master to the destination
      copy:
        src: "buffer/{{item.dest}}-id_rsa.pub"
        dest: "/tmp/remote-id_rsa.pub"  
      when: "{{ item.dest != ansible_hostname }}"
      with_items: 
        - { dest: "{{groups['app'][1]}}"}
        - { dest: "{{groups['app'][0]}}"}

    - name: add the public key into Authorized_keys file to enable Key Auth
      shell: "cat /tmp/remote-id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys"
      register: addtoauth</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Type2_With_Ansible_authorized_key_module">Type2: With Ansible <span style="color: #db4861;">authorized_key</span> module</span></h3>
<p class="alignnone"><a href="../wp-content/uploads/2018/09/AnsibleMethod2.png"><img class="alignleft wp-image-1752 size-medium lazyload" src="../wp-content/ewww/lazy/placeholder-300x268.png" alt="" width="300" height="268" data-src="../wp-content/uploads/2018/09/AnsibleMethod2-300x268.png" loading="lazy" data-srcset="../wp-content/uploads/2018/09/AnsibleMethod2-300x268.png 300w, ../wp-content/uploads/2018/09/AnsibleMethod2-768x685.png 768w, ../wp-content/uploads/2018/09/AnsibleMethod2-1024x913.png 1024w, ../wp-content/uploads/2018/09/AnsibleMethod2.png 1582w" data-sizes="auto" /><noscript><img class="alignleft wp-image-1752 size-medium" src="../wp-content/uploads/2018/09/AnsibleMethod2-300x268.png" alt="" width="300" height="268" srcset="../wp-content/uploads/2018/09/AnsibleMethod2-300x268.png 300w, ../wp-content/uploads/2018/09/AnsibleMethod2-768x685.png 768w, ../wp-content/uploads/2018/09/AnsibleMethod2-1024x913.png 1024w, ../wp-content/uploads/2018/09/AnsibleMethod2.png 1582w" sizes="(max-width: 300px) 100vw, 300px" data-eio="l" /></noscript></a>In this method, we are going to use the ansible built-in module named <code>"authorized_key"</code>.  The following playbook has three steps</p>
<ol>
<li><strong>Create</strong> an SSH Private and Public Key using  <code>ssh-keygen</code> command</li>
<li><strong>Fetch</strong> generated key files from remote servers [mwiapp01,mwiapp02]  to ansible master</li>
<li>Use the <strong>authorized_key</strong> module to <strong>copy</strong> the file remote machine and <strong>add</strong> it to the mentioned user&#8217;s <code>authorized_keys</code> file ( <em>If you could notice, the authorized_key module is actually performing the step3 and step4 from the manual method</em> )</li>
</ol>
<p>&nbsp;</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">---
- name: Exchange Keys between servers
  become: yes
  become_user: weblogic
  hosts: app
  tasks:
    - name: SSH KeyGen command
      tags: run
      shell: &gt; 
        ssh-keygen -q -b 2048 -t rsa -N "" -C "creating SSH" -f ~/.ssh/id_rsa
        creates="~/.ssh/id_rsa"

    - name: Fetch the keyfile from one server to another
      tags: run
      fetch: 
        src: "~/.ssh/id_rsa.pub"
        dest: "buffer/{{ansible_hostname}}-id_rsa.pub"
        flat: yes

    - name: Copy the key add to authorized_keys using Ansible module
      tags: run
      authorized_key:
        user: weblogic
        state: present
        key: "{{ lookup('file','buffer/{{item.dest}}-id_rsa.pub')}}"
      when: "{{ item.dest != ansible_hostname }}"
      with_items: 
        - { dest: "{{groups['app'][1]}}"}
        - { dest: "{{groups['app'][0]}}"}</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Ansible_SSH_Key_Exchange_between_multiple_hosts">Ansible SSH Key Exchange between multiple hosts</span></h2>
<p>Though the previously given examples have talked about Creating and Exchanging the Keys between only two servers. With a Simple modification in the same playbook. you would be able to achieve Exchanging the SSH Keys across multiple servers (or) all the servers in the host group.</p>
<p>Here is the Playbook to exchange SSH key between multiple hosts.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">- name:</span> Exchange Keys between servers
<span class="hljs-attr" style="color: #6d9cbe;">  hosts:</span> multi
<span class="hljs-attr" style="color: #6d9cbe;">  tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> SSH KeyGen command
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> run
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span> <span class="hljs-string" style="color: #a5c261;">&gt; 
        ssh-keygen -q -b 2048 -t rsa -N "" -C "creating SSH" -f ~/.ssh/id_rsa
        creates="~/.ssh/id_rsa"

</span><span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Fetch the keyfile from the node to master
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> run
<span class="hljs-attr" style="color: #6d9cbe;">      fetch:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        src:</span> <span class="hljs-string" style="color: #a5c261;">"~/.ssh/id_rsa.pub"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        dest:</span> <span class="hljs-string" style="color: #a5c261;">"buffer/<span class="hljs-template-variable" style="color: #a5c261;">{{ansible_hostname}}</span>-id_rsa.pub"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        flat:</span> <span class="hljs-literal">yes</span>

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Copy the key add to authorized_keys using Ansible module
<span class="hljs-attr" style="color: #6d9cbe;">      tags:</span> runcd
<span class="hljs-attr" style="color: #6d9cbe;">      authorized_key:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        user:</span> vagrant
<span class="hljs-attr" style="color: #6d9cbe;">        state:</span> present
<span class="hljs-attr" style="color: #6d9cbe;">        key:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ lookup('file','buffer/{{item}}</span>-id_rsa.pub')}}"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      when:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ item != ansible_hostname }}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      with_items:</span> 
<span class="hljs-bullet" style="color: #6d9cbe;">        -</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ groups['multi'] }}</span>"</span>       

</pre>
<p><strong>What is the difference</strong></p>
<p>we have changed the loop with_items to parse all the servers in the host group instead of two specific servers. These are the two modified lines from the previous example.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;"><span class="hljs-attr" style="color: #6d9cbe;"> when:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ item != ansible_hostname }}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;"> with_items:</span> 
<span class="hljs-bullet" style="color: #6d9cbe;">        -</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ groups['multi'] }}</span>"</span></pre>
<h3><script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></h3>
<h3><span class="ez-toc-section" id="Playbook_execution_Output">Playbook execution Output</span></h3>
<p>We have saved the Type1 playbook in the name <code>sshkey-exchange-t1.yaml</code> and executed it. and here is the output.</p>
<p>In the last task. you could see that we successfully initiated an SSH connection  from one another and ran the <code>uname -a</code> command</p>
<p><a href="../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM.png"><img class="post-img alignnone wp-image-1762 size-full lazyload" src="../wp-content/ewww/lazy/placeholder-1165x835.png" alt=" Enable SSH Key based authentication using Ansible" width="1165" height="835" data-src="../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM.png" loading="lazy" data-srcset="../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM.png 1165w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-300x215.png 300w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-768x550.png 768w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-1024x734.png 1024w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-90x65.png 90w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-1762 size-full" src="../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM.png" alt=" Enable SSH Key based authentication using Ansible" width="1165" height="835" srcset="../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM.png 1165w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-300x215.png 300w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-768x550.png 768w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-1024x734.png 1024w, ../wp-content/uploads/2018/09/Screen-Shot-2018-09-13-at-3.57.14-AM-90x65.png 90w" sizes="(max-width: 1165px) 100vw, 1165px" data-eio="l" /></noscript></a></p>
<p>Hope it helps.</p>
<p>We recommend the following article in case if you are looking to exchange IP between multiple hosts in Ansible. adding an IP in /etc/hosts file of multiple hosts in Ansible.</p>
<blockquote class="wp-embedded-content" data-secret="Xz7hIxGOpP"><p><a href="ansible-update-etc-hosts-file-across-all-hosts/index.html">ansible update /etc/hosts file with IP of all hosts across all hosts</a></p></blockquote>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" style="position: absolute; clip: rect(1px, 1px, 1px, 1px);" title="&#8220;ansible update /etc/hosts file with IP of all hosts across all hosts&#8221; &#8212; Middleware Inventory" src="ansible-update-etc-hosts-file-across-all-hosts/embed/index.html#?secret=Xz7hIxGOpP" data-secret="Xz7hIxGOpP" width="600" height="338" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>For any questions (or) support. Please feel free to comment</p>
<p>Rate this article [ratings]</p>
<p>Cheers,</p>
<p>Rumen Lishkov</p>
<div id="postfollow">
<a href='https://ko-fi.com/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' border='0' alt='Buy Me a Coffee at ko-fi.com' data-src="https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2" loading="lazy" class="lazyload" /><noscript><img height='46' style='border:0px;height:46px;width: 186px' src='https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' data-eio="l" /></noscript></a>
<p>Follow us on<a href="https://www.facebook.com/rumenlishkov">Facebook</a> or<a href="https://www.twitter.com/mwinventory">Twitter</a>
</br>
For more practical videos and tutorials. <a href="https://www.youtube.com/kiss2mark">Subscribe to our channel</a>
</br>
Find me on Linkedin <a href="https://www.linkedin.com/in/rumen-lishkov/">My Profile</a>
</br>
</i>For any Consultation or to hire us <a href="../cdn-cgi/l/email-protection.html#1c74797070735c7b6e75687a65327f7371"> <span class="__cf_email__" data-cfemail="127a777e7e7d5275607b66746b3c717d7f">[email&#160;protected]</span></a>
</br>
If you like this article. Show your Support! <a href="https://ko-fi.com/middlewareinventory">Buy me a Coffee.</a>
</br>
</p>
<p style="color: palevioletred !important;">Signup for Exclusive "Subscriber-only" Content</p>
<div class="emaillist">
<form action="#" method="post" class="es_subscription_form es_shortcode_form" id="es_subscription_form_1657191068" data-source="ig-es">
<div class="es-field-wrap"><label>Name*<br /><input type="text" name="name" class="ig_es_form_field_name" placeholder="" value="" required="required" /></label></div><div class="es-field-wrap"><label>Email*<br /><input class="es_required_field es_txt_email ig_es_form_field_email" type="email" name="email" value="" placeholder="" required="required" /></label></div><input type="hidden" name="lists[]" value="1" /><input type="hidden" name="form_id" value="3" />
<input type="hidden" name="es_email_page" value="1735" />
<input type="hidden" name="es_email_page_url" value="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" />
<input type="hidden" name="status" value="Unconfirmed" />
<input type="hidden" name="es-subscribe" id="es-subscribe" value="915ddf1a10" />
<label style="position:absolute;top:-99999px;left:-99999px;z-index:-99;"><input type="email" name="es_hp_email" class="es_required_field" tabindex="-1" autocomplete="-1" value="" /></label>
<input type="submit" name="submit" class="es_subscription_form_submit es_submit_button es_textbox_button" id="es_subscription_form_submit_1657191068" value="Subscribe" />
<span class="es_spinner_image" id="spinner-image"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Loading" data-src="../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" loading="lazy" class="lazyload" /><noscript><img src="../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" alt="Loading" data-eio="l" /></noscript></span>
</form>
<span class="es_subscription_message" id="es_subscription_message_1657191068"></span>
</div>
</div>
<hr>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='enable-ssh-key-based-authentication-ssh-without-password/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="SSH without Password Key Based Authentication" data-src="../wp-content/uploads/2018/07/KeyBasedAuth-150x150.jpeg" loading="lazy" /><noscript><img width="150" height="150" src="../wp-content/uploads/2018/07/KeyBasedAuth-150x150.jpeg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="SSH without Password Key Based Authentication" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='enable-ssh-key-based-authentication-ssh-without-password/index.html'>How to enable SSH Key based authentication - Passwordless SSH</a><p>How to SSH without Password into remote Linux Server is the question that every Engineer working on Linux might have come across. Sometimes the Question we seek could be different like ssh command without password ssh to the remote server without password SSH without password from Shell Script SCP to&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='vagrant-private-key-ansible-ssh-permission-denied-resolve-how/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../wp-content/uploads/2018/07/Screen-Shot-2018-07-02-at-2.26.20-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../wp-content/uploads/2018/07/Screen-Shot-2018-07-02-at-2.26.20-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='vagrant-private-key-ansible-ssh-permission-denied-resolve-how/index.html'>Vagrant Private key - Ansible SSH Permission Denied - How to resolve.</a><p>While building VMs with Vagrant and trying to run ansible-playbook with them over SSH connection.&nbsp; We get exceptions like Failed to connect to the host via ssh: Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password The execution and the error would like something similar to the below. This post presumes that you are using the&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='how-to-ignore-ssh-host-key-verification/index.html'>How to Ignore SSH Host Key Verification</a><p>While running a script to login to multiple remote servers using sshpass (or) keybased authentication (or) while logging to remote server using ssh (or) while copying the file using SCP. There are chances we might have encountered this "Host Key Verification failed" message. All the time we cannot do manual&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='create-ssh-public-key-private-key/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../wp-content/uploads/2018/07/Screen-Shot-2018-07-02-at-3.02.08-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../wp-content/uploads/2018/07/Screen-Shot-2018-07-02-at-3.02.08-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='create-ssh-public-key-private-key/index.html'>How to create ssh public key from private key - Vagrant & Linux</a><p>How to create SSH public Key from SSH private key is a question made me write this post. Though we would be able to achieve the SSH key-based authentication by producing the private key. Sometimes it is necessary that we must have the SSH public key. Especially when we are&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='ansible-get-ip-address/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='ansible-get-ip-address/index.html'>Ansible get ip address of current host or target</a><p>How to get the IP address of the current or remote host in Ansible. That's the question, this article is going to address. While running a Playbook you might have had a requirement where you need to get the IP address of the connected and current remote host.&nbsp; There are&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<div class="entry-tags clearfix">
<span class="meta-tags">
<a href="tag/ansible-authorized_key-module-example/index.html" rel="tag">Ansible authorized_key module example</a><a href="tag/ansible-examples/index.html" rel="tag">ansible examples</a><a href="tag/ansible-ssh-key-based-authentication-between-servers/index.html" rel="tag">ansible SSH key based authentication between servers</a><a href="tag/ssh-key-based-authentication/index.html" rel="tag">SSH Key based authentication</a> </span>
</div>
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="log-rotation-purging-archiving-application-server-logs-script/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>Log Rotation, Purging, Archiving of Application Server Logs &#8211; Script</a></div><div class="nav-next"><a href="ansible-facts-list-how-to-use-ansible-facts/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>Ansible Facts and How to use them &#8211; Ansible Variable list</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>


<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 75%; height: auto;" data-src="../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 75%; height: auto;" srcset="../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">
Powered by <a href="../index.html" title="MiddlewareInventory">MiddlewareInventory</a> and <a href="https://www.gritfy.com/" title="Gritfy">gritfy</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-1735 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Ansible+SSH+Key+transfer+from+one+host+to+another+%E2%80%93+local+and+remote&url=https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Ansible+SSH+Key+transfer+from+one+host+to+another+%E2%80%93+local+and+remote&body=https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"1735 http:\/\/www.middlewareinventory.com\/?p=1735","disqusShortname":"mwinventory","disqusTitle":"Ansible SSH Key transfer from one host to another \u2013 local and remote","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/ansible-ssh-key-exchange\/","postId":"1735"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"2019084a26"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"b4d440853b","post_id":"1735"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"0b980bed5f","ip":"109.90.211.81","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type="text/javascript">
		document.addEventListener("DOMContentLoaded", function() {
			var if_ssb_exist = document.getElementsByClassName( "simplesocialbuttons" ).length > 0;
			if (if_ssb_exist) {
				var ssb_admin_ajax = 'https://www.middlewareinventory.com/wp-admin/admin-ajax.php';
				var ssb_post_id = 1735 ;
				var ssb_post_url = 'https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/';
				var ssb_alternate_post_url = 'https://airdata.gitlab.io/blog/blog/ansible-ssh-key-exchange/';
				jQuery( document ).ready(function(){
				var is_ssb_used = jQuery('.simplesocialbuttons');
				if( is_ssb_used ) {

					var data = {
					'action': 'ssb_fetch_data',
					'postID': ssb_post_id
				};
					jQuery.post(ssb_admin_ajax, data, function(data, textStatus, xhr) {
						var array = JSON.parse(data);
						jQuery.each( array, function( index, value ){

							if( index == 'total' ){
								jQuery('.ssb_'+ index +'_counter').html(value + '<span>Shares</span>');
							}else{
								jQuery('.ssb_'+ index +'_counter').html(value);
							}
						});

					});
				}
				})

			//ssbPlugin.fetchFacebookShares();
			}
		});

		</script><script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 0;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657191068;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="#" id="cn-refuse-cookie" data-cookie-set="refuse" class="cn-set-cookie cn-button bootstrap button">No</a><a href="../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
<div class="cookie-notice-revoke-container"><a href="#" class="cn-revoke-cookie cn-button bootstrap button">Revoke cookies</a></div>
</div>
</body>
</html>

<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Terraform remote state datasource Example - GCP | Devops Junction</title>
<meta name="description" content="Terraform remote state datasource example. Cloning Terraform infrastructure with terraform_remote_state datasource. How to copy Terraform state and create a new infrastructure using remote state." />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Terraform remote state datasource Example - GCP | Devops Junction" />
<meta property="og:description" content="Terraform remote state datasource example. Cloning Terraform infrastructure with terraform_remote_state datasource. How to copy Terraform state and create a new infrastructure using remote state." />
<meta property="og:url" content="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="https://www.facebook.com/rumenlishkov" />
<meta property="article:published_time" content="2022-01-11T20:02:39+00:00" />
<meta property="article:modified_time" content="2022-01-13T03:43:14+00:00" />
<meta property="og:image" content="../../wp-content/uploads/2022/01/tf-remote-state.jpg" />
<meta property="og:image:width" content="1748" />
<meta property="og:image:height" content="1240" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["https://www.facebook.com/rumenlishkov","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://airdata.gitlab.io/blog/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#primaryimage","inLanguage":"en-US","url":"../../wp-content/uploads/2022/01/tf-remote-state.jpg","width":1748,"height":1240,"caption":"Terraform_remote_state datasource"},{"@type":"WebPage","@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#webpage","url":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/","name":"Terraform remote state datasource Example - GCP | Devops Junction","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#primaryimage"},"datePublished":"2022-01-11T20:02:39+00:00","dateModified":"2022-01-13T03:43:14+00:00","description":"Terraform remote state datasource example. Cloning Terraform infrastructure with terraform_remote_state datasource. How to copy Terraform state and create a new infrastructure using remote state.","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/"]}]},{"@type":"Article","@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#article","isPartOf":{"@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/a3628fb28665348f6aab4f472ebf7837"},"headline":"Terraform remote state datasource Example &#8211; GCP | Devops Junction","datePublished":"2022-01-11T20:02:39+00:00","dateModified":"2022-01-13T03:43:14+00:00","mainEntityOfPage":{"@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#primaryimage"},"articleSection":"Terraform","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/a3628fb28665348f6aab4f472ebf7837","name":"Tapan Hegde","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/cc6f526212cdbf66b6a32db548fa54b8?s=96&d=mm&r=g","caption":"Tapan Hegde"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Terraform remote state datasource Example &#8211; GCP | Devops Junction Comments Feed" href="feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-6674956-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-6674956-8');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />

<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"9fe2b70daf"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://airdata.gitlab.io/blog/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/7900.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-terraform-remote-state-datasource-example-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-terraform-remote-state-datasource-example-&amp;format=xml.xml" />
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Terraform remote state datasource Example &#8211; GCP | Devops Junction - Middleware Inventory" />
<meta property="og:description" content="In this article, we are going to see what is terraform data source is and how it helps in Infrastructure as code

Before we begin, I want you to think of this requirement.
" Let's say you have to create two similar infrastructure modules in two different regions of any of your favourite cloud environments. The first infra module is already created by" />
<meta property="og:url" content="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="../../wp-content/uploads/2022/01/tf-remote-state.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="In this article, we are going to see what is terraform data source is and how it helps in Infrastructure as code

Before we begin, I want you to think of this requirement.
" Let's say you have to create two similar infrastructure modules in two different regions of any of your favourite cloud environments. The first infra module is already created by" />
<meta name="twitter:title" content="Terraform remote state datasource Example &#8211; GCP | Devops Junction - Middleware Inventory" />
<meta property="twitter:image" content="../../wp-content/uploads/2022/01/tf-remote-state.jpg" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://airdata.gitlab.io/blog/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">article h3
{
    background-color: whitesmoke;
    color: black;
    padding-left: 1%;
    border-left: 10px solid black;
    font-weight: 400;
    font-size: 22px;
}
#precode
{
  background-color: transparent !important;
  color: #00193a !important;
  font-size: 16px;
}
.post-img
{
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  border: 1px solid lightgray;
}
article h2
{
    background-color: #29558c;
    color: white;
    padding-left: 1%;
    border-left: 15px solid crimson;
    font-weight: 400;
    font-size: 22px;
}
pre
{
  display: block; 
  overflow-x: auto; 
  padding-left: 2em;
  padding-top: 3em;
  padding-bottom: 3em;
  background: #eaeef3 none repeat scroll 0% 0%; 
  color: #00193a;
}
li {
    padding: 2px;
    margin-left: 2%;
}
code
{
  color: black;
}
blockquote {
    padding: 2%;
    background-color: none !important;
}
div.enlighter{
  font-size: 1.2em;  
}
.enlighter-default {
    font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-7900 single-format-standard wp-custom-logo cookies-set cookies-accepted elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="160" height="120" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="160" height="120" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>

<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-7900" class="post-7900 post type-post status-publish format-standard has-post-thumbnail hentry category-terraform wpautop">
<header class="entry-header">
<h1 class="entry-title">Terraform remote state datasource Example &#8211; GCP | Devops Junction</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="1:32 am" rel="bookmark"><time class="entry-date published updated" datetime="January 13, 2022">January 13, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/tapanh/index.html" title="View all posts by Tapan Hegde" rel="author">Tapan Hegde</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Terraform%20remote%20state%20datasource%20Example%20%E2%80%93%20GCP%20%7C%20Devops%20Junction&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-remote-state-datasource-example%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="7900" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Terraform+remote+state+datasource+Example+%E2%80%93+GCP+%7C+Devops+Junction&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-remote-state-datasource-example%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="7900" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Terraform%20remote%20state%20datasource%20Example%20%E2%80%93%20GCP%20%7C%20Devops%20Junction&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-remote-state-datasource-example%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="7900" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fterraform-remote-state-datasource-example%2F&subject=Terraform%20remote%20state%20datasource%20Example%20%E2%80%93%20GCP%20%7C%20Devops%20Junction" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="7900" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="7900" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p>In this article, we are going to see what is terraform data source is and how it helps in Infrastructure as code</p>
<p>Before we begin, I want you to think of this requirement.</p>
<blockquote><p>&#8220;Let&#8217;s say you have to create two similar infrastructure modules in two different regions of any of your favourite cloud environments. The first infra module is already created by the X team and you need to have the same configuration in your module.&#8221;</p></blockquote>
<p>First Approach to this requirement is to go to that X team and ask for source files.</p>
<p>Let&#8217;s assume they are very protective about their source files and they say we cannot give you a whole set of files, but we can help you with our workspace name and outputs.</p>
<p>Now with this very minimal data how I can assure that my infra will be similar to the X team.?</p>
<p>that&#8217;s where  <code>terraform datasource</code> comes into the picture.</p>
<p><a href="../../wp-content/uploads/2022/01/tf-remote-state.jpg"><img class="post-img alignleft wp-image-7940 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1748x1240.png" alt="Terraform_remote_state datasource" width="1748" height="1240" data-src="../../wp-content/uploads/2022/01/tf-remote-state.jpg" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/tf-remote-state.jpg 1748w, ../../wp-content/uploads/2022/01/tf-remote-state-300x213.jpg 300w, ../../wp-content/uploads/2022/01/tf-remote-state-1024x726.jpg 1024w, ../../wp-content/uploads/2022/01/tf-remote-state-768x545.jpg 768w, ../../wp-content/uploads/2022/01/tf-remote-state-1536x1090.jpg 1536w, ../../wp-content/uploads/2022/01/tf-remote-state-90x65.jpg 90w" data-sizes="auto" /><noscript><img class="post-img alignleft wp-image-7940 size-full" src="../../wp-content/uploads/2022/01/tf-remote-state.jpg" alt="Terraform_remote_state datasource" width="1748" height="1240" srcset="../../wp-content/uploads/2022/01/tf-remote-state.jpg 1748w, ../../wp-content/uploads/2022/01/tf-remote-state-300x213.jpg 300w, ../../wp-content/uploads/2022/01/tf-remote-state-1024x726.jpg 1024w, ../../wp-content/uploads/2022/01/tf-remote-state-768x545.jpg 768w, ../../wp-content/uploads/2022/01/tf-remote-state-1536x1090.jpg 1536w, ../../wp-content/uploads/2022/01/tf-remote-state-90x65.jpg 90w" sizes="(max-width: 1748px) 100vw, 1748px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#Terraform_DataSource" title="Terraform DataSource">Terraform DataSource</a></li><li><a href="#Prerequisites" title="Prerequisites">Prerequisites</a></li><li><a href="#Creating_The_First_Environment_with_Terraform" title="Creating The First Environment with Terraform">Creating The First Environment with Terraform</a><ul><li><a href="#Creating_necessary_Files_and_Terraform_workspace" title="Creating necessary Files and Terraform workspace">Creating necessary Files and Terraform workspace</a></li><li><a href="#Creating_Template_with_Shell_script_to_provision_our_machine" title="Creating Template with Shell script to provision our machine">Creating Template with Shell script to provision our machine</a></li><li><a href="#Defining_Variables_Needed" title="Defining Variables Needed">Defining Variables Needed</a></li><li><a href="#Defining_Providers" title="Defining Providers">Defining Providers</a></li><li><a href="#Defining_Networks" title="Defining Networks">Defining Networks</a></li><li><a href="#The_main_Terraform_Manifest_configuration_file" title="The main Terraform Manifest configuration file">The main Terraform Manifest configuration file</a></li><li><a href="#Decoding_the_blocks_in_maintf" title="Decoding the blocks in main.tf">Decoding the blocks in main.tf</a></li><li><a href="#Defining_the_Outputs" title="Defining the Outputs">Defining the Outputs</a></li><li><a href="#Validating_the_Output_and_Accessing_the_Application" title="Validating the Output and Accessing the Application">Validating the Output and Accessing the Application</a></li></ul></li><li><a href="#Cloning_the_Infra_with_Terraform-remote-state_data_source" title="Cloning the Infra with Terraform-remote-state data source">Cloning the Infra with Terraform-remote-state data source</a></li></ul></nav></div>
<h2><span class="ez-toc-section" id="Terraform_DataSource">Terraform DataSource</span></h2>
<p>Data sources enable Terraform to use the information determined outside of Terraform, represented by different separate Terraform states or code, or changed by functions.</p>
<p>In other words, Cloud infrastructure, applications, and services transmit data, which Terraform can query and perform managing data sources.</p>
<p>For example, terraform manages data sources to retrieve information from cloud provider APIs, such as availability zone IDs or data about the piece of your infrastructure through the outputs of different Terraform states.</p>
<p>In this article, I am going to discuss how we can transfer data from one workspace to another workspace using terraform remote state data sources.</p>
<p>&nbsp;</p>
<div class="ez-toc-title-container">
<h2 class="g-type-display-3"><span class="ez-toc-section" id="Prerequisites">Prerequisites</span></h2>
<ul>
<li class="g-type-long-body">
<p class="g-type-long-body"><strong>A Google Cloud Platform account.</strong> If you do not have a GCP account, <a href="https://console.cloud.google.com/freetrial/">create one now</a>. This tutorial can be completed using only the services included in the GCP <a href="https://cloud.google.com/free/">free tier</a>.</p>
</li>
<li class="g-type-long-body">
<p class="g-type-long-body"><a href="https://learn.hashicorp.com/tutorials/terraform/install-cli">Terraform 0.15.3+</a> installed locally.</p>
</li>
</ul>
<p>Next, we need to set up a GCP</p>
<p class="g-type-long-body">After creating a GCP account, create the following resources to enable Terraform to provision infrastructure:</p>
<ul>
<li class="g-type-long-body">
<p class="g-type-long-body"><strong>A GCP Project</strong>: GCP organizes resources into projects. <a href="https://console.cloud.google.com/projectcreate">Create one now</a> in the GCP console and make note of the project ID. You can see a list of your projects in the <a href="https://console.cloud.google.com/cloud-resource-manager">cloud resource manager</a>. In my case, I have created a project called <code>terraform-project-337116</code><a href="../../wp-content/uploads/2022/01/gcp-projects.png"><img class="post-img aligncenter wp-image-7903 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1372x682.png" alt="" width="1372" height="682" data-src="../../wp-content/uploads/2022/01/gcp-projects.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/gcp-projects.png 1372w, ../../wp-content/uploads/2022/01/gcp-projects-300x149.png 300w, ../../wp-content/uploads/2022/01/gcp-projects-1024x509.png 1024w, ../../wp-content/uploads/2022/01/gcp-projects-768x382.png 768w" data-sizes="auto" /><noscript><img class="post-img aligncenter wp-image-7903 size-full" src="../../wp-content/uploads/2022/01/gcp-projects.png" alt="" width="1372" height="682" srcset="../../wp-content/uploads/2022/01/gcp-projects.png 1372w, ../../wp-content/uploads/2022/01/gcp-projects-300x149.png 300w, ../../wp-content/uploads/2022/01/gcp-projects-1024x509.png 1024w, ../../wp-content/uploads/2022/01/gcp-projects-768x382.png 768w" sizes="(max-width: 1372px) 100vw, 1372px" data-eio="l" /></noscript></a></p>
</li>
<li class="g-type-long-body">
<p class="g-type-long-body"><strong>Google Compute Engine</strong>: Enable Google Compute Engine for your project <a href="https://console.developers.google.com/apis/library/compute.googleapis.com">in the GCP console</a>. Make sure to select the project you are using to follow this tutorial and click the &#8220;Enable&#8221; button.<a href="../../wp-content/uploads/2022/01/gcp-enable-api.png"><img class="post-img aligncenter wp-image-7904 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1750x810.png" alt="" width="1750" height="810" data-src="../../wp-content/uploads/2022/01/gcp-enable-api.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/gcp-enable-api.png 1750w, ../../wp-content/uploads/2022/01/gcp-enable-api-300x139.png 300w, ../../wp-content/uploads/2022/01/gcp-enable-api-1024x474.png 1024w, ../../wp-content/uploads/2022/01/gcp-enable-api-768x355.png 768w, ../../wp-content/uploads/2022/01/gcp-enable-api-1536x711.png 1536w" data-sizes="auto" /><noscript><img class="post-img aligncenter wp-image-7904 size-full" src="../../wp-content/uploads/2022/01/gcp-enable-api.png" alt="" width="1750" height="810" srcset="../../wp-content/uploads/2022/01/gcp-enable-api.png 1750w, ../../wp-content/uploads/2022/01/gcp-enable-api-300x139.png 300w, ../../wp-content/uploads/2022/01/gcp-enable-api-1024x474.png 1024w, ../../wp-content/uploads/2022/01/gcp-enable-api-768x355.png 768w, ../../wp-content/uploads/2022/01/gcp-enable-api-1536x711.png 1536w" sizes="(max-width: 1750px) 100vw, 1750px" data-eio="l" /></noscript></a></p>
</li>
<li class="g-type-long-body">
<p class="g-type-long-body"><strong>A GCP service account key</strong>: <a href="https://console.cloud.google.com/apis/credentials/serviceaccountkey">Create a service account key</a> to enable Terraform to access your GCP account. When creating the key, use the following settings:</p>
<ul>
<li class="g-type-long-body">Select the project you created in the previous step.</li>
<li class="g-type-long-body">Click &#8220;Create Service Account&#8221;.</li>
<li class="g-type-long-body">Give it any name you like and click &#8220;Create&#8221;.</li>
<li class="g-type-long-body">For the Role, choose &#8220;Project -&gt; Editor&#8221;, then click &#8220;Continue&#8221;.</li>
<li class="g-type-long-body">Skip granting additional users access, and click &#8220;Done&#8221;.</li>
</ul>
<p class="g-type-long-body">After you create your service account, download your service account key.</p>
<ul>
<li class="g-type-long-body">Select your service account from the list.</li>
<li class="g-type-long-body">Select the &#8220;Keys&#8221; tab.</li>
<li class="g-type-long-body">In the drop-down menu, select &#8220;Create new key&#8221;.</li>
<li class="g-type-long-body">Leave the &#8220;Key Type&#8221; as JSON.</li>
<li class="g-type-long-body">Click &#8220;Create&#8221; to create the key and save the key file to your system.</li>
</ul>
</li>
</ul>
<p>Now your GCP is completely set up to integrate with terraform</p>
</div>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Creating_The_First_Environment_with_Terraform">Creating The First Environment with Terraform</span></h2>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Creating_necessary_Files_and_Terraform_workspace">Creating necessary Files and Terraform workspace</span></h3>
<div class="ez-toc-title-container">
<p>Create a directory with some valid name (Eg: <code>gcp-terraform-datasource-intg</code>) and get into the same directory. Along with this create terraform workspace with the name &#8216;development&#8217; and create below mentioned .tf files in the same workspace</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">mkdir gcp-terraform-datasource-intg 
cd gcp-terraform-datasource-intg
terraform workspace new development
terraform workspace select development</pre>
<p>Next, create a couple of .tf files.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">touch main.tf 
touch variables.tf 
touch provider.tf 
touch network.tf 
touch outputs.tf</pre>
<p>Copy service account key json file into this directory (This file you need to download into your local)</p>
</div>
<h3></h3>
<h3><span class="ez-toc-section" id="Creating_Template_with_Shell_script_to_provision_our_machine">Creating Template with Shell script to provision our machine</span></h3>
<div class="ez-toc-title-container">
<p>Create a folder with the name &#8216;template&#8217; and create a .tpl file inside the template directory (eg: Here, I have created a file with the name <code>install_flask.tpl</code>)</p>
<p>This <code>install_flask.tpl</code> holds content for <code>metadata-script</code>, which will get executed when our GCP instance get spawned up via terraform scripts</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">cd gcp-terraform-datasource-intg 
mkdir template 
cd template 
touch install_flask.tpl</pre>
<p>&nbsp;</p>
<p>Copy below contents into .tpl file</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">#!/bin/bash
sudo apt-get update -y
sudo apt-get install -yq build-essential python-pip rsync
sudo apt-get install wget -y
pip install flask
sudo touch /tmp/app.py
sudo mkdir /tmp/templates
sudo chmod 777 /tmp/templates
sudo touch /tmp/templates/index.html
sudo cat &lt;&lt; "EOF" &gt; /tmp/templates/index.html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;style&gt;
body {
  font-size: 100px;
}
p {text-align: center;}
&lt;/style&gt;
&lt;body&gt;

&lt;span style='font-size:500px;text-align:center'&gt;🌩&lt;/span&gt;
&lt;p&gt;Welcome to the Cloud 😃&lt;/p&gt;

&lt;/body&gt;
&lt;/html&gt;
EOF
sudo chmod 777 /tmp/templates/index.html
sudo cat &lt;&lt; "EOF" &gt; /tmp/app.py
from flask import Flask, render_template
app = Flask(__name__)

@app.route('/')
def index():
   return render_template('index.html')

app.run(host='0.0.0.0')
EOF
sudo chmod 777 /tmp/app.py
sudo python /tmp/app.py</pre>
<p>&nbsp;</p>
<p>Basically, the above script will install/set up a python flask in the GCP instance and when we try to access it, it will give output as &#8216;Welcome to the cloud&#8217; with nice emojis.</p>
</div>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Defining_Variables_Needed">Defining Variables Needed</span></h3>
<div class="ez-toc-title-container">
<p>Now copy the below content into <code>variables.tf</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">variable "project" {
  default = "terraform-project-337116"
}


variable "region" {
  default = "us-central1"
}


variable "image_family" {
  default = "debian-9"
}

variable "image_project" {
  default = "debian-cloud"
}

variable "vpc_name" {
  default = "terraform-flask-vpcapp-network"
}

variable "zone" {
  default = "us-central1-c"
}

variable "machine_type" {
  default = "f1-micro"
}

variable "firewall_name" {
  default = "fwapp"
}
</pre>
<p>Give attention to <code>region</code>, here we are creating instances in the us-central1 region.</p>
<p>The rest of the fields are self-explanatory, we are assigning variables and we use these variables in the rest of the .tf files.</p>
<blockquote><p>Note &#8211; Update project variable with your project-id</p></blockquote>
</div>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Defining_Providers">Defining Providers</span></h3>
<div class="ez-toc-title-container">
<p>Next copy below content into <code>provider.tf</code> file</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">terraform {
  required_providers {
    google = {
      source  = "hashicorp/google"
      version = "3.5.0"
    }
  }
}

provider "google" {
  credentials = file("terraform-gcp.json")
  project     = var.project
  region      = var.region
}</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Defining_Networks">Defining Networks</span></h3>
<p>Next copy below contents into <code>network.tf</code> file</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">resource "google_compute_network" "vpc_network" {
  project                 = var.project
  name                    = var.vpc_name
  auto_create_subnetworks = true
}

resource "google_compute_firewall" "fw" {
  name    = var.firewall_name
  network = google_compute_network.vpc_network.name

  allow {
    protocol = "tcp"
    ports    = ["5000"]
  }
}</pre>
<p>Here we are creating virtual private cloud resources and assigning firewall rules in that VPC to allow 5000 port.</p>
</div>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="The_main_Terraform_Manifest_configuration_file">The main Terraform Manifest configuration file</span></h3>
<div class="ez-toc-title-container">
<p>Next copy below contents into <code>main.tf</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">data "google_compute_image" "flask_image" {
  family  = var.image_family
  project = var.image_project
}

data "template_file" "webapp" {
   template = file("${path.module}/template/install_flask.tpl")
 }


// Terraform plugin for creating random ids
resource "random_id" "instance_id" {
  byte_length = 8
}


// A single Compute Engine instance
resource "google_compute_instance" "vm_instance" {
  name         = "flask-vm-${random_id.instance_id.hex}"
  machine_type = var.machine_type
  zone         = var.zone

  boot_disk {
    initialize_params {
      image = data.google_compute_image.flask_image.self_link
    }
  }

metadata_startup_script = data.template_file.webapp.rendered


  network_interface {
    network = google_compute_network.vpc_network.name

    access_config {
      // Include this section to give the VM an external ip address
    }
  }
}
</pre>
<p>&nbsp;</p>
</div>
<h3><span class="ez-toc-section" id="Decoding_the_blocks_in_maintf">Decoding the blocks in main.tf</span></h3>
<div class="ez-toc-title-container">
<p>Let&#8217;s see the functionality of each block of main.tf file.</p>
<p>In this <code>data</code> block we are creating a local data source to get google_compute_image.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">data "google_compute_image" "flask_image" {
  family  = var.image_family
  project = var.image_project
}
</pre>
<p>Reference: <a href="https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_image">https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_image</a></p>
</div>
<p>&nbsp;</p>
<p>Here in this <code>data</code> block, we are creating <code>template_file</code> data source to read <code>install_flask.tpl</code> file from the relevant path.</p>
<p>In further steps, this data source is provided as input to the metadata script.</p>
<div class="ez-toc-title-container">
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">data "template_file" "webapp" {
   template = file("${path.module}/template/install_flask.tpl")
 }</pre>
<p>Reference: <a href="https://registry.terraform.io/providers/hashicorp/template/latest/docs/data-sources/file">https://registry.terraform.io/providers/hashicorp/template/latest/docs/data-sources/file</a></p>
</div>
<p>&nbsp;</p>
<p>The following <code>resource</code> block contains code to generate random IDs which gets appended to the instance name.</p>
<div class="ez-toc-title-container">
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">// Terraform plugin for creating random ids
resource "random_id" "instance_id" {
  byte_length = 8
}</pre>
</div>
<p>&nbsp;</p>
<p>In the following <code>resource</code> block, we are creating a single instance in <code>us-central1</code> the region with boot_disk attached to same.</p>
<div class="ez-toc-title-container">
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">// A single Compute Engine instance
resource "google_compute_instance" "vm_instance" {
  name         = "flask-vm-${random_id.instance_id.hex}"
  machine_type = var.machine_type
  zone         = var.zone

  boot_disk {
    initialize_params {
      image = data.google_compute_image.flask_image.self_link
    }
  }
</pre>
<p>&nbsp;</p>
<p>In the following line of code,</p>
<p>we pass the .tpl file we have created earlier <code>data.template_file.webapp.rendered</code> as input to the metadata script.</p>
<p>This metadata script will install/configure the python flask in the GCP instance.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">metadata_startup_script = data.template_file.webapp.rendered</pre>
</div>
<p>&nbsp;</p>
<p>Here we are configuring <code>network_interface</code> for vpc and using <code>access_config</code> block we are assigning VM an external ip address</p>
<div class="ez-toc-title-container">
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4">network_interface {
    network = google_compute_network.vpc_network.name

    access_config {
      // Include this section to give the VM an external ip address
    }</pre>
</div>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Defining_the_Outputs">Defining the Outputs</span></h3>
<div class="ez-toc-title-container">
<p>Next copy the following content into <code>outputs.tf</code></p>
<p>Here we are saving <code>ip-address</code> and script content (as sensitive content).</p>
<p>When we use, terraform will not print output results of the script in the console. this is a nice way to hide secret data during the execution</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">output "ip" {
  value = google_compute_instance.vm_instance.network_interface.0.access_config.0.nat_ip
}

output "script"{
  value = google_compute_instance.vm_instance.metadata_startup_script
  sensitive = true
}</pre>
<p>&nbsp;</p>
<p>Now as all Terraform manifest tf files are in place, we are ready to execute terraform commands.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">terraform init
terraform validate
terraform plan
terraform apply --auto-approve</pre>
<p>Here we are using <code>--auto-approve</code> with apply, which would take care of the usual prompt before making any change.</p>
</div>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Validating_the_Output_and_Accessing_the_Application">Validating the Output and Accessing the Application</span></h3>
<div class="ez-toc-title-container">
<p>Once terraform creates and configure infrastructure in a google cloud environment, you should see outputs in your console similar to below</p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-theme="bootstrap4">Changes to Outputs:
  + ip     = (known after apply)
  + script = (sensitive value)
random_id.instance_id: Creating...
random_id.instance_id: Creation complete after 0s [id=uM9XuDmrGRQ]
google_compute_network.vpc_network: Creating...
google_compute_network.vpc_network: Still creating... [10s elapsed]
google_compute_network.vpc_network: Still creating... [20s elapsed]
google_compute_network.vpc_network: Still creating... [30s elapsed]
google_compute_network.vpc_network: Creation complete after 39s [id=projects/terraform-project-337116/global/networks/terraform-flask-vpcapp-network]
google_compute_firewall.fw: Creating...
google_compute_instance.vm_instance: Creating...
google_compute_firewall.fw: Creation complete after 9s [id=projects/terraform-project-337116/global/firewalls/fwapp]
google_compute_instance.vm_instance: Still creating... [10s elapsed]
google_compute_instance.vm_instance: Creation complete after 19s [id=projects/terraform-project-337116/zones/us-central1-c/instances/flask-vm-b8cf57b839ab1914]

Apply complete! Resources: 4 added, 0 changed, 0 destroyed.

Outputs:

ip = "34.122.168.105"
script = &lt;sensitive&gt;</pre>
<p>&nbsp;</p>
<p>Now try to access the above external IP address with port 5000 (Eg: http://34.122.168.105:5000)</p>
<p>You should see the &#8220;Welcome to the cloud&#8221; message with some emojis as shown below</p>
<p><a href="../../wp-content/uploads/2022/01/gcp-welcome-tocloud.png"><img class="post-img aligncenter wp-image-7905 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1095.png" alt="" width="3218" height="1836" data-src="../../wp-content/uploads/2022/01/gcp-welcome-tocloud.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/gcp-welcome-tocloud.png 3218w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-300x171.png 300w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-1024x584.png 1024w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-768x438.png 768w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-1536x876.png 1536w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-2048x1168.png 2048w" data-sizes="auto" /><noscript><img class="post-img aligncenter wp-image-7905 size-full" src="../../wp-content/uploads/2022/01/gcp-welcome-tocloud.png" alt="" width="3218" height="1836" srcset="../../wp-content/uploads/2022/01/gcp-welcome-tocloud.png 3218w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-300x171.png 300w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-1024x584.png 1024w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-768x438.png 768w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-1536x876.png 1536w, ../../wp-content/uploads/2022/01/gcp-welcome-tocloud-2048x1168.png 2048w" sizes="(max-width: 3218px) 100vw, 3218px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<p>Meanwhile, you can see your created instance from the GCP console. Pay attention to the region, where instance got created in &#8216;us-central1&#8217;  <a href="../../wp-content/uploads/2022/01/gcp-us-central-instance.png"><img class="post-img aligncenter wp-image-7906 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x616.png" alt="" width="2512" height="806" data-src="../../wp-content/uploads/2022/01/gcp-us-central-instance.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/gcp-us-central-instance.png 2512w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-300x96.png 300w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-1024x329.png 1024w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-768x246.png 768w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-1536x493.png 1536w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-2048x657.png 2048w" data-sizes="auto" /><noscript><img class="post-img aligncenter wp-image-7906 size-full" src="../../wp-content/uploads/2022/01/gcp-us-central-instance.png" alt="" width="2512" height="806" srcset="../../wp-content/uploads/2022/01/gcp-us-central-instance.png 2512w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-300x96.png 300w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-1024x329.png 1024w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-768x246.png 768w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-1536x493.png 1536w, ../../wp-content/uploads/2022/01/gcp-us-central-instance-2048x657.png 2048w" sizes="(max-width: 2512px) 100vw, 2512px" data-eio="l" /></noscript></a></p>
</div>
<p>&nbsp;</p>
<p>So far we have seen the instructions to set up our original/actual infrastructure.  Let&#8217;s call it <strong>X</strong> with reference to our requirement we saw earlier.</p>
<p>Now we need to see how to Clone this infrastructure as a new one let&#8217;s call it <strong>Y</strong> using Terraform remote state data source.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Cloning_the_Infra_with_Terraform-remote-state_data_source">Cloning the Infra with Terraform-remote-state data source</span></h2>
<div class="ez-toc-title-container">
<p>Next, we shall create instances with the same configuration in <code>us-west1</code> region using <code>terraform-remote-state</code> data source.</p>
<p>Now create one more terraform workspace with the name &#8216;test&#8217; under the same directory or create a new directory and copy the following tf files</p>
<ul>
<li>main.tf</li>
<li>variables.tf</li>
</ul>
<p>If you are using the same files, just create a workspace</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">terraform workspace create test
terraform workspace select test</pre>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>Now Change <code>region</code> from <code>us-central1</code> to <code>us-west1</code> in <code>variables.tf</code> file.</p>
<p>Along with this update, change the name for <code>vpc</code> and <code>firewall</code>, just to differentiate one from development workspace resources</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">variable "project" {
  default = "terraform-project-337116"
}


variable "region" {
  default = "us-west1"
}


variable "image_family" {
  default = "debian-9"
}

variable "image_project" {
  default = "debian-cloud"
}

variable "vpc_name" {
  default = "terraform-flask-westnetwork"
}

variable "zone" {
  default = "us-west1-b"
}

variable "machine_type" {
  default = "f1-micro"
}

variable "firewall_name" {
  default = "fwwest"
}
</pre>
<p>&nbsp;</p>
<p>Now add <code>terraform_remote_state</code> Datasource block in <code>main.tf</code> file as below</p>
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">data "terraform_remote_state" "developmentwsdata" {
  backend = "local"

  config = {
    path = "${path.module}/terraform.tfstate.d/development/terraform.tfstate"
  }
}</pre>
<p>&nbsp;</p>
<p>Here path should be the relevant path where your <code>terraform.tfstate</code> file is stored. In general, when we create terraform workspace</p>
<p>terraform will create a directory with a name <code>terraform.tfstate.d</code> and we can list all created workspace inside this directory. So, in general, your path should be</p>
<pre>path  = "&lt;path to folder where .tf files are located&gt;/terraform.tfstate.d/&lt;your source workspace&gt;/terraform.tfstate"</pre>
</div>
<p>&nbsp;</p>
<p>If you are getting the <code>tfstate</code> file from somewhere/someone else just place it in a directory and refer to the fully qualified path.</p>
<p>Next update metadata_script line in <code>main.tf</code> as below</p>
<p>Here we are reading a script from the previous state (development) as an output variable and providing the same as the input to the target workspace (test), so that the same configuration is reflected in a newly created instance.</p>
<div class="ez-toc-title-container">
<pre class="EnlighterJSRAW" data-enlighter-language="json" data-enlighter-theme="bootstrap4">metadata_startup_script = data.terraform_remote_state.developmentwsdata.outputs.script</pre>
<p>&nbsp;</p>
<p>If everything goes fine, you should see an output log similar to below</p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-theme="bootstrap4">Changes to Outputs:
  + ip = (known after apply)
random_id.instance_id: Creating...
random_id.instance_id: Creation complete after 0s [id=yMvh2E-5IWQ]
google_compute_network.vpc_network: Creating...
google_compute_network.vpc_network: Still creating... [10s elapsed]
google_compute_network.vpc_network: Still creating... [20s elapsed]
google_compute_network.vpc_network: Still creating... [30s elapsed]
google_compute_network.vpc_network: Creation complete after 39s [id=projects/terraform-project-337116/global/networks/terraform-flask-westnetwork]
google_compute_firewall.fw: Creating...
google_compute_instance.vm_instance: Creating...
google_compute_firewall.fw: Creation complete after 8s [id=projects/terraform-project-337116/global/firewalls/fwwest]
google_compute_instance.vm_instance: Still creating... [10s elapsed]
google_compute_instance.vm_instance: Creation complete after 17s [id=projects/terraform-project-337116/zones/us-west1-b/instances/flask-vm-c8cbe1d84fb92164]

Apply complete! Resources: 4 added, 0 changed, 0 destroyed.

Outputs:

ip = "34.82.35.198"</pre>
<p>Now again try to access an external IP address with 5000 port (eg: http://34.82.35.198:5000)</p>
<p>You should see the `Welcome to the cloud Message`</p>
</div>
<div class="ez-toc-title-container">
<p>You can validate from the GCP console that two separate instances are created in two regions us-central1 and us-west1 respectively.</p>
<p><a href="../../wp-content/uploads/2022/01/gcp-us-west-instance.png"><img class="aligncenter wp-image-7907 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x711.png" alt="" width="2534" height="938" data-src="../../wp-content/uploads/2022/01/gcp-us-west-instance.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/01/gcp-us-west-instance.png 2534w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-300x111.png 300w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-1024x379.png 1024w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-768x284.png 768w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-1536x569.png 1536w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-2048x758.png 2048w" data-sizes="auto" /><noscript><img class="aligncenter wp-image-7907 size-full" src="../../wp-content/uploads/2022/01/gcp-us-west-instance.png" alt="" width="2534" height="938" srcset="../../wp-content/uploads/2022/01/gcp-us-west-instance.png 2534w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-300x111.png 300w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-1024x379.png 1024w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-768x284.png 768w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-1536x569.png 1536w, ../../wp-content/uploads/2022/01/gcp-us-west-instance-2048x758.png 2048w" sizes="(max-width: 2534px) 100vw, 2534px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<p>Finally, don&#8217;t forget to clean up your infrastructure using terraform destroy command.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4">terraform destroy --auto-approve</pre>
<p>&nbsp;</p>
<p>This proves we have successfully configured two separate instances with similar configurations in two separate regions using terraform remote state data sources.</p>
<p>Complete source code is available here <a href="https://github.com/sheldon-cooper26/gcp-terraform-datasource-application">https://github.com/sheldon-cooper26/gcp-terraform-datasource-application</a></p>
<p>Hope you liked this post. Thanks for reading!!</p>
<p>Thanks and Regards,</p>
<p>Tapan Hegde</p>
</div>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='../store-terraform-state-terraform-cloud/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Terraform remote state cloud" data-src="../../wp-content/uploads/2021/12/terraform-remote-state-150x150.jpg" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2021/12/terraform-remote-state-150x150.jpg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Terraform remote state cloud" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../store-terraform-state-terraform-cloud/index.html'>Store terraform state file on Terraform cloud Remote | Devops Junction</a><p>In this article, I am going to discuss how we can keep safe our terraform state file using terraform cloud. As a pioneer/Practioner of Terraform CLI, we hold responsible for Terraform state file which is the source of truth for our infrastructure. What if we lose this state file or&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../kubernetes-ingress-example/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2020/02/ting-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/02/ting-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../kubernetes-ingress-example/index.html'>Kubernetes Ingress Example on Google Cloud</a><p>Kubernetes Ingress We understand that as per traditional infrastructure setup, in order to load balance the client requests you are required to configure instances for each application you want to balance the load, which makes your configuration lengthy, and when moving this architecture to open source technologies it will be&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../create-linux-vm-in-gcp-with-terraform-remote-exec/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="gcp vm terraform" data-src="../../wp-content/uploads/2021/02/gcp-image-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2021/02/gcp-image-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="gcp vm terraform" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../create-linux-vm-in-gcp-with-terraform-remote-exec/index.html'>Terraform google_compute_instance Example - with Remote Exec</a><p>In this article, we are going to see how to create a Linux Virtual machine and provision it using the Terraform remote execution strategy. We are going to be using SSH method to connect to the Virtual machine and provision it on the go by executing some startup Shell script.&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../terraform-aws-example-ec2/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2020/01/TerraformAWS-1-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/01/TerraformAWS-1-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../terraform-aws-example-ec2/index.html'>Terraform AWS Example - Create EC2 instance with Terraform</a><p>Terraform, An outstanding and innovative product from hashicorp and it is a leader in Infrastructure as Code tools Segment.&nbsp; Before I go any further, I think I should set the context. In this article, we are going to learn how to use Terraform to create AWS EC2 instance and create&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../terraform-import-securitygroup-aws/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Terraform Import" data-src="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/09/Screenshot-2020-09-06-at-2.39.15-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Terraform Import" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../terraform-import-securitygroup-aws/index.html'>Terraform import All AWS Security Groups - How to</a><p>In this post, we are going to see how to manage existing and already created AWS Security groups with Terraform. The new era of Infrastructure revolution has begun already and we already started provisioning, managing, administrating our Infra as a code with help of Configuration management tools like Ansible, Terraform,&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../spring-boot-kubernetes-jenkins/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>SpringBoot Kubernetes Example &#8211; Jenkins &#038; IBM Cloud | Devops Junction</a></div><div class="nav-next"><a href="../ansible-copy-examples/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>Ansible Copy Examples &#8211; How to copy files and directories with Ansible</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>


<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 75%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 75%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-7900 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Terraform+remote+state+datasource+Example+%E2%80%93+GCP+%7C+Devops+Junction&url=https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Terraform+remote+state+datasource+Example+%E2%80%93+GCP+%7C+Devops+Junction&body=https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"7900 https:\/\/www.middlewareinventory.com\/?p=7900","disqusShortname":"mwinventory","disqusTitle":"Terraform remote state datasource Example \u2013 GCP | Devops Junction","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/terraform-remote-state-datasource-example\/","postId":"7900"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"c3faebb42a"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"ad1aa689b7","post_id":"7900"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"f0b2747bdc","ip":"2001:861:e3d1:a9c0::2791:d193","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type="text/javascript">
		document.addEventListener("DOMContentLoaded", function() {
			var if_ssb_exist = document.getElementsByClassName( "simplesocialbuttons" ).length > 0;
			if (if_ssb_exist) {
				var ssb_admin_ajax = 'https://www.middlewareinventory.com/wp-admin/admin-ajax.php';
				var ssb_post_id = 7900 ;
				var ssb_post_url = 'https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/';
				var ssb_alternate_post_url = 'https://airdata.gitlab.io/blog/blog/terraform-remote-state-datasource-example/';
				jQuery( document ).ready(function(){
				var is_ssb_used = jQuery('.simplesocialbuttons');
				if( is_ssb_used ) {

					var data = {
					'action': 'ssb_fetch_data',
					'postID': ssb_post_id
				};
					jQuery.post(ssb_admin_ajax, data, function(data, textStatus, xhr) {
						var array = JSON.parse(data);
						jQuery.each( array, function( index, value ){

							if( index == 'total' ){
								jQuery('.ssb_'+ index +'_counter').html(value + '<span>Shares</span>');
							}else{
								jQuery('.ssb_'+ index +'_counter').html(value);
							}
						});

					});
				}
				})

			//ssbPlugin.fetchFacebookShares();
			}
		});

		</script><script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 1;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657199828;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="#" id="cn-refuse-cookie" data-cookie-set="refuse" class="cn-set-cookie cn-button bootstrap button">No</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
<div class="cookie-notice-revoke-container"><a href="#" class="cn-revoke-cookie cn-button bootstrap button">Revoke cookies</a></div>
</div>
</body>
</html>

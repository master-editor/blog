<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>Ansible Async Poll Examples - Ansible nohup, task in background</title>
<meta name="description" content="Ansible Async and poll. How to run Ansible tasks in the background asynchronously and poll for its status. ansible nohup. how to use async poll in Ansible playbooks and get the ansible job status with async_status module with example playbooks. How to run a long-running script in background ansible and wait for it to complete." />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Ansible Async Poll Examples - Ansible nohup, task in background" />
<meta property="og:description" content="Ansible Async and poll. How to run Ansible tasks in the background asynchronously and poll for its status. ansible nohup. how to use async poll in Ansible playbooks and get the ansible job status with async_status module with example playbooks. How to run a long-running script in background ansible and wait for it to complete." />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ansible-async/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="http://www.facebook.com/devopsjunc" />
<meta property="article:published_time" content="2019-11-30T17:00:12+00:00" />
<meta property="article:modified_time" content="2022-06-21T19:18:10+00:00" />
<meta property="og:image" content="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png" />
<meta property="og:image:width" content="1419" />
<meta property="og:image:height" content="755" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["http://www.facebook.com/devopsjunc","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/blog/ansible-async/#primaryimage","inLanguage":"en-US","url":"../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png","width":1419,"height":755},{"@type":"WebPage","@id":"https://www.middlewareinventory.com/blog/ansible-async/#webpage","url":"https://www.middlewareinventory.com/blog/ansible-async/","name":"Ansible Async Poll Examples - Ansible nohup, task in background","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://www.middlewareinventory.com/blog/ansible-async/#primaryimage"},"datePublished":"2019-11-30T17:00:12+00:00","dateModified":"2022-06-21T19:18:10+00:00","description":"Ansible Async and poll. How to run Ansible tasks in the background asynchronously and poll for its status. ansible nohup. how to use async poll in Ansible playbooks and get the ansible job status with async_status module with example playbooks. How to run a long-running script in background ansible and wait for it to complete.","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.middlewareinventory.com/blog/ansible-async/"]}]},{"@type":"Article","@id":"https://www.middlewareinventory.com/blog/ansible-async/#article","isPartOf":{"@id":"https://www.middlewareinventory.com/blog/ansible-async/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"Ansible Async Poll Examples &#8211; Ansible nohup, task in background","datePublished":"2019-11-30T17:00:12+00:00","dateModified":"2022-06-21T19:18:10+00:00","mainEntityOfPage":{"@id":"https://www.middlewareinventory.com/blog/ansible-async/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://www.middlewareinventory.com/blog/ansible-async/#primaryimage"},"keywords":"Ansible Async,ansible async and poll,ansible background script,Run Tasks Asynchronously ansible","articleSection":"Ansible","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://www.middlewareinventory.com/blog/ansible-async/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Ansible Async Poll Examples &#8211; Ansible nohup, task in background Comments Feed" href="feed/index.rss" />

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-6674956-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-6674956-8');
</script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"3d8661396b"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.middlewareinventory.com/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/4536.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-async-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ansible-async-&amp;format=xml.xml" />
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="Ansible Async Poll Examples &#8211; Ansible nohup, task in background - Middleware Inventory" />
<meta property="og:description" content="Not all the tasks we run in our playbook are short and sweet. Some of them would take a long time but we cannot afford to sit tight and watch the screen. We got better things to do.

Some of the long-running tasks could be

 	Downloading a Big File from URL
 	Running a Script known to run for a long time" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ansible-async/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="Not all the tasks we run in our playbook are short and sweet. Some of them would take a long time but we cannot afford to sit tight and watch the screen. We got better things to do.

Some of the long-running tasks could be

 	Downloading a Big File from URL
 	Running a Script known to run for a long time" />
<meta name="twitter:title" content="Ansible Async Poll Examples &#8211; Ansible nohup, task in background - Middleware Inventory" />
<meta property="twitter:image" content="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.middlewareinventory.com/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">article h3
{
    background-color: whitesmoke;
    color: black;
    padding-left: 1%;
    border-left: 10px solid black;
    font-weight: 400;
    font-size: 22px;
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-4536 single-format-standard wp-custom-logo cookies-set cookies-accepted elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="300" height="107" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="300" height="107" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="https://airdata.github.io/">About Me</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-4536" class="post-4536 post type-post status-publish format-standard has-post-thumbnail hentry category-ansible tag-ansible-async tag-ansible-async-and-poll tag-ansible-background-script tag-run-tasks-asynchronously-ansible wpautop">
<header class="entry-header">
<h1 class="entry-title">Ansible Async Poll Examples &#8211; Ansible nohup, task in background</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="10:30 pm" rel="bookmark"><time class="entry-date published updated" datetime="June 22, 2022">June 22, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=Ansible%20Async%20Poll%20Examples%20%E2%80%93%20Ansible%20nohup%2C%20task%20in%20background&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-async%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="4536" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-async/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=Ansible+Async+Poll+Examples+%E2%80%93+Ansible+nohup%2C+task+in+background&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-async%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="4536" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-async/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=Ansible%20Async%20Poll%20Examples%20%E2%80%93%20Ansible%20nohup%2C%20task%20in%20background&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-async%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="4536" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-async/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fansible-async%2F&subject=Ansible%20Async%20Poll%20Examples%20%E2%80%93%20Ansible%20nohup%2C%20task%20in%20background" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="4536" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-async/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="4536" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ansible-async/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p><a href="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png"><img class="alignnone size-full wp-image-4559 lazyload" src="../../wp-content/ewww/lazy/placeholder-1419x755.png" alt="" width="1419" height="755" data-src="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png 1419w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-300x160.png 300w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-768x409.png 768w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-1024x545.png 1024w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-4559" src="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png" alt="" width="1419" height="755" srcset="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM.png 1419w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-300x160.png 300w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-768x409.png 768w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-10.45.07-PM-1024x545.png 1024w" sizes="(max-width: 1419px) 100vw, 1419px" data-eio="l" /></noscript></a></p>
<p>Not all the tasks we run in our playbook are short and sweet. Some of them would take a long time but we cannot afford to sit tight and watch the screen. We got better things to do.</p>
<p>Some of the long-running tasks could be</p>
<ul>
<li>Downloading a Big File from URL</li>
<li>Running a Script known to run for a long time</li>
<li>Rebooting the remote server and waiting for it to comeback</li>
</ul>
<p>These are only few I got in my head as I write this but there could be more scenarios.</p>
<p>In those cases where you want to run a long-running task with Ansible. You can consider running them with <code>async</code> keyword in your playbook.</p>
<p>Especially when you are running a time taking playbook with <code>parallism</code> and a lot of <code>forks</code> you can simply start the long-running task and poll its status later,  instead of blocking the entire playbook and other succeeding tasks.</p>
<p>So how to use this Ansible Async and Poll in our playbooks and our ad hoc commands.</p>
<p>That&#8217;s the objective of this post.</p>
<p>&nbsp;</p>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#Some_Long_Running_Script" title="Some Long Running Script">Some Long Running Script</a></li><li><a href="#What_does_this_async_do_in_Ansible" title="What does this async do in Ansible">What does this async do in Ansible</a></li><li><a href="#Ansible_Poll_Keyword_with_Ansible_async" title="Ansible Poll Keyword with Ansible async">Ansible Poll Keyword with Ansible async</a></li><li><a href="#A_quick_example_of_Ansible_Async" title="A quick example of Ansible Async">A quick example of Ansible Async</a></li><li><a href="#So_how_to_run_the_job_actually_in_the_background_with_Concurrency" title="So how to run the job actually in the background with Concurrency">So how to run the job actually in the background with Concurrency</a></li><li><a href="#An_example_Playbook_with_Poll_0_A_real_concurrency" title="An example Playbook with Poll 0 &#8211; A real concurrency">An example Playbook with Poll 0 &#8211; A real concurrency</a></li><li><a href="#Ansible_Async_status_within_the_playbook" title="Ansible Async_status within the playbook">Ansible Async_status within the playbook</a></li><li><a href="#Another_way_to_determine_job_completion_with_ansible_wait_for" title="Another way to determine job completion with ansible wait_for">Another way to determine job completion with ansible wait_for</a></li><li><a href="#to_learn_more_about_the_ansible_wait_for_module" title="to learn more about the ansible wait_for module">to learn more about the ansible wait_for module</a></li><li><a href="#to_learn_more_about_how_to_perform_a_reboot_of_the_server_with_Async_and_pool" title="to learn more about how to perform a reboot of the server with Async and pool">to learn more about how to perform a reboot of the server with Async and pool</a></li></ul></nav></div>
<h3><span class="ez-toc-section" id="Some_Long_Running_Script">Some Long Running Script</span></h3>
<p>For better understanding, I have created some funny Script to run long time.  It would simply sleep for the instructed time ( obviously sleeping is also a Job )</p>
<p>here is the script</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;"><span class="hljs-meta" style="color: #1f7199;">#!/bin/bash</span>
<span class="hljs-built_in" style="color: #397300;">echo</span> <span class="hljs-string" style="color: #880000;">"Long Running Job is beginning"</span>
<span class="hljs-built_in" style="color: #397300;">echo</span> <span class="hljs-string" style="color: #880000;">"My Job is to Sleep"</span>
<span class="hljs-built_in" style="color: #397300;">echo</span> <span class="hljs-string" style="color: #880000;">"Now am going to Sleep for <span class="hljs-variable" style="color: #bc6060;">$1</span> Seconds"</span>
sleep <span class="hljs-variable" style="color: #bc6060;">$1</span>
<span class="hljs-built_in" style="color: #397300;">echo</span> <span class="hljs-string" style="color: #880000;">"Huuuhhh!!.. What time is It?"</span>
<span class="hljs-built_in" style="color: #397300;">echo</span> <span class="hljs-string" style="color: #880000;">"Can I get some Bed Coffee please"</span>
<span class="hljs-built_in" style="color: #397300;">exit</span></pre>
<p>so it would run {sleep} as long as we set it to.</p>
<p>This is the script we are going to use in our examples</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="What_does_this_async_do_in_Ansible">What does this async do in Ansible</span></h3>
<div class="page" title="Page 308">
<div class="layoutArea">
<div class="column">
<p>The ansible async keyword triggers Ansible to run the task in the background which can be checked (or) followed up later, and its value will be the maximum time that Ansible will wait for that particular Job (or) task to complete before it eventually times out or complete.</p>
<p>So async keyword can tell Ansible <strong>how long the task should be allowed to run</strong> before Ansible gives it up and time out.</p>
<p>But How would ansible track the status of this job invoked in the background?  How frequent it would check if the task is completed or not.</p>
<p>That&#8217;s where the <code>poll</code> keyword is coming into the picture</p>
</div>
</div>
</div>
<p>&nbsp;</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3><span class="ez-toc-section" id="Ansible_Poll_Keyword_with_Ansible_async">Ansible Poll Keyword with Ansible async</span></h3>
<p>The Poll keyword is auto-enabled whenever you use <code>async</code> and it has a default value as <code>10 seconds</code></p>
<p>Which means If you are not defining the poll keyword with customized time period. By default Ansible would track the status of the <code>async</code> task every 10 seconds.</p>
<p>If you think <code>10 seconds</code> polling is too frequent and you want Ansible to test the status of the job every <code>60 seconds</code> It is possible.</p>
<p>The <code>poll</code> keyword accepts a numeric value to know how many seconds it should wait before polling or following up with the long-running asynchronous task.</p>
<div class="page" title="Page 308">
<div class="layoutArea">
<div class="column">
<p>In other words, The value of the poll indicates how often to poll and check if the tasks are completed. <strong>The default poll value is 10 seconds.</strong></p>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="A_quick_example_of_Ansible_Async">A quick example of Ansible Async</span></h3>
<p>Good learning is doing it practically so let us get our hands dirty and execute the following playbook to see how <code>async</code> and <code>poll</code> works</p>
<p>The following playbook has three tasks</p>
<ul>
<li>Copy the script to the remote server</li>
<li>Run the script</li>
<li>Display the Output of Script with Debug</li>
</ul>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">- name:</span> A Playbook to test Async and Poll
<span class="hljs-attr" style="color: #6d9cbe;">  hosts:</span> appservers
<span class="hljs-attr" style="color: #6d9cbe;">  remote_user:</span> centos
<span class="hljs-attr" style="color: #6d9cbe;">  tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Copy the script 
<span class="hljs-attr" style="color: #6d9cbe;">      copy:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        src:</span> <span class="hljs-string" style="color: #a5c261;">"longrunningscript.sh"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># the file is present on the same directory</span>
<span class="hljs-attr" style="color: #6d9cbe;">        dest:</span> <span class="hljs-string" style="color: #a5c261;">"/tmp"</span>
    
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Execute the script
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
        <span class="hljs-string" style="color: #a5c261;">"chmod a+x /tmp/longrunningscript.sh &amp;&amp;  <span class="hljs-string">/tmp/longrunningscript.sh</span> 60"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Run for 60 seconds </span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">120</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Maximum allowed time in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">05</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Polling Interval in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> scrout

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Some task just to debug
<span class="hljs-attr" style="color: #6d9cbe;">      debug:</span> var=scrout.stdout_lines</pre>
<p>&nbsp;</p>
<p>Though our script is going to run only for 60 seconds. we have given a room for it to run longer. In realtime scenarios, you would not know how long the script would run, so use your best judgement when you are setting the value of <code>async</code></p>
<p>Let us run this playbook quickly and observe the results.</p>
<p><script id="asciicast-D12IkgVMFvIEL6cwdoFc1wEVR" src="https://asciinema.org/a/D12IkgVMFvIEL6cwdoFc1wEVR.js" async></script></p>
<p>Did you notice that the second task of executing the script was waiting as long as the script is completing and blocking the succedding tasks.</p>
<p>we will discuss how to solve this in upcoming sections.</p>
<p>But there is a one more question You might <strong>ask what if I give less async time than the required time for the script. </strong>Cause we cannot judge how long the script may run in real time scnarios.</p>
<p><script id="asciicast-kiP7ytl0LZy3AVere2DVZJeBQ" src="https://asciinema.org/a/kiP7ytl0LZy3AVere2DVZJeBQ.js" async></script></p>
<p>The answer is the playbook would fail if the given async time is not suffcient and print the following timeout message</p>
<p><a href="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM.png"><img class="alignnone size-full wp-image-4542 lazyload" src="../../wp-content/ewww/lazy/placeholder-938x127.png" alt="" width="938" height="127" data-src="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM.png 938w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM-300x41.png 300w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM-768x104.png 768w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-4542" src="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM.png" alt="" width="938" height="127" srcset="../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM.png 938w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM-300x41.png 300w, ../../wp-content/uploads/2019/11/Screenshot-2019-11-30-at-4.20.45-PM-768x104.png 768w" sizes="(max-width: 938px) 100vw, 938px" data-eio="l" /></noscript></a></p>
<p>Now you might ask me, Is this really asynchronous? <strong>I had to wait anyway for the task to complete.</strong></p>
<p>&nbsp;</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div class="page" title="Page 308">
<div class="layoutArea">
<div class="column">
<h3><span class="ez-toc-section" id="So_how_to_run_the_job_actually_in_the_background_with_Concurrency">So how to run the job actually in the background with Concurrency</span></h3>
<p>If you do not want Ansible to track the status of the long running asynchronous task or job. You can tell ansible to just fire it and forget it. by setting the poll to 0 seconds</p>
<p>As a user, If you want to track the status of that job later. you can use the JOB ID given by ansible during the invocation to track it.</p>
<p>This is useful in many cases and especially when you want to start some services like weblogic, tomcat, haproxy etc using a script at the remote server and let it run</p>
</div>
</div>
</div>
<p>To me, if you ask. This is the actual Asynchronous approach.</p>
<p>If we want to track the status of this job, we can go ahead and use <code>async_status</code> keyword along with the job ID being returned when we run the job.</p>
<blockquote>
<p class="first admonition-title"><strong>Note*</strong></p>
<p>Not all Jobs and modules can be run in background with poll 0</p>
<p class="last">You shouldn’t attempt to run a task asynchronously by specifying a poll value of 0 with operations that require exclusive locks (such as yum transactions) or if you expect to run other commands later in the playbook against those same resources.</p>
<p>&nbsp;</p></blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="An_example_Playbook_with_Poll_0_A_real_concurrency">An example Playbook with Poll 0 &#8211; A real concurrency</span></h3>
<p>Now let us use the same playbook we used earlier with the modified Poll. You just have to update the Poll to 0 seconds and re-execute it.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">- name:</span> Test Playbook to test Async and Poll
<span class="hljs-attr" style="color: #6d9cbe;">  hosts:</span> appservers
<span class="hljs-attr" style="color: #6d9cbe;">  remote_user:</span> centos
<span class="hljs-attr" style="color: #6d9cbe;">  tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Copy the script 
<span class="hljs-attr" style="color: #6d9cbe;">      copy:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        src:</span> <span class="hljs-string" style="color: #a5c261;">"longrunningscript.sh"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># the file is present on the same directory</span>
<span class="hljs-attr" style="color: #6d9cbe;">        dest:</span> <span class="hljs-string" style="color: #a5c261;">"/tmp"</span>
    
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Execute the script
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
        <span class="hljs-string" style="color: #a5c261;">"chmod a+x /tmp/longrunningscript.sh &amp;&amp;  /tmp/longrunningscript.sh 120"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Run for 60 seconds </span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">180</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Maximum allowed time in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Polling Interval in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> scrout

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Some Other Non Dependent task
      shell :
        <span class="hljs-string" style="color: #a5c261;">" ls -lrt /tmp"</span></pre>
<p>now execute this playbook with at least one <code>-v</code> so that you would be able to see the JOB ID which you can use to test the status with <code>async_status</code></p>
<p><script id="asciicast-5ZFXyCPpxzdhjyglwM4LHLrxj" src="https://asciinema.org/a/5ZFXyCPpxzdhjyglwM4LHLrxj.js" async></script></p>
<p>in the preceding screen recording, you can see how the playbook is invoked with <code>poll 0</code> and  tracking the job status using  <code>async_status</code> module in <strong>AD-HOC</strong></p>
<p><code>aync_status</code> can be used within the playbook as well..</p>
<p>&nbsp;</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3><span class="ez-toc-section" id="Ansible_Async_status_within_the_playbook">Ansible Async_status within the playbook</span></h3>
<p>You can also use the <code>async_status</code> module with in the playbook as shown below.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">- name:</span> Test Playbook to test Async and Poll
<span class="hljs-attr" style="color: #6d9cbe;">  hosts:</span> appservers
<span class="hljs-attr" style="color: #6d9cbe;">  remote_user:</span> centos
<span class="hljs-attr" style="color: #6d9cbe;">  tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Copy the script 
<span class="hljs-attr" style="color: #6d9cbe;">      copy:</span> 
<span class="hljs-attr" style="color: #6d9cbe;">        src:</span> <span class="hljs-string" style="color: #a5c261;">"longrunningscript.sh"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># the file is present on the same directory</span>
<span class="hljs-attr" style="color: #6d9cbe;">        dest:</span> <span class="hljs-string" style="color: #a5c261;">"/tmp"</span>
    
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Execute the script
<span class="hljs-attr" style="color: #6d9cbe;">      shell:</span>
        <span class="hljs-string" style="color: #a5c261;">"chmod a+x /tmp/longrunningscript.sh &amp;&amp;  /tmp/longrunningscript.sh 120"</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Run for 60 seconds </span>
<span class="hljs-attr" style="color: #6d9cbe;">      async:</span> <span class="hljs-number" style="color: #a5c261;">180</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Maximum allowed time in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span> <span class="hljs-comment" style="color: #bc9458; font-style: italic;"># Polling Interval in Seconds</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> scrout

<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Some Other Non Dependent task
      shell :
        <span class="hljs-string" style="color: #a5c261;">" ls -lrt /tmp"</span>
      
<span class="hljs-attr" style="color: #6d9cbe;">    - name:</span> Checking the Job Status
<span class="hljs-attr" style="color: #6d9cbe;">      async_status:</span>
<span class="hljs-attr" style="color: #6d9cbe;">        jid:</span> <span class="hljs-string" style="color: #a5c261;">"<span class="hljs-template-variable" style="color: #a5c261;">{{ scrout.ansible_job_id }}</span>"</span>
<span class="hljs-attr" style="color: #6d9cbe;">      register:</span> job_result
<span class="hljs-attr" style="color: #6d9cbe;">      until:</span> job_result.finished
<span class="hljs-attr" style="color: #6d9cbe;">      retries:</span> <span class="hljs-number" style="color: #a5c261;">30</span>
  
</pre>
<p>Here is the screen record of running this playbook.</p>
<p><script id="asciicast-8phbVaLrHuQUyBvvjsJiKH2VR" src="https://asciinema.org/a/8phbVaLrHuQUyBvvjsJiKH2VR.js" async></script></p>
<p>&nbsp;</p>
<p>Not Just <code>async_status</code> you can use <code>wait_for</code> module with different strategies to check whether the job is completed or not.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Another_way_to_determine_job_completion_with_ansible_wait_for">Another way to determine job completion with ansible wait_for</span></h3>
<p>Consider the following playbook written to perform Server Patching and reboot.</p>
<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;"><span class="hljs-meta" style="color: #9b859d;">---</span>
<span class="hljs-attr" style="color: #6d9cbe;">  - name:</span> Patch the server and Reboot
<span class="hljs-attr" style="color: #6d9cbe;">    hosts:</span> app
<span class="hljs-attr" style="color: #6d9cbe;">    tasks:</span>
<span class="hljs-attr" style="color: #6d9cbe;">      - name:</span> Patch the server
<span class="hljs-attr" style="color: #6d9cbe;">        become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">        become_user:</span> root
<span class="hljs-attr" style="color: #6d9cbe;">        tags:</span> Patch
<span class="hljs-attr" style="color: #6d9cbe;">        shell:</span> <span class="hljs-string" style="color: #a5c261;">"yum -y update"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        register:</span> patchresult

<span class="hljs-attr" style="color: #6d9cbe;">      - name:</span> Reboot the server
<span class="hljs-attr" style="color: #6d9cbe;">        tags:</span> reboot
<span class="hljs-attr" style="color: #6d9cbe;">        become:</span> <span class="hljs-literal">yes</span>
<span class="hljs-attr" style="color: #6d9cbe;">        become_user:</span> root
<span class="hljs-attr" style="color: #6d9cbe;">        shell:</span> <span class="hljs-string" style="color: #a5c261;">"sleep 5 &amp;&amp; reboot"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        async:</span> <span class="hljs-number" style="color: #a5c261;">1</span>
<span class="hljs-attr" style="color: #6d9cbe;">        poll:</span> <span class="hljs-number" style="color: #a5c261;">0</span>
    
<span class="hljs-attr" style="color: #6d9cbe;">      - name:</span> Wait for the reboot and reconnect 
<span class="hljs-attr" style="color: #6d9cbe;">        wait_for:</span>
<span class="hljs-attr" style="color: #6d9cbe;">          port:</span> <span class="hljs-number" style="color: #a5c261;">22</span>
<span class="hljs-attr" style="color: #6d9cbe;">          host:</span> <span class="hljs-string" style="color: #a5c261;">'<span class="hljs-template-variable" style="color: #a5c261;">{{ (ansible_ssh_host|default(ansible_host))|default(inventory_hostname) }}</span>'</span>
<span class="hljs-attr" style="color: #6d9cbe;">          search_regex:</span> OpenSSH
<span class="hljs-attr" style="color: #6d9cbe;">          delay:</span> <span class="hljs-number" style="color: #a5c261;">10</span>
<span class="hljs-attr" style="color: #6d9cbe;">          timeout:</span> <span class="hljs-number" style="color: #a5c261;">60</span>
<span class="hljs-attr" style="color: #6d9cbe;">        connection:</span> local

<span class="hljs-attr" style="color: #6d9cbe;">      - name:</span> Check the Uptime of the servers
<span class="hljs-attr" style="color: #6d9cbe;">        shell:</span> <span class="hljs-string" style="color: #a5c261;">"uptime"</span>
<span class="hljs-attr" style="color: #6d9cbe;">        register:</span> Uptime

<span class="hljs-attr" style="color: #6d9cbe;">      - debug:</span> var=Uptime</pre>
<p>At task no 2 we are rebooting the server with the same poll value 0 ( fire and forget) but instead of tracking the job status at next step we use <code>wait_for</code> module to make sure that the server comes back by constantly checking the <code>ssh</code> port of the remote server.</p>
<p>So you can use <code>wait_for</code> module as another way to track the status of the job.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h3><span class="ez-toc-section" id="to_learn_more_about_the_ansible_wait_for_module">to <strong>learn more about the ansible wait_for module</strong></span></h3>
<blockquote class="wp-embedded-content" data-secret="zanJWkzdKH"><p><a href="../ansible-wait_for-examples/index.html">Ansible wait_for module examples &#8211; How to | Devops Junction</a></p></blockquote>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" style="position: absolute; clip: rect(1px, 1px, 1px, 1px);" title="&#8220;Ansible wait_for module examples &#8211; How to | Devops Junction&#8221; &#8212; Middleware Inventory" src="../ansible-wait_for-examples/embed/index.html#?secret=zanJWkzdKH" data-secret="zanJWkzdKH" width="600" height="338" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="to_learn_more_about_how_to_perform_a_reboot_of_the_server_with_Async_and_pool">to <strong>learn more about how to perform a reboot of the server with Async and pool</strong></span></h3>
<blockquote class="wp-embedded-content" data-secret="6iasXWpWps"><p><a href="../ansible_wait_for_reboot_to_complete/index.html">Ansible Reboot system and wait_for reboot to complete</a></p></blockquote>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" style="position: absolute; clip: rect(1px, 1px, 1px, 1px);" title="&#8220;Ansible Reboot system and wait_for reboot to complete&#8221; &#8212; Middleware Inventory" src="../ansible_wait_for_reboot_to_complete/embed/index.html#?secret=6iasXWpWps" data-secret="6iasXWpWps" width="600" height="338" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>Hope this article helps.</p>
<p>Cheers<br />
Rumen Lishkov</p>
<div id="postfollow">
<a href='https://ko-fi.com/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' border='0' alt='Buy Me a Coffee at ko-fi.com' data-src="https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2" loading="lazy" class="lazyload" /><noscript><img height='46' style='border:0px;height:46px;width: 186px' src='https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' data-eio="l" /></noscript></a>
<p>Follow us on<a href="https://www.facebook.com/rumenlishkov">Facebook</a> or<a href="https://www.twitter.com/mwinventory">Twitter</a>
</br>
For more practical videos and tutorials. <a href="https://www.youtube.com/kiss2mark">Subscribe to our channel</a>
</br>
Find me on Linkedin <a href="https://www.linkedin.com/in/rumen-lishkov/">My Profile</a>
</br>
</i>For any Consultation or to hire us <a href="../../cdn-cgi/l/email-protection.html#b6ded3dadad9f6d1c4dfc2d0cf98d5d9db"> <span class="__cf_email__" data-cfemail="c5ada0a9a9aa85a2b7acb1a3bceba6aaa8">[email&#160;protected]</span></a>
</br>
If you like this article. Show your Support! <a href="https://ko-fi.com/middlewareinventory">Buy me a Coffee.</a>
</br>
</p>
<p style="color: palevioletred !important;">Signup for Exclusive "Subscriber-only" Content</p>
<div class="emaillist">
<form action="#" method="post" class="es_subscription_form es_shortcode_form" id="es_subscription_form_1657192919" data-source="ig-es">
<div class="es-field-wrap"><label>Name*<br /><input type="text" name="name" class="ig_es_form_field_name" placeholder="" value="" required="required" /></label></div><div class="es-field-wrap"><label>Email*<br /><input class="es_required_field es_txt_email ig_es_form_field_email" type="email" name="email" value="" placeholder="" required="required" /></label></div><input type="hidden" name="lists[]" value="1" /><input type="hidden" name="form_id" value="3" />
<input type="hidden" name="es_email_page" value="4536" />
<input type="hidden" name="es_email_page_url" value="https://www.middlewareinventory.com/blog/ansible-async/" />
<input type="hidden" name="status" value="Unconfirmed" />
<input type="hidden" name="es-subscribe" id="es-subscribe" value="915ddf1a10" />
<label style="position:absolute;top:-99999px;left:-99999px;z-index:-99;"><input type="email" name="es_hp_email" class="es_required_field" tabindex="-1" autocomplete="-1" value="" /></label>
<input type="submit" name="submit" class="es_subscription_form_submit es_submit_button es_textbox_button" id="es_subscription_form_submit_1657192919" value="Subscribe" />
<span class="es_spinner_image" id="spinner-image"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Loading" data-src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" loading="lazy" class="lazyload" /><noscript><img src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" alt="Loading" data-eio="l" /></noscript></span>
</form>
<span class="es_subscription_message" id="es_subscription_message_1657192919"></span>
</div>
</div>
<hr>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-dry-run-ansible-check-mode/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Dry run" data-src="../../wp-content/uploads/2019/07/Screenshot-2019-07-21-at-12.06.34-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/07/Screenshot-2019-07-21-at-12.06.34-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Dry run" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-dry-run-ansible-check-mode/index.html'>Ansible Dry Run - How to Run Playbook in Ansible Check mode</a><p>Introduction Ansible Dry Run or Ansible Check mode feature is to check your playbook before execution like Ansible's&nbsp;--syntax-check&nbsp;feature. With Ansible Dry Run feature you can execute the playbook without having to actually make changes on the server. With Ansible Dry Run you can see if the host is getting changed&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../run-ansible-playbook-locally/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/07/Screenshot-2019-07-17-at-6.08.06-PM-1-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/07/Screenshot-2019-07-17-at-6.08.06-PM-1-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../run-ansible-playbook-locally/index.html'>How to Run Ansible Playbook Locally</a><p>In this post, we are going to see how to run the playbook locally on our Localhost on the control machine. How to run Ansible Playbook locally is one of the questions I used to have before I learnt it. Let me tell you how to Run Ansible Playbook Locally&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-sudo-ansible-become-example/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Sudo" data-src="../../wp-content/uploads/2019/08/Screenshot-2019-08-05-at-5.09.25-PM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/08/Screenshot-2019-08-05-at-5.09.25-PM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Sudo" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-sudo-ansible-become-example/index.html'>Ansible sudo - ansible become example</a><p>Ansible Sudo or Ansible become Introduction Ansible Sudo or become is a method to run a particular task in a playbook with Special Privileges like root user or some other user. In the earlier versions of ansible there is an option named as sudo which is deprecated now, Since ansible&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-playbook-example/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Ansible Playbook Examples" data-src="../../wp-content/uploads/2019/07/Screenshot-2019-07-20-at-4.48.10-PM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/07/Screenshot-2019-07-20-at-4.48.10-PM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Ansible Playbook Examples" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-playbook-example/index.html'>Ansible Playbook Examples - Sample Ansible Playbooks | Devops Junction</a><p>In this post, we are going to see examples of Ansible playbook and various different modules and playbook examples with various modules and multiple hosts. We will start with a basic Ansible playbook and learn what is task and play and what is playbook etc. What is Ansible Playbook It&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../ansible-get-ip-address/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/03/Screen-Shot-2019-03-18-at-12.45.43-AM-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../ansible-get-ip-address/index.html'>Ansible get ip address of current host or target</a><p>How to get the IP address of the current or remote host in Ansible. That's the question, this article is going to address. While running a Playbook you might have had a requirement where you need to get the IP address of the connected and current remote host.&nbsp; There are&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<div class="entry-tags clearfix">
<span class="meta-tags">
<a href="../tag/ansible-async/index.html" rel="tag">Ansible Async</a><a href="../tag/ansible-async-and-poll/index.html" rel="tag">ansible async and poll</a><a href="../tag/ansible-background-script/index.html" rel="tag">ansible background script</a><a href="../tag/run-tasks-asynchronously-ansible/index.html" rel="tag">Run Tasks Asynchronously ansible</a> </span>
</div>
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../ansible-ec2-ssh-key/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>Add SSH Key to EC2 instances with Ansible &#8211; Automated</a></div><div class="nav-next"><a href="../ansible-aws-ec2/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>Ansible EC2 Example &#8211; Create EC2 instance with Ansible</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>


<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 100%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 100%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-4536 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://www.middlewareinventory.com/blog/ansible-async/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=Ansible+Async+Poll+Examples+%E2%80%93+Ansible+nohup%2C+task+in+background&url=https://www.middlewareinventory.com/blog/ansible-async/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://www.middlewareinventory.com/blog/ansible-async/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=Ansible+Async+Poll+Examples+%E2%80%93+Ansible+nohup%2C+task+in+background&body=https://www.middlewareinventory.com/blog/ansible-async/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://www.middlewareinventory.com/blog/ansible-async/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"4536 https:\/\/www.middlewareinventory.com\/?p=4536","disqusShortname":"mwinventory","disqusTitle":"Ansible Async Poll Examples \u2013 Ansible nohup, task in background","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/ansible-async\/","postId":"4536"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"2019084a26"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"b4d440853b","post_id":"4536"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"0b980bed5f","ip":"2001:871:25e:e896:e7e7:2c83:c32d:3c14","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://www.middlewareinventory.com/blog/ansible-async/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 0;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657192919;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="#" id="cn-refuse-cookie" data-cookie-set="refuse" class="cn-set-cookie cn-button bootstrap button">No</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
<div class="cookie-notice-revoke-container"><a href="#" class="cn-revoke-cookie cn-button bootstrap button">Revoke cookies</a></div>
</div>
</body>
</html>

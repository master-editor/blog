<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="https://gmpg.org/xfn/11">
<link rel="pingback" href="https://www.middlewareinventory.com/xmlrpc.php">

<title>SSL Expiry and Uptime Monitor for URLs - Prometheus Blackbox | Grafana</title>
<meta name="description" content="Prometheus URL monitoring with blackbox and Dashboard with Grafana. SSL Expiry Alerts and Uptime alerts with Slack. Prometheus blackbox exporter" />
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
<link rel="canonical" href="index.html" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="SSL Expiry and Uptime Monitor for URLs - Prometheus Blackbox | Grafana" />
<meta property="og:description" content="Prometheus URL monitoring with blackbox and Dashboard with Grafana. SSL Expiry Alerts and Uptime alerts with Slack. Prometheus blackbox exporter" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="article:publisher" content="http://www.facebook.com/devopsjunc" />
<meta property="article:published_time" content="2021-06-27T04:41:02+00:00" />
<meta property="article:modified_time" content="2022-04-19T02:53:35+00:00" />
<meta property="og:image" content="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" />
<meta property="og:image:width" content="2560" />
<meta property="og:image:height" content="1380" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:creator" content="@mwinventory" />
<meta name="twitter:site" content="@mwinventory" />
<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://www.middlewareinventory.com/#organization","name":"Middleware Inventory","url":"https://www.middlewareinventory.com/","sameAs":["http://www.facebook.com/devopsjunc","https://www.youtube.com/channel/UCRuqBFM6ioWwviNJkgOjeWw","https://twitter.com/mwinventory"],"logo":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#logo","inLanguage":"en-US","url":"https://www.middlewareinventory.com/wp-content/uploads/2020/09/Screenshot-2020-09-18-at-3.49.40-AM.jpg","width":300,"height":107,"caption":"Middleware Inventory"},"image":{"@id":"https://www.middlewareinventory.com/#logo"}},{"@type":"WebSite","@id":"https://www.middlewareinventory.com/#website","url":"https://www.middlewareinventory.com/","name":"Devops Junction","description":"An inventory of [i]nformation, Middleware and much more.","publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"potentialAction":[{"@type":"SearchAction","target":"https://www.middlewareinventory.com/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#primaryimage","inLanguage":"en-US","url":"../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg","width":2560,"height":1380,"caption":"Grafana URL and SSL monitor"},{"@type":"WebPage","@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#webpage","url":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/","name":"SSL Expiry and Uptime Monitor for URLs - Prometheus Blackbox | Grafana","isPartOf":{"@id":"https://www.middlewareinventory.com/#website"},"primaryImageOfPage":{"@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#primaryimage"},"datePublished":"2021-06-27T04:41:02+00:00","dateModified":"2022-04-19T02:53:35+00:00","description":"Prometheus URL monitoring with blackbox and Dashboard with Grafana. SSL Expiry Alerts and Uptime alerts with Slack. Prometheus blackbox exporter","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/"]}]},{"@type":"Article","@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#article","isPartOf":{"@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#webpage"},"author":{"@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147"},"headline":"SSL Expiry and Uptime Monitor for URLs &#8211; Prometheus Blackbox | Grafana","datePublished":"2021-06-27T04:41:02+00:00","dateModified":"2022-04-19T02:53:35+00:00","mainEntityOfPage":{"@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#webpage"},"commentCount":0,"publisher":{"@id":"https://www.middlewareinventory.com/#organization"},"image":{"@id":"https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#primaryimage"},"keywords":"grafana slack,prometheus alert,prometheus slack,prometheus url monitoring,ssl certificate monitoring","articleSection":"Grafana,Prometheus","inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/#respond"]}]},{"@type":"Person","@id":"https://www.middlewareinventory.com/#/schema/person/050bf13e27b309d29d1bda45c4eb3147","name":"Rumen Lishkov","image":{"@type":"ImageObject","@id":"https://www.middlewareinventory.com/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g","caption":"Rumen Lishkov"}}]}</script>

<link rel='dns-prefetch' href='https://js.stripe.com' />
<link rel='dns-prefetch' href='https://fonts.googleapis.com' />
<link rel='dns-prefetch' href='https://s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Feed" href="../../feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; Comments Feed" href="../../comments/feed/index.rss" />
<link rel="alternate" type="application/rss+xml" title="Middleware Inventory &raquo; SSL Expiry and Uptime Monitor for URLs &#8211; Prometheus Blackbox | Grafana Comments Feed" href="feed/index.rss" />

<script type="text/javascript" data-cfasync="false">
	var mi_version         = '7.12.2';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-84162240-1';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	if ( 'undefined' === typeof gaOptout ) {
		function gaOptout() {
			__gaTrackerOptout();
		}
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-84162240-1', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('require', 'displayfeatures');
		__gaTracker('require', 'linkid', 'linkid.js');
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script>


<script type="text/javascript" data-cfasync="false">
			window.google_analytics_uacct = 'UA-84162240-1';

        </script>

<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.middlewareinventory.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.5.6"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/404f7.css" media="all" />
<style id='ez-toc-inline-css' type='text/css'>div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container {width: 100%;}
</style>
<link rel="stylesheet" href="../../wp-content/cache/minify/f854f.css" media="all" />
<link rel='stylesheet' id='poseidon-default-fonts-css' href='https://fonts.googleapis.com/css?family=Ubuntu%3A400%2C400italic%2C700%2C700italic%7CRaleway%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel="stylesheet" href="../../wp-content/cache/minify/88e5e.css" media="all" />
<script type='text/javascript' id='monsterinsights-frontend-script-js-extra'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/www.middlewareinventory.com","hash_tracking":"false"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1058f.js"></script>
<script type='text/javascript' id='cookie-notice-front-js-extra'>
/* <![CDATA[ */
var cnArgs = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","hideEffect":"fade","onScroll":"no","onScrollOffset":"100","cookieName":"cookie_notice_accepted","cookieValue":"true","cookieTime":"2592000","cookiePath":"\/","cookieDomain":"","redirection":"","cache":"1","refuse":"yes","revoke_cookies":"0","revoke_cookies_opt":"automatic","secure":"1"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/545b0.js"></script>
<script type='text/javascript' id='email-subscribers-js-extra'>
/* <![CDATA[ */
var es_data = {"messages":{"es_empty_email_notice":"Please enter email address","es_rate_limit_notice":"You need to wait for sometime before subscribing again","es_single_optin_success_message":"Successfully Subscribed.","es_email_exists_notice":"Email Address already exists!","es_unexpected_error_notice":"Oops.. Unexpected error occurred.","es_invalid_email_notice":"Invalid email address","es_try_later_notice":"Please try after some time"},"es_ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/1de0a.js"></script>
<script type='text/javascript' id='ssb-front-js-js-extra'>
/* <![CDATA[ */
var SSB = {"ajax_url":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","fb_share_nonce":"3d8661396b"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/268e7.js"></script>
<!--[if lt IE 9]>
<script type='text/javascript' src='https://www.middlewareinventory.com/wp-content/themes/poseidon/js/html5shiv.min.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<script type='text/javascript' id='poseidon-post-slider-js-extra'>
/* <![CDATA[ */
var poseidon_slider_params = {"animation":"slide","speed":"7000"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/51af3.js"></script>
<script type='text/javascript' id='eio-lazy-load-js-extra'>
/* <![CDATA[ */
var eio_lazy_vars = {"exactdn_domain":"","skip_autoscale":"0"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/28f5b.js"></script>
<link rel="https://api.w.org/" href="../../wp-json/index.json" /><link rel="alternate" type="application/json" href="../../wp-json/wp/v2/posts/7008.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php-rsd.xml" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.middlewareinventory.com/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 5.5.6" />
<link rel='shortlink' href='index.html' />
<link rel="alternate" type="application/json+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana-.json" />
<link rel="alternate" type="text/xml+oembed" href="../../wp-json/oembed/1.0/embed-url=https---www.middlewareinventory.com-blog-ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana-&amp;format=xml.xml" />
<link href='https://fonts.googleapis.com/css?family=Strait:100,200,300,400,500,600,700,800,900&amp;subset=arabic,vietnamese,hebrew,thai,bengali,latin,latin-ext,cyrillic,cyrillic-ext,greek' rel='stylesheet' type='text/css'><style>a.idcore-button,a.idcore-button:visited{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:hover,a.idcore-button:focus{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}a.idcore-button:active{font-family:'Strait','arial';font-size:20px;color:#ffffff;font-weight:normal;font-style:normal;text-decoration:none !important;text-transform:uppercase;padding-top:16px;padding-bottom:16px;padding-left:32px;padding-right:32px;background-color:rgba(212, 7, 72, 1);background-image:linear-gradient(to bottom,rgba(255,255,255,.05) 0,rgba(255,255,255,.05) 50%,rgba(0,0,0,.05) 51%,rgba(0,0,0,.05) 100%);border-width:1px;border-style:solid;border-color:#d4150b;border-radius:3px;box-shadow: 2px 2px 0px 0px rgba(68, 68, 68, 0.2);}</style><script>var idcore_ajax_url = "https://www.middlewareinventory.com/wp-admin/admin-ajax.php";</script> <style media="screen">/*inline margin*/
	
	
	
	
	
	
			 /*margin-digbar*/

	
	
	
	
	   div[class*="simplesocialbuttons-float"].simplesocialbuttons.simplesocial-round-icon button{
	 margin: ;
   }
	
	
	
</style>

<meta property="og:title" content="SSL Expiry and Uptime Monitor for URLs &#8211; Prometheus Blackbox | Grafana - Middleware Inventory" />
<meta property="og:description" content="In this article, we are going to see how to monitor your web services or URLs for their SSL expiry and uptime.

You can consider this as your SSL certificate expiry monitor and web service uptime monitor or URL Health check monitor for all your web services (URLs)

These are the set of tools we are going to need

 	Prometheus
 	Prometheus Blackbox" />
<meta property="og:url" content="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" />
<meta property="og:site_name" content="Middleware Inventory" />
<meta property="og:image" content="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="In this article, we are going to see how to monitor your web services or URLs for their SSL expiry and uptime.

You can consider this as your SSL certificate expiry monitor and web service uptime monitor or URL Health check monitor for all your web services (URLs)

These are the set of tools we are going to need

 	Prometheus
 	Prometheus Blackbox" />
<meta name="twitter:title" content="SSL Expiry and Uptime Monitor for URLs &#8211; Prometheus Blackbox | Grafana - Middleware Inventory" />
<meta property="twitter:image" content="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
<noscript><style>.lazyload[data-src]{display:none !important;}</style></noscript><style type="text/css" id="sns_global_styles">/* for mobile */
@media screen and (max-width: 480px) {
    #text-23 {
        display:none !important;
    }
	p,li
    {
      font-size: 20px !important;
      color: #333 !important;
      line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li a
    {
    	font-size: 20px !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  
  #afc_sidebar_4348 
{
  height: 8vh; 
  max-height: 8vh; 
  background-color: transparent;
}
}

/* for Desktop */
@media screen and (min-width: 500px) {
#afc_sidebar_4348 
{
  height: 10vh; 
  max-height: 10vh; 
  background-color: transparent;
}
  #text-23 {
        display:none !important;
    }
	p,li
    {
        font-size: 20px !important;
        color: #333 !important;
        line-height: 1.68 !important;;
    }
    .article-inner
    {
    	padding-right: 5% !important;
    	padding-left: 5% !important;
    }
    ul.related_post li
    {
    	width: 100% !important;
    }
    ul.related_post li small {
    font-size: 100%;
    }
  

}

.es_lablebox {
    padding-bottom: 3px;
    color: steelblue !important;
    font-weight: bold !important;
}
.widget-title span {
    line-height: 2.2;
    color: steelblue !important;
}
.sidey {
	padding: 0;
}
.sumome-contactform 
{
  display: none;
}
code { 
    font-family: courier;
    font-size: 18px;
    padding: 2px;
    background-color: #f1f1f1;
    /*box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;*/
    
}

.syntaxhighlighter {
    font-size: 14px !important;
}

pre {
 font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}

.black-red-border
{
    border-left: 3px solid;
    background-color: black;
    color: ghostwhite;
    border-left-color: red;
} 
}

#wpdevar_comment_1 span
{
  font-family:  "Open Sans", Helvetica, Arial, sans-serif !important;
  font-size: 20px !important;
  color: #1495b5 !important;
}

#wpdevar_comment_1 
{
  margin-top: 50px;
  margin-bottom: 30px;
}

summary
{
 color: steelblue; 
}

blockquote
{
  border-left-color: #cc0f77 !important;
  border-left-width: 4px !important;
  border-left-style: solid !important;
  background-color: #f5f5f5 !important;
}

.rp4wp-related-post-image{ width: auto !important; }

.main-navigation-menu
{
  float: none !important;
}

.primary-navigation
{
  float: none !important
}

body,html{
  /* font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

.page-title, .entry-title, .site-title, .main-navigation-menu a, .widget-title
{
  /*font-family: 'Poppins', sans-serif; */
  font-family: "Source Sans Pro","Arial",sans-serif
}

#postfollow {
  background: whitesmoke;
  padding-top: 5%;
  padding-bottom: 5%;
  padding-left: 2%;
}
div#ez-toc-container p.ez-toc-title {
    font-weight: bold;
    font-size: 24px !important;
}
div#ez-toc-container {
    margin-bottom: 15%;
}

</style><link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-32x32.png" sizes="32x32" />
<link rel="icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="../../wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.middlewareinventory.com/wp-content/uploads/2017/12/cropped-Screen-Shot-2017-12-22-at-12.16.54-PM-3-270x270.png" />
<style type="text/css">.post-img
{
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  border: 1px solid lightgray;
}
article h2
{
    background-color: #29558c;
    color: white;
    padding-left: 1%;
    border-left: 15px solid crimson;
    font-weight: 400;
    font-size: 22px;
}
li {
    padding: 2px;
    margin-left: 2%;
}
code
{
  color: black;
}
blockquote {
    padding: 2%;
    background-color: none !important;
}
div.enlighter{
  font-size: 1.2em;  
}
.enlighter-default {
    font-family: Menlo, Monaco, Consolas, "Courier New", monospace !important;
}
</style>
<style type="text/css" id="wp-custom-css">.site-title
{
   font-size: 24px !important;
}		</style>
</head>
<body class="post-template-default single single-post postid-7008 single-format-standard wp-custom-logo cookies-not-set elementor-default">
<div id="page" class="hfeed site">
<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
<div id="header-top" class="header-bar-wrap"></div>
<header id="masthead" class="site-header clearfix" role="banner">
<div class="header-main container clearfix">
<div id="logo" class="site-branding clearfix">
<a href="../../index.html" class="custom-logo-link" rel="home"><img width="300" height="107" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 107'%3E%3C/svg%3E" class="custom-logo lazyload" alt="Middleware Inventory" data-src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" loading="lazy" /><noscript><img width="300" height="107" src="../../wp-content/uploads/2020/09/cropped-Screenshot-2020-09-18-at-3.49.40-AM.jpg" class="custom-logo" alt="Middleware Inventory" data-eio="l" /></noscript></a>
<p class="site-title"></p>
</div>
<nav id="main-navigation" class="primary-navigation navigation clearfix" role="navigation">
<ul id="menu-primary-menu" class="main-navigation-menu"><li id="menu-item-172" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-172"><a href="../../about/index.html">About Us</a></li>
<li id="menu-item-3206" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3206"><a href="../category/middleware/index.html">Middleware</a>
<ul class="sub-menu">
<li id="menu-item-1518" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1518"><a href="../category/weblogic/index.html">weblogic</a></li>
<li id="menu-item-3207" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3207"><a href="../category/was/index.html">WAS</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3208"><a href="../category/websphere/index.html">Websphere</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3209"><a href="../category/wlst/index.html">wlst</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3210"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a></li>
<li id="menu-item-3211" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3211"><a href="../category/jms/index.html">JMS</a></li>
<li id="menu-item-3212" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3212"><a href="../category/activemq/index.html">ActiveMQ</a></li>
<li id="menu-item-3213" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3213"><a href="../category/troubleshooting/index.html">Troubleshooting</a></li>
<li id="menu-item-3214" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3214"><a href="../category/apache/index.html">Apache</a></li>
<li id="menu-item-3215" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3215"><a href="../category/best-practice/index.html">Best Practice</a></li>
<li id="menu-item-3222" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3222"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a></li>
</ul>
</li>
<li id="menu-item-3157" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-3157"><a href="../../devops-junction/index.html">Devops</a>
<ul class="sub-menu">
<li id="menu-item-1513" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1513"><a href="../category/ansible/index.html">Ansible</a></li>
<li id="menu-item-3216" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3216"><a href="../category/aws/index.html">AWS</a></li>
<li id="menu-item-3217" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3217"><a href="../category/docker/index.html">Docker</a></li>
<li id="menu-item-3218" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3218"><a href="../category/packer/index.html">Packer</a></li>
<li id="menu-item-3219" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3219"><a href="../category/splunk/index.html">Splunk</a></li>
<li id="menu-item-3220" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3220"><a href="../category/terraform/index.html">Terraform</a></li>
<li id="menu-item-3221" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3221"><a href="../category/vagrant/index.html">Vagrant</a></li>
<li id="menu-item-3223" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3223"><a href="../category/kubernetes/index.html">Kubernetes</a></li>
</ul>
</li>
<li id="menu-item-8820" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-8820"><a href="../../newsletter/index.html">Newsletter</a></li>
<li id="menu-item-8821" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8821"><a href="https://rumen.free.bg/#contact">Book a Consultation</a></li>
</ul> </nav>
</div>
</header>
<div id="content" class="site-content container clearfix">
<section id="primary" class="content-area">
<main id="main" class="site-main" role="main">

<article id="post-7008" class="post-7008 post type-post status-publish format-standard has-post-thumbnail hentry category-grafana category-prometheus tag-grafana-slack tag-prometheus-alert tag-prometheus-slack tag-prometheus-url-monitoring tag-ssl-certificate-monitoring wpautop">
<header class="entry-header">
<h1 class="entry-title">SSL Expiry and Uptime Monitor for URLs &#8211; Prometheus Blackbox | Grafana</h1>
<div class="entry-meta"><span class="meta-date"> Updated on: <a href="index.html" title="10:11 am" rel="bookmark"><time class="entry-date published updated" datetime="April 19, 2022">April 19, 2022</time></a></span><span class="meta-author"> <span class="author vcard"><a class="url fn n" href="../author/admin/index.html" title="View all posts by Rumen Lishkov" rel="author">Rumen Lishkov</a></span></span></div>
</header>
<div class="entry-content clearfix">
<div class="ss-inline-share-wrapper ss-left-inline-content ss-small-icons ss-with-spacing ss-rounded-icons">
<div class="ss-inline-share-content">
<ul class="ss-social-icons-container">
<li class="">
<a href="#" data-ss-ss-link="https://www.facebook.com/sharer.php?t=SSL%20Expiry%20and%20Uptime%20Monitor%20for%20URLs%20%E2%80%93%20Prometheus%20Blackbox%20%7C%20Grafana&u=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana%2F" class="ss-facebook-color" rel="nofollow" data-ss-ss-network-id="facebook" data-ss-ss-post-id="7008" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" data-ss-ss-type="share" data-has-api="true">
<span class="ss-share-network-content">
<i class="ss ss-facebook"></i>
<span class="ss-network-count">
0
</span>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://twitter.com/intent/tweet?text=SSL+Expiry+and+Uptime+Monitor+for+URLs+%E2%80%93+Prometheus+Blackbox+%7C+Grafana&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana%2F" class="ss-twitter-color" rel="nofollow" data-ss-ss-network-id="twitter" data-ss-ss-post-id="7008" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-twitter"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="https://www.linkedin.com/shareArticle?title=SSL%20Expiry%20and%20Uptime%20Monitor%20for%20URLs%20%E2%80%93%20Prometheus%20Blackbox%20%7C%20Grafana&url=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana%2F&mini=true" class="ss-linkedin-color" rel="nofollow" data-ss-ss-network-id="linkedin" data-ss-ss-post-id="7008" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-linkedin"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="mailto:?body=https%3A%2F%2Fwww.middlewareinventory.com%2Fblog%2Fssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana%2F&subject=SSL%20Expiry%20and%20Uptime%20Monitor%20for%20URLs%20%E2%80%93%20Prometheus%20Blackbox%20%7C%20Grafana" class="ss-envelope-color" rel="nofollow" data-ss-ss-network-id="envelope" data-ss-ss-post-id="7008" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-envelope"></i>
</span>
</a>
</li>
<li class="">
<a href="#" data-ss-ss-link="#" class="ss-copy-color" rel="nofollow" data-ss-ss-network-id="copy" data-ss-ss-post-id="7008" data-ss-ss-location="inline_content" data-ss-ss-permalink="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" data-ss-ss-type="share">
<span class="ss-share-network-content">
<i class="ss ss-copy"></i>
</span>
</a>
</li>
</ul>
</div>
</div>
<p>In this article, we are going to see how to monitor your web services or URLs for their SSL expiry and uptime.</p>
<p>You can consider this as your SSL certificate expiry monitor and web service uptime monitor or URL Health check monitor for all your web services (URLs)</p>
<p>These are the set of tools we are going to need</p>
<ul>
<li>Prometheus</li>
<li>Prometheus Blackbox ( exporter for URL monitoring )</li>
<li>alert manager ( for creating alerts )</li>
<li>Grafana ( for visualization )</li>
<li>Slack (for alerts and notifications )</li>
</ul>
<p>We can go ahead and install all these tools on our chosen server. I am taking Centos7 but you can choose any Linux or windows as per your choice.</p>
<p>It is a lengthy article but do not be frightened. the result is going to be a milestone and solve some real problems.</p>
<p>this is what your end goal is going to look like. ( for some motivation )</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg"><img class="post-img alignnone wp-image-7029 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1035.png" alt="Grafana URL and SSL monitor" width="2560" height="1380" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-300x162.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1024x552.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-768x414.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1536x828.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-2048x1104.jpg 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7029 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" alt="Grafana URL and SSL monitor" width="2560" height="1380" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-300x162.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1024x552.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-768x414.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1536x828.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-2048x1104.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px" data-eio="l" /></noscript></a></p>
<p>And this is how your SSL certificate expiry alert is going to look like in SLACK</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png"><img class="alignnone size-full wp-image-7033 lazyload" src="../../wp-content/ewww/lazy/placeholder-1506x418.png" alt="" width="1506" height="418" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png 1506w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-300x83.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-1024x284.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-768x213.png 768w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-7033" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png" alt="" width="1506" height="418" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png 1506w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-300x83.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-1024x284.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-768x213.png 768w" sizes="(max-width: 1506px) 100vw, 1506px" data-eio="l" /></noscript></a></p>
<p>This is how your URL uptime monitor alert is going to look like</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM.png"><img class="alignnone size-full wp-image-7036 lazyload" src="../../wp-content/ewww/lazy/placeholder-1510x402.png" alt="uptime slack alert prometheus" width="1510" height="402" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM.png 1510w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-300x80.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-1024x273.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-768x204.png 768w" data-sizes="auto" /><noscript><img class="alignnone size-full wp-image-7036" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM.png" alt="uptime slack alert prometheus" width="1510" height="402" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM.png 1510w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-300x80.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-1024x273.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-27-at-9.54.15-AM-768x204.png 768w" sizes="(max-width: 1510px) 100vw, 1510px" data-eio="l" /></noscript></a></p>
<p>I can sense that you are already excited. Let&#8217;s go ahead and get this setup done with no further ado.</p>
<p>&nbsp;</p>
<div id="ez-toc-container" class="counter-hierarchy counter-decimal ez-toc-grey">
<div class="ez-toc-title-container">
<p class="ez-toc-title">Table of Contents</p>
<span class="ez-toc-title-toggle"><a class="ez-toc-pull-right ez-toc-btn ez-toc-btn-xs ez-toc-btn-default ez-toc-toggle"><i class="ez-toc-glyphicon ez-toc-icon-toggle"></i></a></span></div>
<nav><ul class="ez-toc-list"><li><a href="#Download_links" title="Download links">Download links</a></li><li><a href="#Prometheus_Installation" title="Prometheus Installation">Prometheus Installation</a></li><li><a href="#Alert_Manager_installation" title="Alert Manager installation">Alert Manager installation</a></li><li><a href="#Blackbox_Exporter_Installation" title="Blackbox Exporter Installation">Blackbox Exporter Installation</a></li><li><a href="#Change_the_ownership" title="Change the ownership">Change the ownership</a></li><li><a href="#Create_Services_for_the_tools" title="Create Services for the tools">Create Services for the tools</a><ul><li><a href="#Prometheusservice_file" title="Prometheus.service file">Prometheus.service file</a></li><li><a href="#alertmanagerservice_file" title="alertmanager.service file">alertmanager.service file</a></li><li><a href="#BlackBoxservice_file" title="BlackBox.service file">BlackBox.service file</a></li><li><a href="#Enable_Services_at_boot" title="Enable Services at boot">Enable Services at boot</a></li></ul></li><li><a href="#Starting_Prometheus_Alertmanager_blackbox" title="Starting Prometheus, Alertmanager, blackbox">Starting Prometheus, Alertmanager, blackbox</a></li><li><a href="#Validate_Prometheus_UI" title="Validate Prometheus UI">Validate Prometheus UI</a></li><li><a href="#Configuring_Prometheus" title="Configuring Prometheus">Configuring Prometheus</a><ul><li><a href="#Creating_BlackBox_job_in_Prometheus" title="Creating BlackBox job in Prometheus">Creating BlackBox job in Prometheus</a></li><li><a href="#Validate_the_configuration_before_Applying_promtool" title="Validate the configuration before Applying &#8211; promtool">Validate the configuration before Applying &#8211; promtool</a></li></ul></li><li><a href="#Configuring_Blackbox_exporter" title="Configuring Blackbox exporter">Configuring Blackbox exporter</a></li><li><a href="#Restart_Blackbox_and_Prometheus_and_Validate" title="Restart Blackbox and Prometheus and Validate">Restart Blackbox and Prometheus and Validate</a></li><li><a href="#Creating_Graphs_in_Prometheus_based_on_metrics_of_our_URLs" title="Creating Graphs in Prometheus based on metrics of our URLs">Creating Graphs in Prometheus based on metrics of our URLs</a></li><li><a href="#Configuring_Alerts_and_Rules_in_Prometheus" title="Configuring Alerts and Rules in Prometheus">Configuring Alerts and Rules in Prometheus</a><ul><li><a href="#Create_a_new_Rule_file" title="Create a new Rule file">Create a new Rule file</a></li><li><a href="#Adding_a_rule_into_prometheusyml" title="Adding a rule into prometheus.yml">Adding a rule into prometheus.yml</a></li><li><a href="#Enabling_the_alert_manager_in_prometheusyml" title="Enabling the alert manager in prometheus.yml">Enabling the alert manager in prometheus.yml</a></li><li><a href="#Validate_the_rule_file_and_prometheusyml_with_promtool" title="Validate the rule file and prometheus.yml with promtool">Validate the rule file and prometheus.yml with promtool</a></li></ul></li><li><a href="#Configuring_Alertmanager_Adding_Slack_route" title="Configuring Alertmanager &#8211; Adding Slack route">Configuring Alertmanager &#8211; Adding Slack route</a><ul><li><a href="#Validate_the_Rules_in_Prometheus_UI" title="Validate the Rules in Prometheus UI">Validate the Rules in Prometheus UI</a></li><li><a href="#Validate_the_Alerts_in_Prometheus_UI" title="Validate the Alerts in Prometheus UI">Validate the Alerts in Prometheus UI</a></li><li><a href="#Validate_your_Slack_Channel_for_notification" title="Validate your Slack Channel for notification">Validate your Slack Channel for notification</a></li></ul></li><li><a href="#Installing_Grafana" title="Installing Grafana">Installing Grafana</a></li><li><a href="#Conclusion" title="Conclusion">Conclusion</a></li></ul></nav></div>
<h2><span class="ez-toc-section" id="Download_links">Download links</span></h2>
<ul>
<li>Prometheus and Blackbox exporter, alert manager &#8211; Download <a href="https://prometheus.io/download/">here</a></li>
<li>Grafana &#8211; Download <a href="https://grafana.com/grafana/download">here</a></li>
</ul>
<h2></h2>
<h2><span class="ez-toc-section" id="Prometheus_Installation">Prometheus Installation</span></h2>
<p>once you have downloaded the binaries for your distribution, you just need to extract/untar to install.</p>
<p>I have used <code>/opt/prometheus</code> as my base directory to install Prometheus.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-linenumbers="false" data-enlighter-theme="bootstrap4">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="7701161005161903371e075a4640455a43425a414f5a4e45">[email&#160;protected]</a> /opt/prometheus ]$ ls -lrt
total 161676
-rwxr-xr-x 1 3434 3434 87729971 Oct 15  2020 prometheus
-rwxr-xr-x 1 3434 3434 77801407 Oct 15  2020 promtool
-rw-r--r-- 1 3434 3434      926 Oct 15  2020 prometheus.yml
drwxr-xr-x 2 3434 3434      173 Oct 15  2020 consoles
drwxr-xr-x 2 3434 3434       38 Oct 15  2020 console_libraries
-rw-r--r-- 1 3434 3434     3420 Oct 15  2020 NOTICE
-rw-r--r-- 1 3434 3434    11357 Oct 15  2020 LICENSE
drwxr-xr-x 4 root root       70 Nov  5  2020 data</pre>
<p>you will see a list of files like shown above.</p>
<p>the primary configuration file is <code>Prometheus.yml</code> which we need to update later.</p>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2><span class="ez-toc-section" id="Alert_Manager_installation">Alert Manager installation</span></h2>
<p>Like Prometheus, an alert manager is also distributed as a tar.gz file. you can extract it into any directory</p>
<p>in my case it is <code>/opt/alertmanager</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-linenumbers="false" data-enlighter-theme="bootstrap4">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="6614090912260f164b5751544b52534b505e4b5f54">[email&#160;protected]</a> /opt/alertmanager]# ls -lrt
total 47788
-rwxr-xr-x 1 3434 3434 27074026 Jun  2 07:51 alertmanager
-rwxr-xr-x 1 3434 3434 21839682 Jun  2 07:52 amtool
-rw-r--r-- 1 3434 3434      457 Jun  2 07:56 NOTICE
-rw-r--r-- 1 3434 3434    11357 Jun  2 07:56 LICENSE
-rw-r--r-- 1 3434 3434      348 Jun  2 07:56 alertmanager.yml</pre>
<p>you will see a set of files and <code>alertmanager.yml</code> is the primary configuration file which we will update later.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Blackbox_Exporter_Installation">Blackbox Exporter Installation</span></h2>
<p>Just like the other two previous installations, we need to extract the binaries of BlackBox into a directory</p>
<p>in my case it is <code>/opt/blackbox</code></p>
<p>upon extracting you will see a list of files like this</p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-linenumbers="false" data-enlighter-theme="bootstrap4">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="89fbe6e6fdc9e0f9a4b8bebba4bdbca4bfb1a4b0bb">[email&#160;protected]</a> /opt/blackbox]# ls -lrt
total 17812
-rwxr-xr-x 1 3434 3434 18217362 May 10 12:57 blackbox_exporter
-rw-r--r-- 1 3434 3434       94 May 10 13:04 NOTICE
-rw-r--r-- 1 3434 3434    11357 May 10 13:04 LICENSE
-rw-r--r-- 1 3434 3434      672 May 10 13:04 blackbox.yml
[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="98eaf7f7ecd8f1e8b5a9afaab5acadb5aea0b5a1aa">[email&#160;protected]</a> blackbox]#</pre>
<p>in this <code>blackbox.yml</code> is the primary configuration file</p>
<h2></h2>
<h2><span class="ez-toc-section" id="Change_the_ownership">Change the ownership</span></h2>
<p>After extracting/installing, you can see the ownership of these files is set to some numeric user.</p>
<p>You have to change the ownership of these installation directories to your desired user.</p>
<p>you can either create individual accounts for products like <code>prometheus</code>  , <code>blackbox</code> etc.</p>
<p>but I don&#8217;t see any issues in running these products as a <code>root</code>  so am changing the ownership of all these directories and their contents to <code>root</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="raw" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">chown -R root:root /opt/prometheus
chown -R root:root /opt/blackbox
chown -R root:root /opt/alertmanager</pre>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2><span class="ez-toc-section" id="Create_Services_for_the_tools">Create Services for the tools</span></h2>
<p>Now, as we have installed the three tools <code>promethues, blackbox exporter, alert manager</code> we can go ahead and start them.</p>
<p>the proper way to start these tools is with a service and it can be set up by creating a <code>.service</code> file under <code>/etc/systemd/system</code></p>
<p>you have to create three files</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">touch prometheus.service
touch alertmanager.service
touch blackbox.service</pre>
<p>once the files are created, you can open the files with <code>vi</code> or <code>nano</code> and update the contents</p>
<p>I have used <code>root</code> as a service user. if you have individual accounts created for these services you can update the <code>User</code> variable on the file before copying</p>
<h3><span class="ez-toc-section" id="Prometheusservice_file">Prometheus.service file</span></h3>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">[Unit]
Description=Promethues
After=network.target

[Service]
Type=simple
ExecStart=/opt/prometheus/prometheus --config.file=/opt/prometheus/prometheus.yml
TimeoutStartSec=0
User=root</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="alertmanagerservice_file">alertmanager.service file</span></h3>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">[Unit]
Description=AlertManager
After=network.target

[Service]
Type=simple
ExecStart=/opt/alertmanager/alertmanager --config.file=/opt/alertmanager/alertmanager.yml
TimeoutStartSec=0
User=root</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="BlackBoxservice_file">BlackBox.service file</span></h3>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">[Unit]
Description=Blackbox
After=network.target

[Service]
Type=simple
ExecStart=/opt/blackbox/blackbox_exporter --config.file=/opt/blackbox/blackbox.yml
TimeoutStartSec=0
User=root</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Enable_Services_at_boot">Enable Services at boot</span></h3>
<p>As you have created the service you can enable them to start at boot. as a startup script.</p>
<p>You can do this simply by enabling them using <code>systemctl</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">systemctl enable prometheus.service
systemctl enable blackbox.service
systemctl enable alertmanager.service</pre>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Starting_Prometheus_Alertmanager_blackbox">Starting Prometheus, Alertmanager, blackbox</span></h2>
<p>Now you can go ahead and start the service with the default configuration and validate if they can start properly.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">sudo service prometheus start
sudo service alertmanager start
sudo service blackbox start</pre>
<p>you can use <code>ps -eaf</code> or <code>service status</code> commands to validate if the services are running fine</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2><span class="ez-toc-section" id="Validate_Prometheus_UI">Validate Prometheus UI</span></h2>
<p>Now validate, if the Prometheus UI is up and running on port 9090</p>
<p>you can use curl</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">curl http://localhost:9090/graph</pre>
<p>or you can reach from the external world if your security group and firewall allows it</p>
<p>for centos users, you need to additionally enable the port on firewall-cmd <code></code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"># to add a new port to public zone
$ sudo firewall-cmd --zone=public --permanent --add-port=9090/tcp

# to reload the configuration for the changes to take effect
$ sudo firewall-cmd --reload

# to validate if the port is added
$ sudo firewall-cmd --list-all</pre>
<p>the UI looks like this without any graphs</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM.png"><img class="post-img alignnone wp-image-7010 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1219.png" alt="Prometheus UI" width="1984" height="1260" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM.png 1984w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-300x191.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-1024x650.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-768x488.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-1536x975.png 1536w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7010 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM.png" alt="Prometheus UI" width="1984" height="1260" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM.png 1984w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-300x191.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-1024x650.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-768x488.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.18.48-AM-1536x975.png 1536w" sizes="(max-width: 1984px) 100vw, 1984px" data-eio="l" /></noscript></a></p>
<h2></h2>
<h2><span class="ez-toc-section" id="Configuring_Prometheus">Configuring Prometheus</span></h2>
<p>At this stage, we have installed all the necessary tools and validated the UI.</p>
<p>Now let&#8217;s configure Prometheus to work with the alert manager and BlackBox exporter.</p>
<p>Prometheus is well known for its <code>pull</code> strategy and it pulls the metrics from various exporters and it has proven to be scalable and efficient in certain cases.</p>
<p>If you are having questions about why the pull approach is being used by Prometheus <a href="https://prometheus.io/blog/2016/07/23/pull-does-not-scale-or-does-it/">read this article</a></p>
<p>Our first objective is to make Prometheus pull metrics from <code>blackbox</code> exporter</p>
<h3></h3>
<h3><span class="ez-toc-section" id="Creating_BlackBox_job_in_Prometheus">Creating BlackBox job in Prometheus</span></h3>
<p>Go to the installation directory of our Prometheus  in my case it is <code>/opt/prometheus</code> and edit the <code>prometheus.yml</code> file</p>
<p>under <code>scrape_configs</code> add a new job  named <code>blackbox</code> with the following snippet</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">- job_name: 'blackbox'
  metrics_path: /probe
  params:
   module: [http_2xx] # Look for a HTTP 200 response.
  static_configs:
  - targets:
     - https://rumen.free.bg
     - https://www.google.com
     - https://middlewareinventory.com
     - https://devopsjunction.com
  relabel_configs:
    - source_labels: [__address__]
      target_label: __param_target
    - source_labels: [__param_target]
      target_label: instance
    - target_label: __address__
      replacement: 127.0.0.1:9115</pre>
<p>you can change the URLs of your choice. but the <code>relabel_configs</code> should remain the same.</p>
<h3><span class="ez-toc-section" id="Validate_the_configuration_before_Applying_promtool"><span style="color: #003366;">Validate the configuration before Applying &#8211; promtool</span></span></h3>
<p>As we have made changes in <code>prometheus.yml</code> file.  It is always recommended to validate it before and restarting or reloading Prometheus</p>
<p>Prometheus comes with a tool named <code>promtool</code> which is available on the same directory where you have installed Prometheus</p>
<p>in my case it is <code>/opt/prometheus</code></p>
<p>you can run the <code>promtool check config</code> command to validate the file.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="c5b7aaaab185acb5e8f4f2f7e8f1f0e8f3fde8fcf7">[email&#160;protected]</a> ]$ /opt/prometheus/promtool check config /opt/prometheus/prometheus.yml
Checking /opt/prometheus/prometheus.yml
  SUCCESS: 0 rule files found</pre>
<p>In case of no errors found. you will see <code>SUCCESS</code> a message like above.</p>
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3398911159151128" data-ad-slot="1946393371"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2><span class="ez-toc-section" id="Configuring_Blackbox_exporter">Configuring Blackbox exporter</span></h2>
<p>the default BlackBox is designed to support <code>ipv6</code> which could create issues when we are using non <code>ipv6</code> targets or system</p>
<p>So it is recommended to go with <code>ipv4</code> for now.</p>
<p>In this step, we are going to update the default <code>blackbox.yml</code> configuration with <code>ipv4</code> preference</p>
<p>we are going to add these two lines in the <code>http</code> probe</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">http:
     preferred_ip_protocol: ip4</pre>
<p>Here is the full configuration file for your reference. you can copy this and paste it to your blackbox.yml file.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">modules:
  http_2xx:
    prober: http
    http:
     preferred_ip_protocol: ip4
  http_post_2xx:
    prober: http
    http:
      method: POST
  tcp_connect:
    prober: tcp
  pop3s_banner:
    prober: tcp
    tcp:
      query_response:
      - expect: "^+OK"
      tls: true
      tls_config:
        insecure_skip_verify: false
  ssh_banner:
    prober: tcp
    tcp:
      query_response:
      - expect: "^SSH-2.0-"
      - send: "SSH-2.0-blackbox-ssh-check"
  irc_banner:
    prober: tcp
    tcp:
      query_response:
      - send: "NICK prober"
      - send: "USER prober prober prober :prober"
      - expect: "PING :([^ ]+)"
        send: "PONG ${1}"
      - expect: "^:[^ ]+ 001"
  icmp:</pre>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Restart_Blackbox_and_Prometheus_and_Validate">Restart Blackbox and Prometheus and Validate</span></h2>
<p>Now it is time to restart our <code>blackbox</code> and <code>prometheus</code> as we have made changes to the configuration files of both.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">sudo service prometheus restart
sudo service blackbox restart</pre>
<p>Before we try to access the BlackBox and Prometheus UI interface.</p>
<p>we can validate if the ports are listening for both services.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="shell" data-enlighter-linenumbers="false"># with ss command
[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="7c0e1313083c150c514d4b4e514849514a4451454e">[email&#160;protected]</a> blackbox]$ ss -tunlp|egrep '9115|9090'
tcp    LISTEN     0      128    [::]:9115               [::]:*                   users:(("blackbox_export",pid=4548,fd=3))
tcp    LISTEN     0      128    [::]:9090               [::]:*                   users:(("prometheus",pid=3302,fd=10))

# with netstat 
[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="9ceef3f3e8dcf5ecb1adabaeb1a8a9b1aaa4b1a5ae">[email&#160;protected]</a> blackbox]$ netstat -tunlp|egrep '9115|9090'
tcp6       0      0 :::9115                 :::*                    LISTEN      4548/blackbox_expor
tcp6       0      0 :::9090                 :::*                    LISTEN      3302/prometheus</pre>
<p>as you can see we are validating if the ports <code>9115</code> (blackbox_exporter) and <code>9090</code> (Prometheus) are listening.</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM.png"><img class="post-img alignnone wp-image-7014 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1212x1078.png" alt="blackbox exporter" width="1212" height="1078" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM.png 1212w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-300x267.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-1024x911.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-768x683.png 768w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7014 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM.png" alt="blackbox exporter" width="1212" height="1078" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM.png 1212w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-300x267.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-1024x911.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-8.08.30-AM-768x683.png 768w" sizes="(max-width: 1212px) 100vw, 1212px" data-eio="l" /></noscript></a></p>
<p>For some reason, if the black box exporter not able to reach the target.  the result would be marked as <code>Failure</code></p>
<p>you can use the corresponding <code>Logs</code> to investigate the Failure.</p>
<p>Now let us validate Prometheus and see if these targets are showing up, by going to <code>http://server_name:9090/targets</code></p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM.png"><img class="post-img alignnone wp-image-7015 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x885.png" alt="prometheus blackbox" width="3336" height="1538" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM.png 3336w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-300x138.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-1024x472.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-768x354.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-1536x708.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-2048x944.png 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7015 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM.png" alt="prometheus blackbox" width="3336" height="1538" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM.png 3336w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-300x138.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-1024x472.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-768x354.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-1536x708.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-10.56.29-AM-2048x944.png 2048w" sizes="(max-width: 3336px) 100vw, 3336px" data-eio="l" /></noscript></a></p>
<p>you can see our URLs in <code>target</code> and as an <code>instance</code></p>
<p>the <code>State</code> will be marked as down in case of failure to reach the target.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Creating_Graphs_in_Prometheus_based_on_metrics_of_our_URLs">Creating Graphs in Prometheus based on metrics of our URLs</span></h2>
<p>In Prometheus UI, click on <code>graph</code> menu and choose any of the probes on the query block. for example <code>probe_http_duration_seconds</code> and click on Execute</p>
<p>you will see some graph given below.</p>
<p><strong><em><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM.png"><img class="post-img alignnone wp-image-7016 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x989.png" alt="Prometheus Graph" width="3792" height="1954" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM.png 3792w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-300x155.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-1024x528.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-768x396.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-1536x791.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-2048x1055.png 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7016 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM.png" alt="Prometheus Graph" width="3792" height="1954" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM.png 3792w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-300x155.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-1024x528.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-768x396.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-1536x791.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-11.20.48-AM-2048x1055.png 2048w" sizes="(max-width: 3792px) 100vw, 3792px" data-eio="l" /></noscript></a></em></strong></p>
<p>you can try different probes and try to create graphs of your interest.</p>
<p>Now we are successfully monitoring our web services (URLs)</p>
<h2></h2>
<h2><span class="ez-toc-section" id="Configuring_Alerts_and_Rules_in_Prometheus">Configuring Alerts and Rules in Prometheus</span></h2>
<p>As part of Alert triggering, we are going to setup alerts for two scenarios</p>
<ul>
<li>SSLCertExpiringSoon ( with in 4 days )</li>
<li>TargetUrlDown (Endpoint down or returning invalid response)</li>
</ul>
<p>To generate alerts we need to create rules in Prometheus first.</p>
<p>If the rules are satisfied <code>Prometheus</code> would send the alert to <code>AlertManager</code> which can further be sent as <code>email</code> or <code>slack</code> notifications</p>
<p>Perform the following steps to create a new rule</p>
<h3><span class="ez-toc-section" id="Create_a_new_Rule_file">Create a new Rule file</span></h3>
<p>Go to Prometheus installation directory i.e <code>/opt/prometheus</code> and create a new directory named <code>rules</code></p>
<p>under rules directory. create a new file named <code>blackbox-rules.yml</code></p>
<p>copy the following content and paste it.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">groups:
  - name: Blackbox rules
    rules:
      - alert: SSLCertExpiringSoon
        expr: probe_ssl_earliest_cert_expiry - time() &lt; 86400 * 4
        for: 1m
        labels:
          severity: warning
        annotations:
          description: "TLS certificate will expire in {{ $value | humanizeDuration }} (instance {{ $labels.instance }})"

      - alert: EndpointDown
        expr: probe_success == 0
        for: 10m
        labels:
          severity: "critical"
        annotations:
          summary: "Endpoint {{ $labels.instance }} down"</pre>
<p>As you can see in the preceding snippet, we are having two alerts defined <code>SSLCertExpiry</code> and <code>EndPoint</code> down.</p>
<p>both of these alerts takes black box probes as the source data</p>
<p>SSLCert Expiry alert is using <code>probe_ssl_earliest_cert_expiry</code> and Endpoint down uses <code>probe_success</code></p>
<p>for the SSL Cert Expiry: If the earliest cert expiry value is below  <code>86400 * 4</code>   <strong>4 days</strong> it would trigger an alert.</p>
<p>If you want to increase the number of days. you can change <code>4</code> to the number of days of your choice.</p>
<p>Here, 86400 represents the seconds in a day <code>24 hours = 86400 seconds</code></p>
<p>Now let us map this rule into Prometheus configuration</p>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Adding_a_rule_into_prometheusyml">Adding a rule into prometheus.yml</span></h3>
<p>the rule file can now be added into our <code>prometheus.yml</code> configuration file</p>
<p>under the <code>rule_files</code> add our recently created rule filename <code>rules/blackbox-rules.yml</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">rule_files:
   - "rules/blackbox-rules.yml"</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Enabling_the_alert_manager_in_prometheusyml">Enabling the alert manager in prometheus.yml</span></h3>
<p>While you are adding new rules. you have to also enable the <code>alertmanager</code> configuration which is disabled by default</p>
<p>It should point to the <code>localhost:9093</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"># Alertmanager configuration
alerting:
  alertmanagers:
  - static_configs:
    - targets:
       - localhost:9093</pre>
<p>&nbsp;</p>
<p>The Final prometheus.yml file with alert manager and rules</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"># my global config
global:
  scrape_interval:     120s # Set the scrape interval to every 15 seconds. Default is every 1 minute.
  evaluation_interval: 120s # Evaluate rules every 15 seconds. The default is every 1 minute.
  # scrape_timeout is set to the global default (10s).

# Alertmanager configuration
alerting:
  alertmanagers:
  - static_configs:
    - targets:
       - localhost:9093

# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.
rule_files:
   - "rules/blackbox-rules.yml"

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.
  - job_name: 'prometheus'

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
    - targets: ['localhost:9090']

  - job_name: 'blackbox'
    metrics_path: /probe
    params:
     module: [http_2xx] # Look for a HTTP 200 response.
    static_configs:
    - targets:
       - https://rumen.free.bg
       - https://www.google.com
       - https://middlewareinventory.com
       - https://devopsjunction.com
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9115</pre>
<p>&nbsp;</p>
<h3><span class="ez-toc-section" id="Validate_the_rule_file_and_prometheusyml_with_promtool">Validate the rule file and prometheus.yml with promtool</span></h3>
<p>Now after making the changes, you can re-launch the <code>promtool</code> to validate</p>
<p>You should see <code>SUCCESS</code> and the number of rules displayed as shown below</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false"><a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="72001d1d06321b025f4345405f46475f444a5f4b40">[email&#160;protected]</a> ]# /opt/prometheus/promtool check config /opt/prometheus/prometheus.yml
Checking /opt/prometheus/prometheus.yml
  SUCCESS: 1 rule files found

Checking /opt/prometheus/rules/blackbox-rules.yml
  SUCCESS: 2 rules found</pre>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Configuring_Alertmanager_Adding_Slack_route">Configuring Alertmanager &#8211; Adding Slack route</span></h2>
<p>Now go to the alertmanager installation location and update the <code>alertmanager.yml</code> file with the following content.</p>
<p>Make sure you update the <code>slack_api_url</code> and the <code>channel</code> name according to your requirement.</p>
<pre class="EnlighterJSRAW" data-enlighter-language="yaml" data-enlighter-theme="bootstrap4" data-enlighter-linenumbers="false">global:
 resolve_timeout: 1m
 slack_api_url: https://hooks.slack.com/services/THISISSAMPLE/URI

route:
 receiver: 'slack-notifications'

receivers:
- name: 'slack-notifications'
  slack_configs:
    - channel: '#devops'
      send_resolved: true
      icon_url: https://avatars3.githubusercontent.com/u/3380462
      title: |-
        [{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .CommonLabels.alertname }} for {{ .CommonLabels.job }}
        {{- if gt (len .CommonLabels) (len .GroupLabels) -}}
          {{" "}}(
          {{- with .CommonLabels.Remove .GroupLabels.Names }}
            {{- range $index, $label := .SortedPairs -}}
              {{ if $index }}, {{ end }}
              {{- $label.Name }}="{{ $label.Value -}}"
            {{- end }}
          {{- end -}}
          )
        {{- end }}
      text: &gt;-
        @here Please check these alerts from Prometheus
        {{ range .Alerts -}}
        *Alert:* {{ .Annotations.title }}{{ if .Labels.severity }} - `{{ .Labels.severity }}`{{ end }}

        *Description:* {{ .Annotations.description }}

        *Details:*
          {{ range .Labels.SortedPairs }} • *{{ .Name }}:* `{{ .Value }}`
          {{ end }}
        {{ end }}</pre>
<p>to know how to <a href="https://api.slack.com/messaging/webhooks">create slack webhooks</a> <a href="https://api.slack.com/messaging/webhooks">refer to this article</a></p>
<p>&nbsp;</p>
<p>Now you can restart the <code>alert manager</code> service</p>
<p>validate if all the ports are open and the services are listening using <code>ss</code></p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="5a2835352e1a332a776b6d68776e6f776c62776368">[email&#160;protected]</a> rules]# ss -tunlp|egrep '9115|9090|9093'
tcp    LISTEN     0      128    [::]:9115               [::]:*                   users:(("blackbox_export",pid=7841,fd=3))
tcp    LISTEN     0      128    [::]:9090               [::]:*                   users:(("prometheus",pid=8507,fd=9))
tcp    LISTEN     0      128    [::]:9093               [::]:*                   users:(("alertmanager",pid=13439,fd=8))</pre>
<p>&nbsp;</p>
<p>To Generate some Dummy alerts and to check if the alertmanager is working and slack notifications are triggering.</p>
<p>I have updated the <code>blackbox-rules.yml</code> file with 300 days instead of 4 days</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">- alert: SSLCertExpiringSoon
        expr: probe_ssl_earliest_cert_expiry - time() &lt; 86400 * 300</pre>
<h3></h3>
<h3><span class="ez-toc-section" id="Validate_the_Rules_in_Prometheus_UI">Validate the Rules in Prometheus UI</span></h3>
<p>Go to <code>http://serverip:9090/rules</code> to validate the rules</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-scaled.jpg"><img class="post-img alignnone wp-image-7019 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x733.png" alt="rules prometheus" width="2560" height="977" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-scaled.jpg" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-300x115.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-1024x391.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-768x293.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-1536x586.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-2048x782.jpg 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7019 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-scaled.jpg" alt="rules prometheus" width="2560" height="977" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-300x115.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-1024x391.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-768x293.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-1536x586.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.18-PM-2048x782.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px" data-eio="l" /></noscript></a></p>
<h3><span class="ez-toc-section" id="Validate_the_Alerts_in_Prometheus_UI">Validate the Alerts in Prometheus UI</span></h3>
<p>Go to <code>http://serverip:9090/alerts</code> to see the alerts triggering</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM.png"><img class="post-img alignnone wp-image-7020 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x713.png" alt="prometheus alerts" width="3836" height="1424" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM.png 3836w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-300x111.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-1024x380.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-768x285.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-1536x570.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-2048x760.png 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7020 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM.png" alt="prometheus alerts" width="3836" height="1424" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM.png 3836w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-300x111.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-1024x380.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-768x285.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-1536x570.png 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-1.16.28-PM-2048x760.png 2048w" sizes="(max-width: 3836px) 100vw, 3836px" data-eio="l" /></noscript></a></p>
<h3><span class="ez-toc-section" id="Validate_your_Slack_Channel_for_notification">Validate your Slack Channel for notification</span></h3>
<p>If you have done everything right, you should see a message in your configured slack channel.</p>
<p>as per my <code>alertmanager.yml</code> configuration it is <code>devops</code> channel</p>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png"><img class="post-img alignnone wp-image-7033 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1506x418.png" alt="Slack Alert Prometheus" width="1506" height="418" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png 1506w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-300x83.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-1024x284.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-768x213.png 768w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7033 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png" alt="Slack Alert Prometheus" width="1506" height="418" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM.png 1506w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-300x83.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-1024x284.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.40.44-PM-768x213.png 768w" sizes="(max-width: 1506px) 100vw, 1506px" data-eio="l" /></noscript></a></p>
<p>you can customize the message or the icons as per your need.</p>
<p>so we have met our objective of setting up a URL uptime and SSL expiry monitor.</p>
<p>There is one more missing piece which is visualizing our victory. with Grafana.</p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Installing_Grafana">Installing Grafana</span></h2>
<p>you can download Grafana from <a href="https://grafana.com/grafana/download">here</a> and install on the same system where our other three products are running</p>
<p>Or simply you can type <code>yum install grafana</code> that would take care installing Grafana</p>
<p>start <code>grafana-server</code>by issuing the following commands</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sudo systemctl daemon-reload 
sudo systemctl start grafana-server 
sudo systemctl status grafana-server</pre>
<p>the <code>status</code> command would show you the status the location of the configuration <code>ini</code> file</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">[<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="f1839e9e85b19881dcc0c6c3dcc5c4dcc7c9dcc8c3">[email&#160;protected]</a> system]# systemctl status grafana-server
● grafana-server.service - Grafana instance
   Loaded: loaded (/usr/lib/systemd/system/grafana-server.service; enabled; vendor preset: disabled)
   Active: active (running) since Sat 2021-06-26 12:28:06 UTC; 2min 33s ago
     Docs: http://docs.grafana.org
 Main PID: 28798 (grafana-server)
   CGroup: /system.slice/grafana-server.service
           └─28798 /usr/sbin/grafana-server --config=/etc/grafana/grafana.ini --pidfile=/var/run/grafana/grafana-server.pid --pa...

Jun 26 12:28:06 ip-172-45-68-92 grafana-server[28798]: t=2021-06-26T12:28:06+0000 lvl=info msg="Executing migration" logger...kind"
Jun 26 12:28:06 ip-172-45-68-92 grafana-server[28798]: t=2021-06-26T12:28:06+0000 lvl=info msg="Executing migration" logger...e v1"
Jun 26 12:28:06 ip-172-45-68-92 grafana-server[28798]: t=2021-06-26T12:28:06+0000 lvl=info msg="Executing migration" logger...n_id"
Jun 26 12:28:06 ip-172-45-68-92 grafana-server[28798]: t=2021-06-26T12:28:06+0000 lvl=info msg="migrations completed" logge...457ms</pre>
<p>&nbsp;</p>
<p>enable grafana-server as a service to start at boot by issuing the following command</p>
<pre class="EnlighterJSRAW" data-enlighter-language="generic">sudo systemctl enable grafana-server</pre>
<p>Now try to reach grafana UI and Login</p>
<ol>
<li>Open your web browser and go to http://localhost:3000/. The default HTTP port that Grafana listens to is <code>3000</code> unless you have configured a different port.</li>
<li>On the login page, enter <code>admin</code> for username and password.</li>
<li>Click <strong>Log in</strong>. If login is successful, then you will see a prompt to change the password.</li>
<li>Click <strong>OK</strong> on the prompt, then change your password.</li>
</ol>
<p>Once logged in let us create a new dashboard.</p>
<ol>
<li>Go to dashboards by clicking on the <code>Dashboards</code> option on the left navigation menu</li>
<li>Click on <code>Manage</code></li>
<li>Click on <code>Import</code></li>
<li>Enter the number <code>7587</code> on the text box under import via grafana.com and click on Load<a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM.png"><img class="alignnone wp-image-7028 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1614x1288.png" alt="Grafana Import" width="1614" height="1288" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM.png" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM.png 1614w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-300x239.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-1024x817.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-768x613.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-1536x1226.png 1536w" data-sizes="auto" /><noscript><img class="alignnone wp-image-7028 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM.png" alt="Grafana Import" width="1614" height="1288" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM.png 1614w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-300x239.png 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-1024x817.png 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-768x613.png 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.09.25-PM-1536x1226.png 1536w" sizes="(max-width: 1614px) 100vw, 1614px" data-eio="l" /></noscript></a></li>
<li>Choose the default  <code>prometheus</code> as the data source. since both Grafana and Prometheus runs on the same system you don&#8217;t have to add Prometheus data source explicitly.</li>
</ol>
<p><a href="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg"><img class="post-img alignnone wp-image-7029 size-full lazyload" src="../../wp-content/ewww/lazy/placeholder-1920x1035.png" alt="Grafana URL and SSL monitor" width="2560" height="1380" data-src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" loading="lazy" data-srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-300x162.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1024x552.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-768x414.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1536x828.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-2048x1104.jpg 2048w" data-sizes="auto" /><noscript><img class="post-img alignnone wp-image-7029 size-full" src="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg" alt="Grafana URL and SSL monitor" width="2560" height="1380" srcset="../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-scaled.jpg 2560w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-300x162.jpg 300w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1024x552.jpg 1024w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-768x414.jpg 768w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-1536x828.jpg 1536w, ../../wp-content/uploads/2021/06/Screenshot-2021-06-26-at-6.28.43-PM-2048x1104.jpg 2048w" sizes="(max-width: 2560px) 100vw, 2560px" data-eio="l" /></noscript></a></p>
<p>&nbsp;</p>
<h2><span class="ez-toc-section" id="Conclusion">Conclusion</span></h2>
<p>Hope you were able to follow and install all the necessary tools such as <code>prometheus alertmanager</code> , <code>blackbox</code> and <code>grafana</code> and get your alerting and slack integration setup.</p>
<p>I am sure this would help you solve some major issues in your infrastructure.</p>
<a href="../../wp-content/uploads/2021/09/DaaS.svg"><img class="post-img lazyload" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1047 415'%3E%3C/svg%3E" alt="gritfy" width="1047" height="415" class="post-img lazyload" data-src="../../wp-content/uploads/2021/09/DaaS.svg" loading="lazy" /><noscript><img class="post-img" src="../../wp-content/uploads/2021/09/DaaS.svg" alt="gritfy" width="1047" height="415" class="alignnone size-full wp-image-6623" data-eio="l" /></noscript></a>
<p>&nbsp;</p>
<p>Cheers</p>
<p>Rumen Lishkov</p>
<div id="postfollow">
<a href='https://ko-fi.com/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==' border='0' alt='Buy Me a Coffee at ko-fi.com' data-src="https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2" loading="lazy" class="lazyload" /><noscript><img height='46' style='border:0px;height:46px;width: 186px' src='https://az743702.vo.msecnd.net/cdn/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' data-eio="l" /></noscript></a>
<p>Follow us on<a href="https://www.facebook.com/rumenlishkov">Facebook</a> or<a href="https://www.twitter.com/mwinventory">Twitter</a>
</br>
For more practical videos and tutorials. <a href="https://www.youtube.com/kiss2mark">Subscribe to our channel</a>
</br>
Find me on Linkedin <a href="https://www.linkedin.com/in/rumen-lishkov/">My Profile</a>
</br>
</i>For any Consultation or to hire us <a href="../../cdn-cgi/l/email-protection.html#bbd3ded7d7d4fbdcc9d2cfddc295d8d4d6"> <span class="__cf_email__" data-cfemail="cfa7aaa3a3a08fa8bda6bba9b6e1aca0a2">[email&#160;protected]</span></a>
</br>
If you like this article. Show your Support! <a href="https://ko-fi.com/middlewareinventory">Buy me a Coffee.</a>
</br>
</p>
<p style="color: palevioletred !important;">Signup for Exclusive "Subscriber-only" Content</p>
<div class="emaillist">
<form action="#" method="post" class="es_subscription_form es_shortcode_form" id="es_subscription_form_1657192217" data-source="ig-es">
<div class="es-field-wrap"><label>Name*<br /><input type="text" name="name" class="ig_es_form_field_name" placeholder="" value="" required="required" /></label></div><div class="es-field-wrap"><label>Email*<br /><input class="es_required_field es_txt_email ig_es_form_field_email" type="email" name="email" value="" placeholder="" required="required" /></label></div><input type="hidden" name="lists[]" value="1" /><input type="hidden" name="form_id" value="3" />
<input type="hidden" name="es_email_page" value="7008" />
<input type="hidden" name="es_email_page_url" value="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" />
<input type="hidden" name="status" value="Unconfirmed" />
<input type="hidden" name="es-subscribe" id="es-subscribe" value="915ddf1a10" />
<label style="position:absolute;top:-99999px;left:-99999px;z-index:-99;"><input type="email" name="es_hp_email" class="es_required_field" tabindex="-1" autocomplete="-1" value="" /></label>
<input type="submit" name="submit" class="es_subscription_form_submit es_submit_button es_textbox_button" id="es_subscription_form_submit_1657192217" value="Subscribe" />
<span class="es_spinner_image" id="spinner-image"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Loading" data-src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" loading="lazy" class="lazyload" /><noscript><img src="../../wp-content/plugins/email-subscribers/lite/public/images/spinner.gif" alt="Loading" data-eio="l" /></noscript></span>
</form>
<span class="es_subscription_message" id="es_subscription_message_1657192217"></span>
</div>
</div>
<hr>
<div class='rp4wp-related-posts'>
<h3>More from Middleware Inventory</h3>
<ul>
<li><div class='rp4wp-related-post-image'>
<a href='../f5-irule-log-tls-version-ssl-handshake-information/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/02/f12cookie-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/02/f12cookie-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../f5-irule-log-tls-version-ssl-handshake-information/index.html'>F5 irule to log TLS version and SSL Handshake Information</a><p>The Overview In this post, we are going to share the irule we have recently designed for one&nbsp;of our requirement. We basically wanted to log when the client is using a weak cipher or deprecated protocols like SSLV3, TLSv1.0 or TLSv1.1 This iRule&nbsp;would help you get an insight on what&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../how-to-decrypt-https-traffic/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="HTTPS Debug" data-src="../../wp-content/uploads/2020/10/HTTPS_icon-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2020/10/HTTPS_icon-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="HTTPS Debug" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../how-to-decrypt-https-traffic/index.html'>How to decrypt HTTPS traffic using SSL Proxy</a><p>Introduction to a historical problem Are you a Developer, DevOps Engineer, Infrastructure Engineer, Middleware admin then you might have had this question at least once in your career? How to see what is being transmitted between the Server to Server [or] Client to Server over HTTP or HTTPS traffic like&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../manage-and-monitor-kubernetes-with-ease-lens-ide/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="Kubernetes Monitoring" data-src="../../wp-content/uploads/2021/05/Screenshot-2021-05-03-at-1.45.32-AM-150x150.jpg" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2021/05/Screenshot-2021-05-03-at-1.45.32-AM-150x150.jpg" class="attachment-thumbnail size-thumbnail wp-post-image" alt="Kubernetes Monitoring" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../manage-and-monitor-kubernetes-with-ease-lens-ide/index.html'>Manage and Monitor Kubernetes with ease - Lens IDE</a><p>I came across a wonderful solution for managing and monitoring the Kubernetes cluster and wanted to share my experience in this post with screenshots. While there are a lot of ways to monitor the Kubernetes cluster like setting up Prometheus, Grafana Deamon set and sidecar container strategies etc. All of&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-image'>
<a href='../monitor-weblogic-stuck-threads-wlst-script/index.html'><img width="150" height="150" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 150'%3E%3C/svg%3E" class="attachment-thumbnail size-thumbnail wp-post-image lazyload" alt="" data-src="../../wp-content/uploads/2019/03/hello-there-im-stuck-9997110-150x150.png" loading="lazy" /><noscript><img width="150" height="150" src="../../wp-content/uploads/2019/03/hello-there-im-stuck-9997110-150x150.png" class="attachment-thumbnail size-thumbnail wp-post-image" alt="" data-eio="l" /></noscript></a></div>
<div class='rp4wp-related-post-content'>
<a href='../monitor-weblogic-stuck-threads-wlst-script/index.html'>Monitor Weblogic Stuck Threads - WLST Script</a><p>In this post, we are going to share the Weblogic Stuck Thread Monitoring Script which will automatically trigger an email notification and create heap and thread dumps when the maximum Thread stuck count has reached the threshold ( currently set to 10 but can be modified.) This is written with&hellip;</p></div>
</li>
</ul>
</div>
</div>
<footer class="entry-footer">
<div class="entry-tags clearfix">
<span class="meta-tags">
<a href="../tag/grafana-slack/index.html" rel="tag">grafana slack</a><a href="../tag/prometheus-alert/index.html" rel="tag">prometheus alert</a><a href="../tag/prometheus-slack/index.html" rel="tag">prometheus slack</a><a href="../tag/prometheus-url-monitoring/index.html" rel="tag">prometheus url monitoring</a><a href="../tag/ssl-certificate-monitoring/index.html" rel="tag">ssl certificate monitoring</a> </span>
</div>
<nav class="navigation post-navigation" role="navigation" aria-label="Posts">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links"><div class="nav-previous"><a href="../plsql-describe-tables-in-schema-oracle/index.html" rel="prev"><span class="screen-reader-text">Previous Post:</span>PLSQL Describe tables in schema &#8211; Oracle</a></div><div class="nav-next"><a href="../aws-cli-list-efs/index.html" rel="next"><span class="screen-reader-text">Next Post:</span>AWS CLI List EFS Filesystem sort by Size</a></div></div>
</nav>
</footer>
</article>
<div id="disqus_thread"></div>
</main>
</section>
<section id="secondary" class="sidebar widget-area clearfix" role="complementary">
<aside id="custom_html-18" class="widget_text widget widget_custom_html clearfix"><div class="textwidget custom-html-widget"><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3398911159151128" crossorigin="anonymous"></script>

<ins class="adsbygoogle" style="display:inline-block;width:270px;height:400px" data-ad-client="ca-pub-3398911159151128" data-ad-slot="5950599981"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside><aside id="search-3" class="widget widget_search clearfix">
<form role="search" method="get" class="search-form" action="../../index.html">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
</label>
<button type="submit" class="search-submit">
<span class="genericon-search"></span>
<span class="screen-reader-text">Search</span>
</button>
</form>
</aside><aside id="categories-8" class="widget widget_categories clearfix"><div class="widget-header"><h3 class="widget-title">Categories</h3></div>
<ul>
<li class="cat-item cat-item-61"><a href="../category/activemq/index.html">ActiveMQ</a> (4)
</li>
<li class="cat-item cat-item-98"><a href="../category/ansible/index.html">Ansible</a> (65)
</li>
<li class="cat-item cat-item-10"><a href="../category/apache/index.html">Apache</a> (8)
</li>
<li class="cat-item cat-item-234"><a href="../category/aws/index.html">AWS</a> (28)
</li>
<li class="cat-item cat-item-452"><a href="../category/azure/index.html">Azure</a> (1)
</li>
<li class="cat-item cat-item-8"><a href="../category/best-practice/index.html">Best Practice</a> (5)
</li>
<li class="cat-item cat-item-390"><a href="../category/bitbucket/index.html">BitBucket</a> (1)
</li>
<li class="cat-item cat-item-426"><a href="../category/boto/index.html">Boto</a> (1)
</li>
<li class="cat-item cat-item-399"><a href="../category/cloud/index.html" title="Cloud is not only a concept but also a practice of using a network of remote servers hosted on the Internet to store, manage, and process data.">Cloud</a> (1)
</li>
<li class="cat-item cat-item-397"><a href="../category/database/index.html">Database</a> (1)
</li>
<li class="cat-item cat-item-95"><a href="../category/development/index.html">Development</a> (3)
</li>
<li class="cat-item cat-item-152"><a href="../category/docker/index.html">Docker</a> (11)
</li>
<li class="cat-item cat-item-422"><a href="../category/efk/index.html">EFK</a> (1)
</li>
<li class="cat-item cat-item-423"><a href="../category/elastic-search/index.html">Elastic Search</a> (1)
</li>
<li class="cat-item cat-item-59"><a href="../category/f5-big-ip/index.html">F5-Big-IP</a> (6)
</li>
<li class="cat-item cat-item-419"><a href="../category/fluentd/index.html">FluentD</a> (2)
</li>
<li class="cat-item cat-item-424"><a href="../category/gcp-googlecloud/index.html">GCP &#8211; GoogleCloud</a> (1)
</li>
<li class="cat-item cat-item-450"><a href="../category/github-actions/index.html">Github Actions</a> (1)
</li>
<li class="cat-item cat-item-428"><a href="../category/grafana/index.html">Grafana</a> (1)
</li>
<li class="cat-item cat-item-275"><a href="../category/graphite/index.html">Graphite</a> (1)
</li>
<li class="cat-item cat-item-441"><a href="../category/ibm-cloud/index.html">IBM Cloud</a> (1)
</li>
<li class="cat-item cat-item-401"><a href="../category/ibm-websphere/index.html" title="IBM® WebSphere® Application Server provides a range of flexible and secure runtime for Java enterprise applications, lightweight web applications and microservices. You can create new applications and enhance and optimize existing application infrastructure on premises or across any public, private or hybrid cloud. In addition, by utilizing IBM Cloud Private, you can create on-premises cloud capabilities similar to public clouds to accelerate app development. The platform is built on the open source Kubernetes-based container architecture and supports both Docker containers and Cloud Foundry.">IBM Websphere</a> (2)
</li>
<li class="cat-item cat-item-354"><a href="../category/ihs-and-apache/index.html">IHS and Apache</a> (10)
</li>
<li class="cat-item cat-item-353"><a href="../category/iis/index.html">IIS</a> (4)
</li>
<li class="cat-item cat-item-388"><a href="../category/javascript/index.html">JavaScript</a> (3)
</li>
<li class="cat-item cat-item-286"><a href="../category/jenkins/index.html">Jenkins</a> (4)
</li>
<li class="cat-item cat-item-15"><a href="../category/joomla/index.html">Joomla</a> (1)
</li>
<li class="cat-item cat-item-151"><a href="../category/kubernetes/index.html">Kubernetes</a> (16)
</li>
<li class="cat-item cat-item-191"><a href="../category/middleware/index.html">Middleware</a> (3)
</li>
<li class="cat-item cat-item-322"><a href="../category/network-troubleshooting/index.html">Network Troubleshooting</a> (1)
</li>
<li class="cat-item cat-item-413"><a href="../category/networking/index.html">Networking</a> (1)
</li>
<li class="cat-item cat-item-273"><a href="../category/nodejs/index.html">NodeJS</a> (2)
</li>
<li class="cat-item cat-item-396"><a href="../category/office365/index.html">Office365</a> (1)
</li>
<li class="cat-item cat-item-148"><a href="../category/opensource/index.html">OpenSource</a> (2)
</li>
<li class="cat-item cat-item-417"><a href="../category/oracle-db/index.html">Oracle DB</a> (3)
</li>
<li class="cat-item cat-item-404"><a href="../category/oracle-weblogic/index.html" title="WebLogic is a leading Application Server product most widely used for e-commerce online transaction processing (OLTP) platform application, developed to connect users in a distributed computing environment and to facilitate the integration of mainframe applications with distributed corporate data and applications.">Oracle Weblogic</a> (2)
</li>
<li class="cat-item cat-item-232"><a href="../category/packer/index.html">Packer</a> (2)
</li>
<li class="cat-item cat-item-146"><a href="../category/perl/index.html">Perl</a> (1)
</li>
<li class="cat-item cat-item-60"><a href="../category/php/index.html">PHP</a> (1)
</li>
<li class="cat-item cat-item-453"><a href="../category/postgresql/index.html">PostgreSQL</a> (1)
</li>
<li class="cat-item cat-item-343"><a href="../category/powershell/index.html">PowerShell</a> (1)
</li>
<li class="cat-item cat-item-31"><a href="../category/weblogic/problemsolution/index.html">problem/solution</a> (8)
</li>
<li class="cat-item cat-item-427"><a href="../category/prometheus/index.html">Prometheus</a> (1)
</li>
<li class="cat-item cat-item-445"><a href="../category/pulumi/index.html">Pulumi</a> (1)
</li>
<li class="cat-item cat-item-285"><a href="../category/python-flask/index.html">Python Flask</a> (1)
</li>
<li class="cat-item cat-item-22"><a href="../category/python_scripts/index.html">python_scripts</a> (7)
</li>
<li class="cat-item cat-item-446"><a href="../category/redis/index.html">Redis</a> (1)
</li>
<li class="cat-item cat-item-451"><a href="../category/serverless/index.html">Serverless</a> (1)
</li>
<li class="cat-item cat-item-12"><a href="../category/shell-scripting/index.html">Shell Scripting</a> (6)
</li>
<li class="cat-item cat-item-125"><a href="../category/soap-web-services/index.html">SOAP Web Services</a> (1)
</li>
<li class="cat-item cat-item-13"><a href="../category/splunk/index.html">Splunk</a> (1)
</li>
<li class="cat-item cat-item-425"><a href="../category/sre/index.html">SRE</a> (1)
</li>
<li class="cat-item cat-item-274"><a href="../category/statsd/index.html">StatsD</a> (1)
</li>
<li class="cat-item cat-item-233"><a href="../category/terraform/index.html">Terraform</a> (12)
</li>
<li class="cat-item cat-item-35"><a href="../category/tomcat/index.html">tomcat</a> (7)
</li>
<li class="cat-item cat-item-147"><a href="../category/tools/index.html">tools</a> (5)
</li>
<li class="cat-item cat-item-391"><a href="../category/traefik/index.html">Traefik</a> (1)
</li>
<li class="cat-item cat-item-124"><a href="../category/troubleshooting/index.html">Troubleshooting</a> (3)
</li>
<li class="cat-item cat-item-1"><a href="../category/uncategorized/index.html">Uncategorized</a> (5)
</li>
<li class="cat-item cat-item-7"><a href="../category/unix/index.html">Unix</a> (5)
</li>
<li class="cat-item cat-item-99"><a href="../category/vagrant/index.html">Vagrant</a> (4)
</li>
<li class="cat-item cat-item-389"><a href="../category/vuejs/index.html">VueJS</a> (2)
</li>
<li class="cat-item cat-item-356"><a href="../category/vulnerabilities-fixes/index.html">Vulnerabilities &amp; Fixes</a> (21)
</li>
<li class="cat-item cat-item-21"><a href="../category/weblogic/index.html">weblogic</a> (51)
</li>
<li class="cat-item cat-item-9"><a href="../category/webserver/index.html">Webserver</a> (1)
</li>
<li class="cat-item cat-item-92"><a href="../category/websphere/index.html">Websphere</a> (8)
</li>
<li class="cat-item cat-item-321"><a href="../category/windows-server/index.html">Windows Server</a> (5)
</li>
<li class="cat-item cat-item-55"><a href="../category/wlst/index.html">wlst</a> (7)
</li>
<li class="cat-item cat-item-36"><a href="../category/wordpress/index.html">wordpress</a> (2)
</li>
<li class="cat-item cat-item-4"><a href="../category/wsadmin-scripts/index.html">wsadmin scripts</a> (1)
</li>
</ul>
</aside><aside id="media_image-5" class="widget widget_media_image clearfix"><img width="267" height="400" src="../../wp-content/ewww/lazy/placeholder-267x400.png" class="image wp-image-8825  attachment-full size-full lazyload" alt="write for devopsjunction" style="max-width: 100%; height: auto;" data-src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" loading="lazy" data-srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" data-sizes="auto" /><noscript><img width="267" height="400" src="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png" class="image wp-image-8825  attachment-full size-full" alt="write for devopsjunction" style="max-width: 100%; height: auto;" srcset="../../wp-content/uploads/2022/07/write-for-us-devopsjunction.png 267w, ../../wp-content/uploads/2022/07/write-for-us-devopsjunction-200x300.png 200w" sizes="(max-width: 267px) 100vw, 267px" data-eio="l" /></noscript></aside>
</section>
</div>
<div id="footer" class="footer-wrap">
<footer id="colophon" class="site-footer container clearfix" role="contentinfo">
<div id="footer-text" class="site-info">
<span class="credit-link">Powered by <a href="../../index.html" title="Rumen Lishkov">Rumen Lishkov</a> and <a href="https://rumen.free.bg/" title="Studio-1">Studio1 Sofia</a> </span>
</div>
</footer>
</div>
</div>
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@mwinventory" />
<meta name="twitter:creator" content="@mwinventory" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;display=swap" rel="stylesheet"><div class="simplesocialbuttons simplesocial-round-icon simplesocialbuttons-float-left-center post-7008 post  ssb_counter-activate simplesocialbuttons-slide-bottom-in">
<button class="simplesocial-fb-share" target="_blank" data-href="https://www.facebook.com/sharer/sharer.php?u=https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Facebook </span> <span class="ssb_counter ssb_fbshare_counter">0</span></button>
<button class="simplesocial-twt-share" data-href="https://twitter.com/share?text=SSL+Expiry+and+Uptime+Monitor+for+URLs+%E2%80%93+Prometheus+Blackbox+%7C+Grafana&url=https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" rel="nofollow" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">Twitter</span> <span class="ssb_counter ssb_twitter_counter">0</span></button>
<button target="popup" class="simplesocial-linkedin-share" data-href="https://www.linkedin.com/cws/share?url=https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" onclick="javascript:window.open(this.dataset.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"><span class="simplesocialtxt">LinkedIn</span></button>
<button onclick="javascript:window.location.href = this.dataset.href;return false;" class="simplesocial-email-share" data-href="mailto:?subject=SSL+Expiry+and+Uptime+Monitor+for+URLs+%E2%80%93+Prometheus+Blackbox+%7C+Grafana&body=https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/"><span class="simplesocialtxt">Email</span></button>
<button onclick="javascript:window.open(this.dataset.href, '_blank' );return false;" class="simplesocial-whatsapp-share" data-href="https://web.whatsapp.com/send?text=https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/"><span class="simplesocialtxt">WhatsApp</span></button>
</div>
<script type="text/javascript">
		/* MonsterInsights Scroll Tracking */
			if ( typeof(jQuery) !== 'undefined' ) {
				jQuery( document ).ready(function(){
					function monsterinsights_scroll_tracking_load() {
						if ( typeof(__gaTracker) !== 'undefined' && __gaTracker && __gaTracker.hasOwnProperty( "loaded" ) && __gaTracker.loaded == true ) {
							(function(factory) {
								factory(jQuery);
							}(function($) {

								/* Scroll Depth */
								"use strict";
								var defaults = {
									percentage: true
								};

								var $window = $(window),
									cache = [],
									scrollEventBound = false,
									lastPixelDepth = 0;

								/*
								 * Plugin
								 */

								$.scrollDepth = function(options) {

									var startTime = +new Date();

									options = $.extend({}, defaults, options);

									/*
									 * Functions
									 */

									function sendEvent(action, label, scrollDistance, timing) {

										var fieldsArray = {
											hitType       : 'event',
											eventCategory : 'Scroll Depth',
											eventAction   : action,
											eventLabel    : label,
											eventValue    : 1,
											nonInteraction: 1
										};

										if ( 'undefined' === typeof MonsterInsightsObject || 'undefined' === typeof MonsterInsightsObject.sendEvent ) {
											return;
										}

										MonsterInsightsObject.sendEvent( fieldsArray );
										if (arguments.length > 3) {
											fieldsArray = {
												hitType        : 'timing',
												timingCategory : 'Scroll Depth',
												timingVar      : action,
												timingValue    : timing,
												timingLabel    : label,
												nonInteraction: 1
											};
											MonsterInsightsObject.sendEvent( fieldsArray );
										}
									}

									function calculateMarks(docHeight) {
										return {
											'25%' : parseInt(docHeight * 0.25, 10),
											'50%' : parseInt(docHeight * 0.50, 10),
											'75%' : parseInt(docHeight * 0.75, 10),
											/* Cushion to trigger 100% event in iOS */
											'100%': docHeight - 5
										};
									}

									function checkMarks(marks, scrollDistance, timing) {
										/* Check each active mark */
										$.each(marks, function(key, val) {
											if ( $.inArray(key, cache) === -1 && scrollDistance >= val ) {
												sendEvent('Percentage', key, scrollDistance, timing);
												cache.push(key);
											}
										});
									}

									function rounded(scrollDistance) {
										/* Returns String */
										return (Math.floor(scrollDistance/250) * 250).toString();
									}

									function init() {
										bindScrollDepth();
									}

									/*
									 * Public Methods
									 */

									/* Reset Scroll Depth with the originally initialized options */
									$.scrollDepth.reset = function() {
										cache = [];
										lastPixelDepth = 0;
										$window.off('scroll.scrollDepth');
										bindScrollDepth();
									};

									/* Add DOM elements to be tracked */
									$.scrollDepth.addElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.merge(options.elements, elems);

										/* If scroll event has been unbound from window, rebind */
										if (!scrollEventBound) {
											bindScrollDepth();
										}

									};

									/* Remove DOM elements currently tracked */
									$.scrollDepth.removeElements = function(elems) {

										if (typeof elems == "undefined" || !$.isArray(elems)) {
											return;
										}

										$.each(elems, function(index, elem) {

											var inElementsArray = $.inArray(elem, options.elements);
											var inCacheArray = $.inArray(elem, cache);

											if (inElementsArray != -1) {
												options.elements.splice(inElementsArray, 1);
											}

											if (inCacheArray != -1) {
												cache.splice(inCacheArray, 1);
											}

										});

									};

									/*
									 * Throttle function borrowed from:
									 * Underscore.js 1.5.2
									 * http://underscorejs.org
									 * (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
									 * Underscore may be freely distributed under the MIT license.
									 */

									function throttle(func, wait) {
										var context, args, result;
										var timeout = null;
										var previous = 0;
										var later = function() {
											previous = new Date;
											timeout = null;
											result = func.apply(context, args);
										};
										return function() {
											var now = new Date;
											if (!previous) previous = now;
											var remaining = wait - (now - previous);
											context = this;
											args = arguments;
											if (remaining <= 0) {
												clearTimeout(timeout);
												timeout = null;
												previous = now;
												result = func.apply(context, args);
											} else if (!timeout) {
												timeout = setTimeout(later, remaining);
											}
											return result;
										};
									}

									/*
									 * Scroll Event
									 */

									function bindScrollDepth() {

										scrollEventBound = true;

										$window.on('scroll.scrollDepth', throttle(function() {
											/*
											 * We calculate document and window height on each scroll event to
											 * account for dynamic DOM changes.
											 */

											var docHeight = $(document).height(),
												winHeight = window.innerHeight ? window.innerHeight : $window.height(),
												scrollDistance = $window.scrollTop() + winHeight,

												/* Recalculate percentage marks */
												marks = calculateMarks(docHeight),

												/* Timing */
												timing = +new Date - startTime;

											checkMarks(marks, scrollDistance, timing);
										}, 500));

									}

									init();
								};

								/* UMD export */
								return $.scrollDepth;

							}));

							jQuery.scrollDepth();
						} else {
							setTimeout(monsterinsights_scroll_tracking_load, 200);
						}
					}
					monsterinsights_scroll_tracking_load();
				});
			}
		/* End MonsterInsights Scroll Tracking */
		
</script><script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"mwinventory"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f8767.js"></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"7008 https:\/\/www.middlewareinventory.com\/?p=7008","disqusShortname":"mwinventory","disqusTitle":"SSL Expiry and Uptime Monitor for URLs \u2013 Prometheus Blackbox | Grafana","disqusUrl":"https:\/\/www.middlewareinventory.com\/blog\/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana\/","postId":"7008"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/bccbc.js"></script>
<script type='text/javascript' id='dae-download-js-extra'>
/* <![CDATA[ */
var objDaeDownload = {"ajaxUrl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"2019084a26"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/8510d.js"></script>
<script type='text/javascript' id='socialsnap-js-js-extra'>
/* <![CDATA[ */
var socialsnap_script = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","on_media_width":"250","on_media_height":"250","nonce":"b4d440853b","post_id":"7008"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/fef55.js"></script>
<script type='text/javascript' id='aicp-js-extra'>
/* <![CDATA[ */
var AICP = {"ajaxurl":"https:\/\/www.middlewareinventory.com\/wp-admin\/admin-ajax.php","nonce":"0b980bed5f","ip":"109.74.178.18","clickLimit":"1","clickCounterCookieExp":"3","banDuration":"7","countryBlockCheck":"No","banCountryList":"RU"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/ff9fe.js"></script>
<script type='text/javascript' src='https://js.stripe.com/v3/?ver=2.03' id='stripe-js'></script>
<script type='text/javascript' id='q2w3_fixed_widget-js-extra'>
/* <![CDATA[ */
var q2w3_sidebar_options = [{"sidebar":"q2w3-default-sidebar","margin_top":10,"margin_bottom":0,"stop_id":"","screen_max_width":1026,"screen_max_height":0,"width_inherit":true,"refresh_interval":1500,"window_load_hook":false,"disable_mo_api":false,"widgets":["text-32"]}];
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/f2bcf.js"></script>
<script type='text/javascript' id='enlighterjs-js-after'>
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":true,"theme":"enlighter","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script src="../../wp-content/cache/minify/129c2.js"></script>
<script type='text/javascript' id='ez-toc-js-js-extra'>
/* <![CDATA[ */
var ezTOC = {"smooth_scroll":"1","visibility_hide_by_default":"","width":"100%","scroll_offset":"30"};
/* ]]> */
</script>
<script src="../../wp-content/cache/minify/0c713.js"></script>
<div id="ss-copy-popup" class="ss-popup-overlay">
<div class="ss-popup">
<div class="ss-popup-heading">
<span>Copy link</span>
<a href="#" id="ss-close-share-networks-modal" class="ss-close-modal" rel="nofollow"><i class="ss ss-close"></i></a>
</div>
<div class="ss-popup-content">
<div class="ss-copy-action">
<input type="text" readonly="readonly" value="https://www.middlewareinventory.com/blog/ssl-expiry-and-uptime-monitor-for-urls-prometheus-blackbox-grafana/" class="ss-copy-action-field" />
<a href="#" class="ss-button" rel="nofollow">Copy<span class="ss-share-network-tooltip">Copied</span></a>
<i class="ss ss-copy"></i>
</div>
<div class="ss-powered-by">Powered by <a href="https://socialsnap.com/?utm_source=WordPress&amp;utm_medium=link&amp;utm_campaign=inthewild" target="_blank" rel="nofollow noopener"><i class="ss ss-socialsnap"></i>Social Snap</a></div>
</div>
</div>
</div>
<script type='text/javascript'>function initTwitCount(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://static1.twitcount.com/js/twitcount.js';fjs.parentNode.insertBefore(js,fjs)}}
        var ssb_twit_count_init=!1;addEventListener('mouseover',function(event){if(!ssb_twit_count_init){initTwitCount(document,'script','twitcount_plugins')
        ssb_twit_count_init=!0}})</script> 
<script type="text/javascript">

			var SocialSnapURL 				= window.location.href;
			var SocialSnapShareCacheExpired = 0;
				
			if ( -1 !== SocialSnapURL.indexOf('?ss_cache_refresh') ) {

				SocialSnapShareCacheExpired = true;

			} else {

				var SocialSnapServerTimestamp 	= 1657192218;
				var SocialSnapBrowserTimestamp 	= Date.now();

				if ( ! SocialSnapBrowserTimestamp ) {
					SocialSnapBrowserTimestamp = new Date().getTime();
				}

				SocialSnapBrowserTimestamp = Math.floor( SocialSnapBrowserTimestamp / 1000 );

				SocialSnapShareCacheExpired = SocialSnapShareCacheExpired && ( SocialSnapBrowserTimestamp - SocialSnapServerTimestamp < 60 );
			}

		</script>

<div id="cookie-notice" role="banner" class="cn-bottom bootstrap" style="color: #fff; background-color: #000;"><div class="cookie-notice-container"><span id="cn-notice-text">We use cookies to ensure that we give you the best experience on our website. The Cookies collected are used only to Show customized Ads. We Hope you are fine with it.</span><a href="#" id="cn-accept-cookie" data-cookie-set="accept" class="cn-set-cookie cn-button bootstrap button">Ok</a><a href="#" id="cn-refuse-cookie" data-cookie-set="refuse" class="cn-set-cookie cn-button bootstrap button">No</a><a href="../../cookie-policy/index.html" target="_blank" id="cn-more-info" class="cn-more-info cn-button bootstrap button">Privacy policy</a>
</div>
<div class="cookie-notice-revoke-container"><a href="#" class="cn-revoke-cookie cn-button bootstrap button">Revoke cookies</a></div>
</div>
</body>
</html>

{"id":7068,"date":"2021-07-24T13:48:55","date_gmt":"2021-07-24T08:18:55","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=7068"},"modified":"2022-06-19T11:16:07","modified_gmt":"2022-06-19T05:46:07","slug":"aws-cli-list-efs","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/","title":{"rendered":"AWS CLI List EFS Filesystem sort by Size"},"content":{"rendered":"<p>In this post we are going to see an aws cli command to list elastic file systems sorted by Size in ascending or descending order.<\/p>\n<p>While am sharing all the new tricks in AWS CLI I come across. this is something I have learnt recently<\/p>\n<p>There is a dedicated post of <a href=\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-ec2\">AWS CLI EC2 examples<\/a>. you might want to take a look may be later.<\/p>\n<p>With no further ado, lets go the objective.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM.jpg\"><img class=\"post-img alignnone wp-image-7072 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM.jpg\" alt=\"aws cli efs\" width=\"2376\" height=\"1340\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM.jpg 2376w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM-300x169.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM-1024x578.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM-768x433.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM-1536x866.jpg 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM-2048x1155.jpg 2048w\" sizes=\"(max-width: 2376px) 100vw, 2376px\" \/><\/a><\/p>\n<h2>AWS CLI List EFS &#8211; Sort by Size Descending<\/h2>\n<p>we are going to use <code>aws efs describe-file-systems<\/code> command here with <code>query<\/code> to select only the necassary elements of the entire output.<\/p>\n<p>with in the <code>query<\/code> we are using the <code>sort_by<\/code> function to sort the <code>SizeInBytes<\/code> field, By Default it would be sorted in Ascending order.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">sort_by(@, &amp;SizeinBytes)<\/pre>\n<p>As we want to sort in descending order, we need to use <code>reverse<\/code> the sort_by function like this<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">reverse(sort_by(@, &amp;SizeinBytes))<\/pre>\n<p>As AWS CLI uses JMESPath for the querying. you can read more about <a href=\"https:\/\/jmespath.org\/specification.html#func-sort-by\">JMESPath Sort_by function<\/a> to understand how it works.<\/p>\n<p>Here is the complete AWS CLI command to list file systems sorted by size in descending order.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">~|\u21d2 aws efs describe-file-systems &#8211; query \"FileSystems[*].{FileSystemID:FileSystemId, Name:Name, SizeinBytes: SizeInBytes.Value}| []|reverse(sort_by(@, &amp;SizeinBytes))\" &#8211; profile prod &#8211; output table\r\n------------------------------------------------------------\r\n|                    DescribeFileSystems                   |\r\n+--------------+------------------------+------------------+\r\n| FileSystemID |         Name           |   SizeinBytes    |\r\n+--------------+------------------------+------------------+\r\n|  fs-4b0****0 |  efs-drive1            |  44920832974848  |\r\n|  fs-c39****6 |  attachment-efs        |  419247616000    |\r\n|  fs-4f2****b |  remotedrive           |  215773437952    |\r\n|  fs-23f****6 |  backupfiles           |  57853181952     |\r\n|  fs-ad0****e |  sharedblog            |  15373717504     |\r\n|  fs-76b****5 |  None                  |  330199040       |\r\n|  fs-46e****7 |  eks-sharedrive        |  322668544       |\r\n|  fs-fc0****8 |  attachement-new       |  53434368        |\r\n|  fs-188****c |  backend-backup        |  12474368        |\r\n|  fs-e33****7 |  archiving             |  4063232         |\r\n+--------------+------------------------+------------------+<\/pre>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>&nbsp;<\/p>\n<h2>AWS CLI List EFS &#8211; Sort by Size Ascending<\/h2>\n<p>Like\u00a0 the previous <code>descending<\/code> command we are going to use the same command with a slight modification<code><br \/>\n<\/code><\/p>\n<p>We are just going to remove the <code>reverse<\/code> in front of the <code>sort_by<\/code> function and let it function by default.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">sort_by(@, &amp;SizeinBytes)<\/pre>\n<p>Here is the complete AWS CLI command and the execution output.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">~|\u21d2 aws efs describe-file-systems &#8211; query \"FileSystems[*].{FileSystemID:FileSystemId, Name:Name, SizeinBytes: SizeInBytes.Value}| []|sort_by(@, &amp;SizeinBytes)\" &#8211; profile prod &#8211; output table\r\n------------------------------------------------------------\r\n|                    DescribeFileSystems                   |\r\n+--------------+------------------------+------------------+\r\n| FileSystemID |         Name           |   SizeinBytes    |\r\n+--------------+------------------------+------------------+\r\n|  fs-e33****7 |  archiving             |  4063232         |\r\n|  fs-1886***c |  backend-backup        |  12474368        |\r\n|  fs-fc0****8 |  attachement-new       |  53434368        |\r\n|  fs-46e****7 |  eks-sharedrive        |  322668544       |\r\n|  fs-76****d5 |  None                  |  330199040       |\r\n|  fs-ad0****e |  sharedblog            |  15373717504     |\r\n|  fs-23f****6 |  backupfiles           |  57853181952     |\r\n|  fs-4f2****b |  remotedrive           |  215773437952    |\r\n|  fs-c39****6 |  attachment-efs        |  419247616000    |\r\n|  fs-4b0****0 |  efs-drive1            |  44920832974848  |\r\n+--------------+------------------------+------------------+<\/pre>\n<p>&nbsp;<\/p>\n<p>Hope this short article helped you and you can implement this\u00a0 Sort descending or ascending with <code>sort_by<\/code> and <code>reverse(sort_by)<\/code> function in any other EC2 CLI commands while querying.<\/p>\n<p>This can be a good example of <code>aws efs describe-file-systems<\/code> command with sorting.<\/p>\n<p>If you have any best practices and EC2 CLI commands please let us know in the commands for us and others to learn from you.<\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>&nbsp;<\/p>\n<p>Cheers<\/p>\n<p>Rumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577832\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"7068\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577832\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577832\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this post we are going to see an aws cli command to list elastic file systems sorted by Size in ascending or descending order. While am sharing all the new tricks in AWS CLI I come across. this is something I have learnt recently There is a dedicated post[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":7072,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[234],"tags":[434,435,436],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>AWS CLI List EFS Filesystem sort by Size | Devops Junction<\/title>\n<meta name=\"description\" content=\"AWS CLI EFS Examples. AWS CLI List EFS sort by Size in Ascending or descending order. AWS CLI Sort Desc. AWS CLI EFS describe-file-system example.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"AWS CLI List EFS Filesystem sort by Size | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"AWS CLI EFS Examples. AWS CLI List EFS sort by Size in Ascending or descending order. AWS CLI Sort Desc. AWS CLI EFS describe-file-system example.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2021-07-24T08:18:55+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-06-19T05:46:07+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"2376\" \/>\n\t<meta property=\"og:image:height\" content=\"1340\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/07\/Screenshot-2021-07-24-at-1.34.33-PM.jpg\",\"width\":2376,\"height\":1340,\"caption\":\"AWS CLI EFS List\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/\",\"name\":\"AWS CLI List EFS Filesystem sort by Size | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#primaryimage\"},\"datePublished\":\"2021-07-24T08:18:55+00:00\",\"dateModified\":\"2022-06-19T05:46:07+00:00\",\"description\":\"AWS CLI EFS Examples. AWS CLI List EFS sort by Size in Ascending or descending order. AWS CLI Sort Desc. AWS CLI EFS describe-file-system example.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"AWS CLI List EFS Filesystem sort by Size\",\"datePublished\":\"2021-07-24T08:18:55+00:00\",\"dateModified\":\"2022-06-19T05:46:07+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#primaryimage\"},\"keywords\":\"AWS CLI EFS Examples,AWS CLI Sort Desc example,AWS CLI Sort Descending or Ascending\",\"articleSection\":\"AWS\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-cli-list-efs\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/7068"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=7068"}],"version-history":[{"count":7,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/7068\/revisions"}],"predecessor-version":[{"id":7081,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/7068\/revisions\/7081"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/7072"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=7068"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=7068"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=7068"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
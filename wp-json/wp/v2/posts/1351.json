{"id":1351,"date":"2018-06-14T03:59:18","date_gmt":"2018-06-13T22:29:18","guid":{"rendered":"http:\/\/www.middlewareinventory.com\/?p=1351"},"modified":"2020-11-28T20:37:09","modified_gmt":"2020-11-28T15:07:09","slug":"wsadmin-script-to-print-running-server-status-with-heap-usage","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/","title":{"rendered":"wsadmin script to print running server status with heap usage"},"content":{"rendered":"<h3 class=\"post-title entry-title\"><b style=\"font-size: 1.0625rem;\">Objective:<\/b><\/h3>\n<div id=\"post-body-7996122096340915711\" class=\"post-body entry-content\">\n<div dir=\"ltr\">\n<div>This python\/jython (wsadmin) script will help you to print the \u201c<code>Running Server List<\/code>\u201d per everyNode registered under <code>Cell(dmgr)<\/code>\u00a0with up time and heap usage. This script can be used in websphere application server 6.1 and above.<\/div>\n<p>&nbsp;<\/p>\n<div><b>Compatibility:\u00a0<\/b>WAS6.1 and above<\/div>\n<p>&nbsp;<\/p>\n<div><b>Script:<\/b><\/div>\n<pre class=\"brush: python; title: ; notranslate\" title=\"\">\r\nRunning_Nodes=AdminControl.queryNames('*:type=Server,name=nodeagent,*').split(java.lang.System.getProperty(&quot;line.separator&quot;))\r\n\r\n\r\nprint &quot;CELLNAME: &quot;, AdminControl.getCell()\r\nprint &quot;HOST:     &quot;, AdminControl.getHost()\r\n\r\nignorelist=['dmgr','nodeagent']\r\nfor nod in Running_Nodes:\r\n        NodeName=AdminControl.invoke(nod ,&quot;getNodeName()&quot;)\r\n        Running_JVMS=AdminControl.queryNames('*:type=Server,node='+NodeName+',*').split(java.lang.System.getProperty(&quot;line.separator&quot;))\r\n        print &quot;=====================================================================&quot;\r\n        print &quot;NODENAME:&quot;,NodeName\r\n        print &quot;=====================================================================&quot;\r\n        print &quot;--------------------------------------------&quot;\r\n        print &quot;&lt;&lt; Running JVMs under the Node &gt;&gt;&quot;\r\n        print &quot;--------------------------------------------&quot;\r\n        for Serv in Running_JVMS:\r\n                print  AdminControl.invoke(Serv,&quot;getName()&quot;)\r\n        print &quot;--------------------------------------------&quot;\r\n\r\n        print &quot;&quot;\r\n        print &quot;&quot;\r\n        print &quot;--------------------------------------------&quot;\r\n        print &quot;&lt;&lt; Server Runtime Information &gt;&gt;&quot;\r\n        print &quot;--------------------------------------------&quot;\r\n\r\n        for JVM in Running_JVMS:\r\n                ServerName=AdminControl.invoke(JVM ,&quot;getName()&quot;)\r\n                if ServerName not in ignorelist:\r\n                        JVMName=AdminControl.completeObjectName('type=JVM,process='+ServerName+',*')\r\n                        JVMObject=AdminControl.makeObjectName(JVMName)\r\n                        perf=AdminControl.completeObjectName('type=Perf,process='+ServerName+',*')\r\n                        perfObject=AdminControl.makeObjectName(perf)\r\n                        Obj=AdminControl.invoke_jmx(perfObject,&quot;getStatsObject&quot;,[JVMObject,java.lang.Boolean('false')],['javax.management.ObjectName','java.lang.Boolean'])\r\n                        current=Obj.getStatistic('HeapSize').getCurrent()\r\n                        used=Obj.getStatistic('UsedMemory').getCount()\r\n                        usage=float(used)\/float(current)*100\r\n                        uptime=float(Obj.getStatistic('UpTime').getCount())\/60\/60\/24\r\n                print &quot;--------------------------------------------&quot;\r\n                print &quot;ServerName      :&quot;, ServerName\r\n                print &quot;uptime(in days) :&quot;, int(uptime)\r\n                print &quot;--------------------------------------------&quot;\r\n                print &quot;CurrentUsage    :&quot;, current\r\n                print &quot;Usedmemory      :&quot;, used\r\n                print &quot;Usage in Percent:&quot;, int(usage)\r\n                print &quot;--------------------------------------------&quot;\r\nprint &quot;&quot;\r\nprint &quot;=====================================================================&quot;\r\n<\/pre>\n<p><b><br \/>\n<\/b><b>Result:<\/b><\/p>\n<pre class=\"brush: bash; title: ; notranslate\" title=\"\">\r\nbash-3.00# .\/wsadmin.sh -lang jython -username wsadmin -password wsadmin -f getHeapSizeV3.py\r\nWASX7209I: Connected to process &quot;dmgr&quot; on node MWICellManager01 using SOAP connector;  The type of process is: DeploymentManager\r\n\r\n\r\nCELLNAME:  MWICell\r\nHOST:      as1.mwi.com\r\n\r\n\r\n=====================================================================\r\nNODENAME:   MWINode01\r\n=====================================================================\r\n--------------------------------------------\r\n&lt;&lt; Running JVMs under the Node &gt;&gt;\r\n--------------------------------------------\r\nMWI_SERVER01\r\nMWI_SERVER02\r\nnodeagent\r\n--------------------------------------------\r\n\r\n--------------------------------------------\r\n&lt;&lt; Server Runtime Information &gt;&gt;\r\n--------------------------------------------\r\nServerName      : MWI_SERVER01\r\nuptime(in days) : 27\r\n--------------------------------------------\r\nTotalMemory    : 122176\r\nUsedmemory      : 87480\r\nUsage in Percent: 71\r\n--------------------------------------------\r\n--------------------------------------------\r\nServerName      : MWI_SERVER02\r\nuptime(in days) : 64\r\n--------------------------------------------\r\nTotalMemory    : 483904\r\nUsedmemory      : 412135\r\nUsage in Percent: 85\r\n--------------------------------------------\r\n\r\n=====================================================================\r\n\r\n=====================================================================\r\nNODENAME:   MWINode02\r\n=====================================================================\r\n--------------------------------------------\r\n&lt;&lt; Running JVMs under the Node &gt;&gt;\r\n--------------------------------------------\r\nMWI_SERVER03\r\nMWI_SERVER04\r\nnodeagent\r\n--------------------------------------------\r\n\r\n--------------------------------------------\r\n&lt;&lt; Server Runtime Information &gt;&gt;\r\n--------------------------------------------\r\nServerName      : MWI_SERVER03\r\nuptime(in days) : 251\r\n--------------------------------------------\r\nTotalMemory    : 58432\r\nUsedmemory      : 50091\r\nUsage in Percent: 85\r\n--------------------------------------------\r\n--------------------------------------------\r\nServerName      : MWI_SERVER04\r\nuptime(in days) : 36\r\n--------------------------------------------\r\nTotalMemory    : 120704\r\nUsedmemory      : 101834\r\nUsage in Percent: 84\r\n--------------------------------------------\r\n\r\n=====================================================================\r\n<\/pre>\n<\/div>\n<div dir=\"ltr\">\n<p><script async src=\"\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script> <ins class=\"adsbygoogle\" style=\"display: block; text-align: center;\" data-ad-layout=\"in-article\" data-ad-format=\"fluid\" data-ad-client=\"ca-pub-3398911159151128\" data-ad-slot=\"1946393371\"><\/ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); <\/script><\/p>\n<p>&nbsp;<\/p>\n<p>Hope it helps<\/p>\n<table style=\"border-collapse: collapse; width: 100%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 100%;\"><strong>Hey There<\/strong>\u00a0You can check out the Websphere Connection Pool monitoring script we created <a href=\"https:\/\/www.middlewareinventory.com\/blog\/websphere-connection-pool-monitoring-wsadmin-python-scrip\/\">here<\/a><\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<p>&nbsp;<\/p>\n<p>For more exclusive posts like this in web, middleware and DevOps technologies. Leave your\u00a0name and mail id. Trust us, we hate spam like you do.<\/p>\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577099\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"0\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"1351\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577099\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577099\"><\/span>\n\t\t<\/div>\n\n\t\t\n<p>Thanks<\/p>\n<p>A K S A R A V<\/p>\n<p>Write to us at\u00a0<a href=\"mailto:aksarav@mwinventory.in\">aksarav@mwinventory.in<\/a><\/p>\n<p><i class=\"fa fa-facebook\"><\/i>\u00a0Follow us on\u00a0<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a>\u00a0or\u00a0<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a><\/p>\n<p><i class=\"fa fa-whatsapp\"><\/i>\u00a0To Join our\u00a0Community in\u00a0<a href=\"https:\/\/chat.whatsapp.com\/7Wn9PyXGw7GI3MMmFux6kU\">Whatsapp \u2013 Click here\u00a0<\/a><\/p>\n<\/div>\n<div dir=\"ltr\"><\/div>\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>Objective: This python\/jython (wsadmin) script will help you to print the \u201cRunning Server List\u201d per everyNode registered under Cell(dmgr)\u00a0with up time and heap usage. This script can be used in websphere application server 6.1 and above. &nbsp; Compatibility:\u00a0WAS6.1 and above &nbsp; Script: Result: &nbsp; Hope it helps Hey There\u00a0You can[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":1355,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[92],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>wsadmin script to print running server status with heap usage<\/title>\n<meta name=\"description\" content=\"wsadmin script to print running server status with heap usage and uptime information node wise. this script can be used for websphere application server 6.1 and above versions. It prints runtime information like Total heap memory allocated, used memory and the percentage used along with the server uptime\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"wsadmin script to print running server status with heap usage\" \/>\n<meta property=\"og:description\" content=\"wsadmin script to print running server status with heap usage and uptime information node wise. this script can be used for websphere application server 6.1 and above versions. It prints runtime information like Total heap memory allocated, used memory and the percentage used along with the server uptime\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2018-06-13T22:29:18+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2020-11-28T15:07:09+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/06\/websphere-application-server-1.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"1000\" \/>\n\t<meta property=\"og:image:height\" content=\"1000\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/06\/websphere-application-server-1.jpg\",\"width\":1000,\"height\":1000},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/\",\"name\":\"wsadmin script to print running server status with heap usage\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#primaryimage\"},\"datePublished\":\"2018-06-13T22:29:18+00:00\",\"dateModified\":\"2020-11-28T15:07:09+00:00\",\"description\":\"wsadmin script to print running server status with heap usage and uptime information node wise. this script can be used for websphere application server 6.1 and above versions. It prints runtime information like Total heap memory allocated, used memory and the percentage used along with the server uptime\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"wsadmin script to print running server status with heap usage\",\"datePublished\":\"2018-06-13T22:29:18+00:00\",\"dateModified\":\"2020-11-28T15:07:09+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#primaryimage\"},\"articleSection\":\"Websphere\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/wsadmin-script-to-print-running-server-status-with-heap-usage\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1351"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=1351"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1351\/revisions"}],"predecessor-version":[{"id":1357,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1351\/revisions\/1357"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/1355"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=1351"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=1351"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=1351"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
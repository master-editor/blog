{"id":2358,"date":"2018-12-01T07:25:08","date_gmt":"2018-12-01T01:55:08","guid":{"rendered":"http:\/\/www.middlewareinventory.com\/?p=2358"},"modified":"2022-02-11T01:20:48","modified_gmt":"2022-02-10T19:50:48","slug":"ansible-when-variable-is-defined-or-undefined-examples","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/","title":{"rendered":"Ansible When Variable is defined or undefined Examples"},"content":{"rendered":"<h2>The Purpose<\/h2>\n<p>The purpose of this post is to give you a real-time example and explanation of <strong>how ansible variable is defined and not defined<\/strong> (undefined) conditionals are working along with &#8220;when&#8221;\u00a0conditional statement and how it controls the flow of the task and the play. The following ansible playbook is created strategically to explain the validation cases of ansible playbook variable is\u00a0<strong>defined<\/strong> or\u00a0<strong>not defined (undefined)<\/strong> along\u00a0with &#8220;<strong>when<\/strong>&#8221; conditional module<\/p>\n<blockquote><p>Note*: VLOG of this post is now available at our Youtube channel.\u00a0 you can find the video at end of this post or <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\">go to our channel\u00a0<\/a><\/p><\/blockquote>\n<h2><\/h2>\n<h2>Playbook to Test When Variable is defined<\/h2>\n<p>We have created a simple playbook to demonstrate this by example, This ansible-playbook is designed to find the files in a specific directory based on the inputs being passed ( startup arguments) .<\/p>\n<p>In our case, The Startup arguments are the <code>--extra-vars<\/code> (extra variables) being passed while the ansible playbook is being invoked.\u00a0 Just for convenience and better understanding, we are going to use the short form of <code>--extra-vars<\/code> which is <code>-e<\/code><\/p>\n<blockquote><p><strong>Note*:<\/strong> <em>--extra-vars<\/em> (or) <em>-e<\/em> is a easiest command line based method and one of the way to pass values (or) set variables in the playbook. just like declaring <em>vars\/main.yml<\/em> file\u00a0 or defining under<em> &#8211; vars<\/em> inside playbook.<\/p><\/blockquote>\n<p>As\u00a0mentioned above,\u00a0 the ansible playbook is having a simple find command, to find files in a certain directory, read from the user at startup.\u00a0 But here is the trick.<\/p>\n<p>When the user defines ( pass it as command line argument with <em>-e<\/em>) Just the <code><em>Search String\u00a0<\/em> <\/code>it brings up all the files in the directory matching the search string.<\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">ansible-playbook FindOldfiles.yml \\\r\n-i ansible_hosts \\\r\n-e <span style=\"color: #aa5500;\">\"Directory=\/var\/tmp\/filerepo\"<\/span> \\\r\n-e <span style=\"color: #aa5500;\">\"SearchString=*.txt\"<\/span> \r\n<\/pre>\n<\/div>\n<p>&nbsp;<\/p>\n<p>When the user defines <code><em>Search String<\/em><\/code> as well as the <code><em>Modified time<\/em><\/code> it brings the matching files which are meeting the age criteria as well.<!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">ansible-playbook FindOldfiles.yml \\\r\n-i ansible_hosts \\\r\n-e <span style=\"color: #aa5500;\">\"Directory=\/var\/tmp\/filerepo\"<\/span>\\\r\n-e <span style=\"color: #aa5500;\">\"SearchString=*.txt\"<\/span><span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> \\\r\n-e <span style=\"color: #aa5500;\">\"mtime=30\"<\/span>\r\n<\/pre>\n<\/div>\n<p>In the second snippet, you can find there is an extra command-line argument (or) extra variable <code>-e \"mtime=30\"<\/code>\u00a0which is a modified time flag. ( typical mtime in find command). It supposed to get 30 days old files for us<\/p>\n<blockquote><p><strong>Note*:\u00a0\u00a0<\/strong>you can also use +30 and -1 like you typically do in the Unix find command. with this playbook.<\/p><\/blockquote>\n<p>&nbsp;<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h2>The Playbook<\/h2>\n<p>Consider the following playbook.\u00a0 The Single Playbook would react and perform two different operations based on the availability of variables. the tasks would be executed when certain variables are defined or not defined.<\/p>\n<p>This is achieved through <strong>defined<\/strong> and <strong>undefined<\/strong>.\u00a0 The correct task would be executed based on the variables defined or provided.<\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">---\r\n - name: Find files - Playbook\r\n   hosts: appservers\r\n   tasks:\r\n\r\n   <span style=\"color: #aaaaaa; font-style: italic;\"># Case1:  when Search String and Modified time is mentioned<\/span>\r\n   - name:  Find command with *SEARCH STRING* <span style=\"color: #0000aa;\">and<\/span> *MODIFIED TIME*\r\n     shell: <span style=\"color: #aa5500;\">\"find {{Directory}} -name '{{SearchString}}' -mtime '{{mtime}}'\"<\/span>\r\n     register: case1output\r\n     when: <strong>Directory is defined and SearchString is definedand mtime is defined<\/strong>\r\n     ignore_errors: true\r\n\r\n   <span style=\"color: #aaaaaa; font-style: italic;\"># Case2: when Only Search String is mentioend but NOT Modified time(age)<\/span>\r\n   - name:  Find command with only with *SEARCH STRING*\r\n     shell: <span style=\"color: #aa5500;\">\"find {{Directory}} -name '{{SearchString}}' \"<\/span>\r\n     register: case2output\r\n     when: <strong>Directory is defined and SearchString is defined and mtime is not defined<\/strong>\r\n     ignore_errors: true\r\n     \r\n   <span style=\"color: #aaaaaa; font-style: italic;\"># In case of Case1 Success<\/span>\r\n   - name: Case1 Output &#8211; Output will be displayed only <span style=\"color: #0000aa;\">if<\/span> Case is Success (<span style=\"color: #0000aa;\">or<\/span>) it will be skipped \r\n     debug: var=case1output.stdout_lines\r\n     when: <strong>case1output.stdout_lines is <span style=\"color: #00aaaa;\">defined<\/span><\/strong>\r\n\r\n   <span style=\"color: #aaaaaa; font-style: italic;\"># In case of Case2 Success<\/span>\r\n   - name: Case2 Output &#8211; Output will be displayed only <span style=\"color: #0000aa;\">if<\/span> Case is Success (<span style=\"color: #0000aa;\">or<\/span>) it will be skipped \r\n     debug: var=case2output.stdout_lines\r\n     when: <strong>case2output.stdout_lines is <span style=\"color: #00aaaa;\">defined<\/span>\r\n<\/strong><\/pre>\n<\/div>\n<p>&nbsp;<\/p>\n<h2>How,\u00a0 Ansible Defined and Not Defined works<\/h2>\n<p>Here, if you look at the <strong>Case1<\/strong>, the condition is to make sure that all the variables are defined and having values.<\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">when: Directory is <span style=\"color: #00aaaa;\">defined<\/span> <span style=\"color: #0000aa;\">and<\/span> SearchString is <span style=\"color: #00aaaa;\">defined<\/span> <span style=\"color: #0000aa;\">and<\/span> mtime is <span style=\"color: #00aaaa;\">defined<\/span>\r\n<\/pre>\n<\/div>\n<p>where we define,\u00a0 Execute the case1 task when the <em>Directory, Search String and Modified time all three variables<\/em> are defined.<\/p>\n<p>we are validating if three variables are defined before executing this task. If anyone of these variables is not defined this task would not be executed.<\/p>\n<p>&nbsp;<\/p>\n<p>On the other hand, <strong>Case2<\/strong>\u00a0Is more similar, with a tiny difference.<\/p>\n<p>Here we are using <code>not defined<\/code> and checking only if two values are defined and one is undefined or not defined, then this task would be executed.<\/p>\n<p>this is how we are achieving the controlled execution of a task based on the variable&#8217;s availability and declaration.<\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">when: Directory is <span style=\"color: #00aaaa;\">defined<\/span> <span style=\"color: #0000aa;\">and<\/span> SearchString is <span style=\"color: #00aaaa;\">defined<\/span> <span style=\"color: #0000aa;\">and<\/span> mtime is <span style=\"color: #0000aa;\">not<\/span> <span style=\"color: #00aaaa;\">defined\r\n<\/span><\/pre>\n<\/div>\n<p>In the preceding snippets, I have highlighted the text which is\u00a0different from one another.<\/p>\n<p>&nbsp;<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h2>Realtime Testing of this playbook<\/h2>\n<p>I have two linux machines grouped into the host group named <code>appservers<\/code> \u00a0and am going to create a new directory with a few empty files.<\/p>\n<blockquote><p>Note*:\u00a0 I preferred to do all these steps with ansible\u00a0ad-hoc commands. hope you would find it helpful too<\/p><\/blockquote>\n<p>Let me introduce you the boxes.<\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\"><span style=\"color: #aa0000;\">$<\/span> <span style=\"color: #aa0000;\">ansible<\/span> appservers &#8211; list-hosts -i ansible_hosts \r\n<span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> hosts (<span style=\"color: #009999;\">2<\/span>):\r\n<span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> <span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> mwiapp04\r\n<span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> <span style=\"color: #ff0000; background-color: #ffaaaa;\">\u00a0<\/span> mwiapp05\r\n<\/pre>\n<\/div>\n<p>Yes those are my box names <code>mwiapp04<\/code> and <code>mwiapp05<\/code><\/p>\n<h3>Step1: Create a Directory and Files<\/h3>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\"><span style=\"color: #aa0000;\">$<\/span> <span style=\"color: #aa0000;\">ansible<\/span> appservers -m shell -a <span style=\"color: #aa5500;\">\"mkdir -p \/var\/tmp\/filerepo \\<\/span>\r\n<span style=\"color: #aa5500;\">&amp;&amp; cd \/var\/tmp\/filerepo &amp;&amp; touch file.txt file1.txt file2.txt file3.txt file4.txt\"<\/span> \\\r\n-i ansible_hosts\r\n\r\nmwiapp05 | SUCCESS | rc=<span style=\"color: #009999;\">0<\/span> &gt;&gt;\r\nmwiapp04 | SUCCESS | rc=<span style=\"color: #009999;\">0<\/span> &gt;&gt;\r\n<\/pre>\n<\/div>\n<p>&nbsp;<\/p>\n<h3>Step2: Make sure the files are created<\/h3>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\"><span style=\"color: #aa0000;\">$<\/span> <span style=\"color: #aa0000;\">ansible<\/span> appservers -m shell -a <span style=\"color: #aa5500;\">\"ls -lrt \/var\/tmp\/filerepo\"<\/span> -i ansible_hosts \r\nmwiapp04 | SUCCESS | rc=<span style=\"color: #009999;\">0<\/span> &gt;&gt;\r\ntotal <span style=\"color: #009999;\">0<\/span>\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file4.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file3.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file2.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file1.txt\r\n\r\nmwiapp05 | SUCCESS | rc=<span style=\"color: #009999;\">0<\/span> &gt;&gt;\r\ntotal <span style=\"color: #009999;\">0<\/span>\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file4.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file3.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file2.txt\r\n-rw-rw-r--. <span style=\"color: #009999;\">1<\/span> vagrant vagrant <span style=\"color: #009999;\">0<\/span> Nov <span style=\"color: #009999;\">30<\/span> <span style=\"color: #009999;\">23<\/span>:<span style=\"color: #009999;\">56<\/span> file1.txt\r\n<\/pre>\n<\/div>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>Step3: Now Execute our Playbook<\/h3>\n<p><strong>Without modified time<\/strong><\/p>\n<p><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">ansible-playbook FindOldfiles.yml \\\r\n-i ansible_hosts \\\r\n-e <span style=\"color: #aa5500;\">\"Directory=\/var\/tmp\/filerepo\"<\/span> \\\r\n-e <span style=\"color: #aa5500;\">\"SearchString=*.txt\"<\/span>\r\n<\/pre>\n<\/div>\n<p><strong>With modified\u00a0time<\/strong><!-- HTML generated using hilite.me --><\/p>\n<div style=\"background: #ffffff; overflow: auto; width: auto; border: solid gray; border-width: .1em .1em .1em .8em; padding: .2em .6em;\">\n<pre style=\"margin: 0; line-height: 125%;\">ansible-playbook FindOldfiles.yml \\\r\n-i ansible_hosts \\\r\n-e <span style=\"color: #aa5500;\">\"Directory=\/var\/tmp\/filerepo\"<\/span> \\\r\n-e <span style=\"color: #aa5500;\">\"SearchString=*.txt\"<\/span> \\\r\n-e <span style=\"color: #aa5500;\">\"mtime=10\"<\/span>\r\n<\/pre>\n<\/div>\n<h3>The Execution Output &#8211; Terminal Recording<\/h3>\n<p><script id=\"asciicast-9dsWv1eyZrbJ5rjP6ICJ3NDYf\" src=\"https:\/\/asciinema.org\/a\/9dsWv1eyZrbJ5rjP6ICJ3NDYf.js\" async><\/script><\/p>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3><strong>The VLOG of this post<\/strong><\/h3>\n<div class=\"lyte-wrapper\" style=\"width:640px;max-width:100%;margin:5px;\"><div class=\"lyMe\" id=\"WYL_NESw7cnEKdQ\"><div id=\"lyte_NESw7cnEKdQ\" data-src=\"\/\/i.ytimg.com\/vi\/NESw7cnEKdQ\/hqdefault.jpg\" class=\"pL\"><div class=\"tC\"><div class=\"tT\"><\/div><\/div><div class=\"play\"><\/div><div class=\"ctrl\"><div class=\"Lctrl\"><\/div><div class=\"Rctrl\"><\/div><\/div><\/div><noscript><a href=\"https:\/\/youtu.be\/NESw7cnEKdQ\"><img src=\"https:\/\/i.ytimg.com\/vi\/NESw7cnEKdQ\/0.jpg\" alt=\"\" width=\"640\" height=\"340\" \/><br \/>Watch this video on YouTube<\/a><\/noscript><\/div><\/div><div class=\"lL\" style=\"max-width:100%;width:640px;margin:5px;\"><\/div><\/p>\n<h2>Conclusion<\/h2>\n<p>Hope the examples on how to use ansible when <code>defined<\/code> and <code>undefined<\/code><\/p>\n<p>Please leave your rating here [ratings]<\/p>\n<p>Let me know your valuable comments and feel free to write it up in case of any feedback or questions<\/p>\n<p>Thanks,<br \/>\nSaravAK<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670578278\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"2358\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670578278\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670578278\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>The Purpose The purpose of this post is to give you a real-time example and explanation of how ansible variable is defined and not defined (undefined) conditionals are working along with &#8220;when&#8221;\u00a0conditional statement and how it controls the flow of the task and the play. The following ansible playbook is[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":2367,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[98],"tags":[158,156,157],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ansible When Variable is defined or undefined Examples<\/title>\n<meta name=\"description\" content=\"Ansible When Variable is Defined examples. Ansible When variable is undefined examples. How to find if the variable is defined in Ansible using when. How to check if the variable is empty or defined or undefined in Ansible using ansible when. Execute a task when a variable is defined in ansible.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ansible When Variable is defined or undefined Examples\" \/>\n<meta property=\"og:description\" content=\"Ansible When Variable is Defined examples. Ansible When variable is undefined examples. How to find if the variable is defined in Ansible using when. How to check if the variable is empty or defined or undefined in Ansible using ansible when. Execute a task when a variable is defined in ansible.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2018-12-01T01:55:08+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-02-10T19:50:48+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/12\/Screen-Shot-2018-12-01-at-7.06.23-AM.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1438\" \/>\n\t<meta property=\"og:image:height\" content=\"807\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/12\/Screen-Shot-2018-12-01-at-7.06.23-AM.png\",\"width\":1438,\"height\":807},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/\",\"name\":\"Ansible When Variable is defined or undefined Examples\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#primaryimage\"},\"datePublished\":\"2018-12-01T01:55:08+00:00\",\"dateModified\":\"2022-02-10T19:50:48+00:00\",\"description\":\"Ansible When Variable is Defined examples. Ansible When variable is undefined examples. How to find if the variable is defined in Ansible using when. How to check if the variable is empty or defined or undefined in Ansible using ansible when. Execute a task when a variable is defined in ansible.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Ansible When Variable is defined or undefined Examples\",\"datePublished\":\"2018-12-01T01:55:08+00:00\",\"dateModified\":\"2022-02-10T19:50:48+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#primaryimage\"},\"keywords\":\"ansible defined examples,ansible when variable is defined,when variable is defined or not defined ansible\",\"articleSection\":\"Ansible\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-when-variable-is-defined-or-undefined-examples\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2358"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=2358"}],"version-history":[{"count":24,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2358\/revisions"}],"predecessor-version":[{"id":5710,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2358\/revisions\/5710"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/2367"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=2358"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=2358"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=2358"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
{"id":8070,"date":"2022-05-12T17:49:13","date_gmt":"2022-05-12T12:19:13","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=8070"},"modified":"2022-05-12T23:37:32","modified_gmt":"2022-05-12T18:07:32","slug":"ansible-slack-notification","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/","title":{"rendered":"Ansible Slack &#8211; How to send Slack notification from Ansible"},"content":{"rendered":"<p>In this post let us quickly show you how to send slack notifications from the Ansible playbook.<\/p>\n<p>Being notified is always good instead of sitting and waiting for a task to complete and looking at the screen.<\/p>\n<p>Also if something fails, we can immediately look into it with a quick notification sent to our slack channel.<\/p>\n<p>So let us see how to use the famous Slack with Ansible and send notifications from Ansible to slack.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack.png\"><img class=\"post-img alignnone wp-image-8460 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack.png\" alt=\"Ansible Slack\" width=\"1748\" height=\"1240\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack.png 1748w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack-300x213.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack-1024x726.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack-768x545.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack-1536x1090.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack-90x65.png 90w\" sizes=\"(max-width: 1748px) 100vw, 1748px\" \/><\/a><\/p>\n<h2>Configuring Slack &#8211; Creating webhook URL<\/h2>\n<p>To be able to send notifications from Ansible or any other service to slack, you have to create a webhook which can be done by creating a new Slack App.<\/p>\n<p>Goto <a href=\"https:\/\/api.slack.com\/apps\">https:\/\/api.slack.com\/apps<\/a><\/p>\n<p>Click on <strong>Create new App\u00a0<\/strong><\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-scaled.jpg\"><img class=\"post-img alignnone wp-image-8447 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-scaled.jpg\" alt=\"Ansible Notification\" width=\"2560\" height=\"1076\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-scaled.jpg 2560w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-300x126.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-1024x431.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-768x323.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-1536x646.jpg 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.13.01-PM-2048x861.jpg 2048w\" sizes=\"(max-width: 2560px) 100vw, 2560px\" \/><\/a><\/p>\n<p>you will see an option to start from scratch or to use the existing manifests. Choose <strong>scratch<\/strong><\/p>\n<p>Once you have chosen scratch. you would see a model to fill in the name of your application and choose the workspace.<\/p>\n<p>If you are logged in to more than one Slack workspace you might see all of those workspaces on a dropdown, choose your org\/workspace<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM.jpg\"><img class=\"post-img alignnone wp-image-8448 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM.jpg\" alt=\"Ansible Slack\" width=\"2186\" height=\"1428\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM.jpg 2186w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM-300x196.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM-1024x669.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM-768x502.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM-1536x1003.jpg 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.21.44-PM-2048x1338.jpg 2048w\" sizes=\"(max-width: 2186px) 100vw, 2186px\" \/><\/a><\/p>\n<p>I named my app as <strong>Ansible-Bot<\/strong> and chose <strong>Gritfy<\/strong> as the workspace<\/p>\n<p>Now click on <strong>Create App\u00a0<\/strong><\/p>\n<p>You would see the following screen with an option to configure your slack app further.<\/p>\n<p>You can change the ICON and the App name and do a lot of customizations. I will leave that to your choice.<\/p>\n<p>Now we have to create an <strong>Incoming Webhooks.\u00a0<\/strong>Click on <code>Incoming Webhooks<\/code> under the features side menu to begin<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM.png\"><img class=\"post-img alignnone wp-image-8449 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM.png\" alt=\"Slack webhook\" width=\"2380\" height=\"1024\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM.png 2380w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM-300x129.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM-1024x441.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM-768x330.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM-1536x661.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-12.33.00-PM-2048x881.png 2048w\" sizes=\"(max-width: 2380px) 100vw, 2380px\" \/><\/a><\/p>\n<p>Toggle the switch on the top to make it <strong>on\u00a0<\/strong><\/p>\n<p>Once you have enabled it you will see a screen with the following content<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM.jpg\"><img class=\"post-img alignnone wp-image-8450 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM.jpg\" alt=\"Slack webhook\" width=\"1412\" height=\"1726\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM.jpg 1412w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM-245x300.jpg 245w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM-838x1024.jpg 838w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM-768x939.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.05.22-PM-1257x1536.jpg 1257w\" sizes=\"(max-width: 1412px) 100vw, 1412px\" \/><\/a><\/p>\n<p>Now click on <strong>Add New Webhook to Workspace<\/strong><\/p>\n<p>You would be seeing a screen to get authorization to connect to your workspace like given below.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM.png\"><img class=\"post-img alignnone wp-image-8451 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM.png\" alt=\"ansible bot slack\" width=\"1632\" height=\"1326\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM.png 1632w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM-300x244.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM-1024x832.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM-768x624.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.19.16-PM-1536x1248.png 1536w\" sizes=\"(max-width: 1632px) 100vw, 1632px\" \/><\/a><\/p>\n<p>There you have to choose the <strong>slack channel name<\/strong> to which this incoming webhook would post messages.<\/p>\n<p>You would see the list of channels available in your workspace on the dropdown. Select one.<\/p>\n<p>It is mandatory for you to have the channel created prior doing this integration so that you can see the channel name available for you to choose.<\/p>\n<p>I am selecting our existing channel named <code>#ansible-notifications<\/code><\/p>\n<p>and click <strong>Allow\u00a0<\/strong>once you have selected to move on.<\/p>\n<p>Now you will see your <strong>Webhook URL<\/strong> available and listed in the incoming webhooks section like this<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1.png\"><img class=\"post-img alignnone wp-image-8453 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1.png\" alt=\"ansible slack configuration\" width=\"1354\" height=\"984\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1.png 1354w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1-300x218.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1-1024x744.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1-768x558.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-1.28.38-PM-1-90x65.png 90w\" sizes=\"(max-width: 1354px) 100vw, 1354px\" \/><\/a><\/p>\n<p>You can find the webhook URL and copy it, which can later be used in Ansible to send notifications<\/p>\n<p>webhook slack URL would like this ( the actual token is obfuscated for security reasons )<\/p>\n<pre>https:\/\/hooks.slack.com\/services\/**********\/**********\/************************<\/pre>\n<p>&nbsp;<\/p>\n<h3>Validating the webhook<\/h3>\n<p>Before we can use this webhook in our ansible playbook let us use the sample CURL request given by slack and validate.<\/p>\n<pre>curl -X POST -H 'Content-type: application\/json' &#8211; data '{\"text\":\"Hello, World!\"}' https:\/\/hooks.slack.com\/services\/**********\/**********\/************************<\/pre>\n<p>If everything is done right, when you are executing the CURL in your terminal. you would get a message <code>Hello World<\/code> from the <code>Ansible-bot<\/code> to the <code>ansible-notifications<\/code> channel<\/p>\n<p>In the previous step when you are done creating the webhook, there would be another message posted on the channel <code>added an integration to this channel:\u00a0<span class=\"c-link--button\" tabindex=\"-1\" role=\"button\" aria-haspopup=\"menu\" aria-expanded=\"false\" aria-disabled=\"false\" data-remove-tab-index=\"true\" data-tab-index-to-restore=\"0\">Ansible-Bot<\/span><\/code><\/p>\n<p>Here are the messages you might possibly see on your channel if everything is configured right<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM.png\"><img class=\"post-img alignnone wp-image-8454 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM.png\" alt=\"Ansible Slack\" width=\"1342\" height=\"244\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM.png 1342w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM-300x55.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM-1024x186.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.00.09-PM-768x140.png 768w\" sizes=\"(max-width: 1342px) 100vw, 1342px\" \/><\/a><\/p>\n<p>Now we have the webhook URL ready,\u00a0 let us use it in the Ansible playbook to send notifications<\/p>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h2>Ansible Playbook to send Notifications using Slack<\/h2>\n<p>Now we can put this webhook URL into the Ansible playbook and test it out.<\/p>\n<p>we will give you a few example playbooks where we send slack notifications from an ansible playbook<\/p>\n<h3>Send Slack notification after a task is completed or failed<\/h3>\n<p>Here is the ansible playbook where we wait for the file to exist or be available, using ansible retry.<\/p>\n<p>Based on the final status of the task, we will be sending a slack notification directly from the ansible playbook<\/p>\n<p>In the following playbook, you need replace the <strong>token<\/strong> field and the <strong>channel<\/strong><\/p>\n<pre>token: **********\/**********\/************************\r\nchannel: '#ansible-notifications'\r\n\r\n<\/pre>\n<p>the token can be directly taken from the webhook URL<\/p>\n<pre>https:\/\/hooks.slack.com\/services\/**********\/**********\/************************<\/pre>\n<p>You can copy the random strings, basically everything after <code>https:\/\/hooks.slack.com\/services\/<\/code><\/p>\n<blockquote><p>Note*: For security reasons we have replaced the actual characters with <code>*<\/code><\/p><\/blockquote>\n<p>here is the complete playbook<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">---\r\n- hosts: localhost\r\n  tasks:\r\n  - name: Wait for the file to be available\r\n    register: fileexists\r\n    file:\r\n      path: \/tmp\/myprocess.pid\r\n      state: file\r\n    until: fileexists is not failed\r\n    retries: 5\r\n    delay: 10\r\n    ignore_errors: true\r\n  \r\n  - name: notify Slack that the job is failing\r\n    tags: slack\r\n    community.general.slack:\r\n      token: T0266NX8KPF\/B03FHCHAZJM\/fk4OApn8KMGilhxxVtQ\r\n      msg: |\r\n          ### StatusUpdate ###\r\n          &#8211; ------------------------------------\r\n          ``\r\n          `Server`: {{ansible_host}}\r\n          `Status`: Ansible File Watcher Job failed\r\n          &#8211; ------------------------------------\r\n      channel: '#ansible-notifications'\r\n      color: good\r\n      username: 'Ansible on {{ inventory_hostname }}'\r\n      link_names: 0\r\n      parse: 'none'\r\n    when: fileexists is failed\r\n    ignore_errors: true\r\n\r\n  - name: notify Slack that the job is Successful\r\n    tags: slack\r\n    community.general.slack:\r\n      token: T0266NX8KPF\/B03FHCHAZJM\/fk4OApn8KMGilhxxVtQ\r\n      msg: |\r\n          ### StatusUpdate ###\r\n          &#8211; ------------------------------------\r\n          ``\r\n          `Server`: {{ansible_host}}\r\n          `Status`: Ansible File Watcher Job Successful.\r\n          &#8211; ------------------------------------\r\n      channel: '#ansible-notifications'\r\n      color: good\r\n      username: 'Ansible on {{ inventory_hostname }}'\r\n      link_names: 0\r\n      parse: 'none'\r\n    when: fileexists is not failed<\/pre>\n<p>&nbsp;<\/p>\n<p>Here is the execution result of the playbook<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM.png\"><img class=\"post-img alignnone wp-image-8455 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM.png\" alt=\"Ansible Slack\" width=\"3738\" height=\"2160\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM.png 3738w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM-300x173.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM-1024x592.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM-768x444.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM-1536x888.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.06.42-PM-2048x1183.png 2048w\" sizes=\"(max-width: 3738px) 100vw, 3738px\" \/><\/a><\/p>\n<p>I have received the message in our <strong>ansible-notifications<\/strong> slack channel.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM.png\"><img class=\"post-img alignnone wp-image-8456 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM.png\" alt=\"ansible slack notification\" width=\"1230\" height=\"616\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM.png 1230w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM-300x150.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM-1024x513.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM-768x385.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Screenshot-2022-05-12-at-4.13.13-PM-840x420.png 840w\" sizes=\"(max-width: 1230px) 100vw, 1230px\" \/><\/a><\/p>\n<p>We have successfully validated that we are able to send messages from Ansible to Slack.<\/p>\n<p>The playbook we have used here is from our another article on Ansible retry. Do read it for further reference.<\/p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"8OLvqt4QYs\"><p><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-retry-examples\/\">Ansible Retry Examples &#8211; Retry a task until condition met |  DevopsJunction<\/a><\/p><\/blockquote>\n<p><iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" title=\"&#8220;Ansible Retry Examples &#8211; Retry a task until condition met |  DevopsJunction&#8221; &#8212; Middleware Inventory\" src=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-retry-examples\/embed\/#?secret=8OLvqt4QYs\" data-secret=\"8OLvqt4QYs\" width=\"600\" height=\"338\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"><\/iframe><\/p>\n<p>&nbsp;<\/p>\n<h2>Send Slack notification once provisioning complete ( Additional )<\/h2>\n<p>Here is one more example that I have created for the ansible slack example.<\/p>\n<p>In this playbook we are performing a list of tasks as a server provisioning and installing a NODE JS application<\/p>\n<p>we have used various ansible modules\/features in this to relate to the realtime use case<\/p>\n<ol>\n<li>Ansible <strong>apt<\/strong> module to download packages and install on ubuntu<\/li>\n<li><strong>Shell<\/strong> module to validate the nodejs version and npm<\/li>\n<li>Validate the installation using an ansible <strong>assert<\/strong> module<\/li>\n<li><strong>file<\/strong> module to create a directory and to change ownership<\/li>\n<li><strong>git<\/strong> module to download source code from GitHub<\/li>\n<li><strong>async and poll<\/strong> module to start the job async and poll<\/li>\n<li><strong>wait_for<\/strong> module to validate the node server is up and running<\/li>\n<\/ol>\n<p>This would be a good learning material for you.<\/p>\n<blockquote><p>Note*: I have written dedicated articles on all these modules with various examples. <a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\">you can refer it here<\/a> we have around 60+ articles on ansible. <a href=\"https:\/\/www.middlewareinventory.com\/blog\/category\/ansible\/\">read all of them here<\/a><\/p><\/blockquote>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">---\r\n  - name: Install and Launch the Simple NodeJS Application\r\n    hosts: testserver\r\n    vars:\r\n       - destdir: \/apps\/sampleapp\r\n       - gittoken: *****************\r\n\r\n    pre_tasks:\r\n      - name : install dependencies before starting\r\n        become: yes\r\n        register: aptinstall\r\n        apt:\r\n           name: \r\n            - nodejs\r\n            - npm\r\n            - git\r\n           state: latest\r\n           update_cache: yes\r\n      \r\n      - name : validate the nodejs installation\r\n        debug: msg=\"Installation of node is Successfull\"\r\n        when: aptinstall is changed\r\n    \r\n    tasks:\r\n       - name: Version of Node and NPM\r\n         shell:\r\n            \"npm -v &amp;&amp; nodejs -v\"\r\n         register: versioninfo\r\n\r\n       - name: Validate if the installation is intact\r\n         assert:\r\n          that: \"versioninfo is changed\"\r\n\r\n      \r\n       - name: Create Dest Directory if not exists\r\n         become: yes\r\n         file: \r\n          path: \"{{ destdir }}\"\r\n          state: directory\r\n          owner: vagrant\r\n          group: vagrant\r\n          mode: 0755\r\n\r\n       - name: Download the NodeJS code from the GitRepo\r\n         become: yes\r\n         git:\r\n            repo: 'https:\/\/{{gittoken}}@github.com\/AKSarav\/SampleNodeApp.git'\r\n            dest: \"{{ destdir }}\"\r\n\r\n       - name: Change the ownership of the directory\r\n         become: yes\r\n         file:\r\n           path: \"{{destdir}}\"\r\n           owner: \"vagrant\"\r\n         register: chgrpout\r\n\r\n       - name: Install Dependencies with NPM install command\r\n         shell:\r\n            \"npm install\"\r\n         args:\r\n            chdir: \"{{ destdir }}\"\r\n         register: npminstlout\r\n\r\n       - name: Debug npm install command\r\n         debug: msg='{{npminstlout.stdout_lines}}'\r\n\r\n\r\n       - name: Start the App\r\n         async: 10\r\n         poll: 0\r\n         shell:\r\n            \"(node index.js &gt; nodesrv.log 2&gt;&amp;1 &amp;)\"\r\n         args:\r\n           chdir: \"{{ destdir }}\"\r\n         register: appstart\r\n\r\n       - name: Validating the port is open\r\n         tags: nodevalidate\r\n         wait_for:\r\n           host: \"localhost\"\r\n           port: 5000\r\n           delay: 10\r\n           timeout: 30\r\n           state: started\r\n           msg: \"NodeJS server is not running\"\r\n\r\n    post_tasks:\r\n        - name: notify Slack that the servers have been updated \r\n          tags: slack\r\n          community.general.slack:\r\n            token: **********\/**********\/************************ \r\n            msg: |\r\n                ### StatusUpdate ###\r\n                &#8211; ------------------------------------\r\n                ``\r\n                `Server`: {{ansible_host}}\r\n                `Status`: NodeJS Sample Application installed successfully\r\n                &#8211; ------------------------------------\r\n            channel: '#ansible'\r\n            color: good\r\n            username: 'Ansible on {{ inventory_hostname }}'\r\n            link_names: 0\r\n            parse: 'none'\r\n          delegate_to: localhost<\/pre>\n<p>&nbsp;<\/p>\n<p>this playbook would do everything necessary for installing and running the node application.<\/p>\n<p>once the application started running you would be getting a slack notification. Is not that cool?<\/p>\n<p>Automation is not here to replace us but to give us some time to relax \ud83d\ude1b<\/p>\n<p>&nbsp;<\/p>\n<h2>Conclusion<\/h2>\n<p>Hope this article helped you to understand how Ansible can be used with slack and how to send messages to slack from ansible.<\/p>\n<p>We have also learnt how to configure the slack webhook and use the webhook in the ansible slack module.<\/p>\n<p>we can now send slack notifications for failed or successful jobs and notify the stakeholders.<\/p>\n<p>Hope this article helps you.<\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>We at Gritfy do Product Development and DevOps\/SRE Support services. If you have any requirements.<\/p>\n<p>Please do write to us at <a href=\"mailto:rumenlishkoff@gmail.com\">rumenlishkoff@gmail.com<\/a><\/p>\n<p>&nbsp;<\/p>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577387\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"8070\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577387\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577387\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this post let us quickly show you how to send slack notifications from the Ansible playbook. Being notified is always good instead of sitting and waiting for a task to complete and looking at the screen. Also if something fails, we can immediately look into it with a quick[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":8460,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[98],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ansible Slack - How to send Slack notification from Ansible | DevopsJunction<\/title>\n<meta name=\"description\" content=\"Ansible Slack example. How to send Slack notifications from Ansible. Ansible playbook example to send notification when the job is failed or successful.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ansible Slack - How to send Slack notification from Ansible | DevopsJunction\" \/>\n<meta property=\"og:description\" content=\"Ansible Slack example. How to send Slack notifications from Ansible. Ansible playbook example to send notification when the job is failed or successful.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-05-12T12:19:13+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-05-12T18:07:32+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/Ansible-slack.png\",\"width\":1748,\"height\":1240,\"caption\":\"Ansible Slack\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\",\"name\":\"Ansible Slack - How to send Slack notification from Ansible | DevopsJunction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#primaryimage\"},\"datePublished\":\"2022-05-12T12:19:13+00:00\",\"dateModified\":\"2022-05-12T18:07:32+00:00\",\"description\":\"Ansible Slack example. How to send Slack notifications from Ansible. Ansible playbook example to send notification when the job is failed or successful.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Ansible Slack &#8211; How to send Slack notification from Ansible\",\"datePublished\":\"2022-05-12T12:19:13+00:00\",\"dateModified\":\"2022-05-12T18:07:32+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#primaryimage\"},\"articleSection\":\"Ansible\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8070"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=8070"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8070\/revisions"}],"predecessor-version":[{"id":8470,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8070\/revisions\/8470"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8460"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=8070"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=8070"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=8070"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
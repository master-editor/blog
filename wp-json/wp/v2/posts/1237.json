{"id":1237,"date":"2018-05-26T02:03:18","date_gmt":"2018-05-25T20:33:18","guid":{"rendered":"http:\/\/www.middlewareinventory.com\/?p=1237"},"modified":"2018-07-21T01:05:30","modified_gmt":"2018-07-20T19:35:30","slug":"f5-list-virtual-servers-persistence-profiles","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/","title":{"rendered":"F5 &#8211; How to List All Virtual Servers with Persistence Profiles"},"content":{"rendered":"<p>For F5 BigIP professionals\/administrators, it is a\u00a0tough but indispensable job, to generate reports of virtual servers and their associated resources like iRule, Persistence Profile, Client SSL profile etc.<\/p>\n<p>I have already written various scripts to efficiently perform some of these reporting tasks and shared it here. <a href=\"https:\/\/www.middlewareinventory.com\/blog\/category\/f5-big-ip\/\">you can find them here<\/a><\/p>\n<p>This post joins the same list and this script could be used for the following scenarios<\/p>\n<ol>\n<li>To list all Persistence profiles and the Virtual servers associated with them<\/li>\n<li>To list all virtual servers having session persistence enabled along with the persistence profile name.<\/li>\n<li>To generate CSV report of virtual servers having\u00a0\u00a0persistence profiles enabled<\/li>\n<li>To generate\u00a0CSV report of persistence profiles and the virtual servers using them.<\/li>\n<\/ol>\n<p>This is created on top of F5 BIGIP&#8217;s inbuilt\u00a0\u00a0<code>tmsh<\/code>\u00a0command\u00a0line interface.<\/p>\n<h3><strong>Prerequisites:<\/strong><\/h3>\n<ol>\n<li>\u00a0You must have <code>Advanced Shell Access<\/code> in F5 Big IP<\/li>\n<li>\u00a0You should have <strong>python<\/strong> installed in the device ( This script tested with Python 2.6 )<\/li>\n<li>\u00a0Some basic command line skills ( unix )<\/li>\n<li>\u00a0putty to SSH<\/li>\n<\/ol>\n<h3><strong>Version\u00a0<\/strong><\/h3>\n<p>This script was tested with 11.6 and 13.1 F5 BigIP distributions<\/p>\n<h3><strong>How to execute<\/strong><\/h3>\n<p><strong>Step1:\u00a0<\/strong> Login to the server using your favorite SSH terminal tool<\/p>\n<p><strong>Step2:\u00a0\u00a0<\/strong>Copy the script( Choose according to your requirement, there are two scripts given below)\u00a0 and save it to your desired location<\/p>\n<p><strong>Step3:\u00a0\u00a0<\/strong>Execute the script as follows<\/p>\n<p><code>python &lt;scriptname.py&gt;\u00a0<\/code><\/p>\n<table style=\"width: 100%; border-collapse: collapse; border-style: outset; border-color: #d1c9c9; background-color: #d7dcde;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 100%;\"><strong>Note*: <\/strong>By default, the script is designed to print the output in a CSV format. You can redirect them to a <strong>.csv<\/strong>\u00a0file\u00a0and download and open it in excel. If you would like take a CSV report use the following command it will avoid the F5 Info &amp; Error messages so that you will get just exactly what you are looking for<\/p>\n<p><strong>python &lt;scriptname.py&gt; 2&gt;\/dev\/null &gt;\u00a0 somereport.csv<\/strong><\/td>\n<\/tr>\n<\/tbody>\n<\/table>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3><b>Sample Result:<\/b><\/h3>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM.png\"><img class=\"alignnone size-full wp-image-1239\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM.png\" alt=\"\" width=\"523\" height=\"383\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM.png 523w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM-300x220.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM-90x65.png 90w\" sizes=\"(max-width: 523px) 100vw, 523px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>The Source Code:<\/h3>\n<p>This script should be used when you have <strong>multiple partitions<\/strong> in your F5-BigIP<\/p>\n<p><script src=\"https:\/\/gist.github.com\/AKSarav\/b905438b115e43a22f9e90ae5c1f2d8c.js\"><\/script><\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>This script should be used when you have no partitions (or) just one default <code>common<\/code> Partition<br \/>\n<script src=\"https:\/\/gist.github.com\/AKSarav\/5f8c5c8be1ba2c17d57b40ddfcee0a5b.js\"><\/script><\/p>\n<p>&nbsp;<\/p>\n<p>Hope this Helps!<\/p>\n<p>Cheers,<\/p>\n<p>A K S A RA V<\/p>\n<p>Write to us at\u00a0<a href=\"mailto:aksarav@mwinventory.in\">aksarav@mwinventory.in<\/a><\/p>\n<p><i class=\"fa fa-facebook\"><\/i>\u00a0Follow us on\u00a0<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a>\u00a0or\u00a0<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a><\/p>\n<p><i class=\"fa fa-whatsapp\"><\/i>\u00a0To Join our\u00a0Community in\u00a0<a href=\"https:\/\/chat.whatsapp.com\/7Wn9PyXGw7GI3MMmFux6kU\">Whatsapp \u2013 Click here\u00a0<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>For F5 BigIP professionals\/administrators, it is a\u00a0tough but indispensable job, to generate reports of virtual servers and their associated resources like iRule, Persistence Profile, Client SSL profile etc. I have already written various scripts to efficiently perform some of these reporting tasks and shared it here. you can find them[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":1239,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[59],"tags":[91,88,89,90],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>F5 - How to List All Virtual Servers with Persistence Profiles<\/title>\n<meta name=\"description\" content=\"F5 BiGIP tmsh python script to list all Persistence profiles and the Virtual servers associated with them, F5 BiGIP tmsh python script to list all virtual servers having session persistence enabled along with the persistence profile name. The script prints the output in CSV format by default.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"F5 - How to List All Virtual Servers with Persistence Profiles\" \/>\n<meta property=\"og:description\" content=\"F5 BiGIP tmsh python script to list all Persistence profiles and the Virtual servers associated with them, F5 BiGIP tmsh python script to list all virtual servers having session persistence enabled along with the persistence profile name. The script prints the output in CSV format by default.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2018-05-25T20:33:18+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2018-07-20T19:35:30+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM.png\" \/>\n\t<meta property=\"og:image:width\" content=\"523\" \/>\n\t<meta property=\"og:image:height\" content=\"383\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2018\/05\/Screen-Shot-2018-05-26-at-2.00.36-AM.png\",\"width\":523,\"height\":383},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/\",\"name\":\"F5 - How to List All Virtual Servers with Persistence Profiles\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#primaryimage\"},\"datePublished\":\"2018-05-25T20:33:18+00:00\",\"dateModified\":\"2018-07-20T19:35:30+00:00\",\"description\":\"F5 BiGIP tmsh python script to list all Persistence profiles and the Virtual servers associated with them, F5 BiGIP tmsh python script to list all virtual servers having session persistence enabled along with the persistence profile name. The script prints the output in CSV format by default.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"F5 &#8211; How to List All Virtual Servers with Persistence Profiles\",\"datePublished\":\"2018-05-25T20:33:18+00:00\",\"dateModified\":\"2018-07-20T19:35:30+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#primaryimage\"},\"keywords\":\"F5 BigIP,F5 scripts,tmsh python script,tmsh script\",\"articleSection\":\"F5-Big-IP\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/f5-list-virtual-servers-persistence-profiles\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1237"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=1237"}],"version-history":[{"count":7,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1237\/revisions"}],"predecessor-version":[{"id":1252,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/1237\/revisions\/1252"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/1239"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=1237"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=1237"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=1237"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
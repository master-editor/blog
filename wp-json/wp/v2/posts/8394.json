{"id":8394,"date":"2022-05-04T00:39:42","date_gmt":"2022-05-03T19:09:42","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=8394"},"modified":"2022-11-11T00:48:12","modified_gmt":"2022-11-10T19:18:12","slug":"pulumi-aws-example","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/","title":{"rendered":"Pulumi AWS Example &#8211; Creating VPC, Subnets, EC2, Bastion host"},"content":{"rendered":"<p>In this article, we are going to see how to set up compute infrastructure consisting of virtual private cloud, subnets, internet gateway,\u00a0 NAT gateway, route tables and EC2 instances in Amazon web services using one of the most competent IaC tool &#8216;Pulumi&#8217;<\/p>\n<p>In addition to this, we shall see how to set up &#8216;bastion host&#8217; in order to connect to instances running in the private subnet.<\/p>\n<p>By following this article you should be able to set up your AWS infrastructure with following resources without any hustle<\/p>\n<ul>\n<li>A virtual private cloud (VPC) in your AWS account<\/li>\n<li>Two subnets inside VPC &#8211; 1 public subnet, 1 private subnet<\/li>\n<li>Internet gateway attached to VPC<\/li>\n<li>Elastic IP<\/li>\n<li>A NAT gateway attached to public subnet<\/li>\n<li>Route table attached to the<strong> internet gateway<\/strong> &#8211; public route table<\/li>\n<li>Route table attached to <strong>NAT gateway<\/strong> &#8211; private route table<\/li>\n<li>A security group consisting of inbound and outbound rules<\/li>\n<li>An ec2 key-pair<\/li>\n<li>Two ec2 instances &#8211; 1 public instance, 1 private instance<\/li>\n<\/ul>\n<p>&nbsp;<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2.jpg\"><img class=\"post-img alignnone wp-image-8435 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2.jpg\" alt=\"pulumi aws\" width=\"1748\" height=\"1240\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2.jpg 1748w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2-300x213.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2-1024x726.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2-768x545.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2-1536x1090.jpg 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2-90x65.jpg 90w\" sizes=\"(max-width: 1748px) 100vw, 1748px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3><span id=\"Pre-requisites\" class=\"ez-toc-section\">Pre-requisites<\/span><\/h3>\n<ul>\n<li>An AWS Account<\/li>\n<li>An AWS CLI needs to be installed<\/li>\n<li>Your AWS credentials.\n<ul>\n<li>You can create a new Access Key on this page. <a href=\"https:\/\/console.aws.amazon.com\/iam\/home?#\/security_credentials\" rel=\"nofollow\">link<\/a><\/li>\n<\/ul>\n<\/li>\n<li>Python3 needs to be installed on the machine<\/li>\n<li>Pulumi Engine needs to be installed in the machine. <a href=\"https:\/\/www.pulumi.com\/docs\/get-started\/aws\/begin\/\" rel=\"nofollow\">link<\/a><\/li>\n<\/ul>\n<p>&nbsp;<\/p>\n<h3><span id=\"Set-up_Instructions\" class=\"ez-toc-section\">Set-up Instructions<\/span><\/h3>\n<ul>\n<li>\n<p dir=\"auto\">Install Python3, pulumi locally.<\/p>\n<ul>\n<li><a href=\"https:\/\/linuxconcept.com\/how-to-install-python-3-on-rhel-8-red-hat-enterprise-linux\/\" rel=\"nofollow\">Python3 installation<\/a><\/li>\n<li>Pulumi :\n<ul>\n<li><a href=\"https:\/\/www.pulumi.com\/docs\/get-started\/aws\/begin\/\" rel=\"nofollow\">Download Pulumi<\/a><\/li>\n<li><a href=\"https:\/\/www.pulumi.com\/docs\/get-started\/aws\/begin\/\" rel=\"nofollow\">Install Pulumi<\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<li>\n<p dir=\"auto\">Set up AWS credentials in ~\/.aws\/credentials.<\/p>\n<ul>\n<li>The easiest way to do so is by setting up the AWS CLI.\n<ul>\n<li><a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/cli-chap-install.html\" rel=\"nofollow\">Install CLI<\/a><\/li>\n<li><a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/install-cliv2-linux.html\" rel=\"nofollow\">Install CLI on Linux<\/a><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<li>\n<p dir=\"auto\">once\u00a0<code>aws-cli<\/code>\u00a0is installed in the host machine, set up AWS credentials using the below command<\/p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\">\n<pre class=\"notranslate\"><code class=\"notranslate\">$ aws configure\r\n<\/code><\/pre>\n<\/div>\n<ul>\n<li>This will ask for your AWS access key and AWS Secret as below\n<ul>\n<li>AWS Access Key ID [None] : ******<\/li>\n<li>AWS Secret Access Key [None] : ******<\/li>\n<li>Default region name : [leave it none, press enter]<\/li>\n<li>Default output format : [leave it none, press enter]<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<h3><\/h3>\n<h3><span id=\"Creating_a_workspace_and_Initializing_Pulumi\" class=\"ez-toc-section\">Creating a workspace and Initialising Pulumi<\/span><\/h3>\n<p>Create an empty directory and then run the <strong>\u2018pulumi new\u2019<\/strong>\u00a0command as this command generates a set of pre-defined files (requirements.txt, Pulumi.yaml,__<strong>main__<\/strong>.py)<\/p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\">\n<pre class=\"notranslate\"><code class=\"notranslate\">$ pulumi new\r\n<\/code><\/pre>\n<\/div>\n<p dir=\"auto\">The pulumi new command creates a new Pulumi project with some basic set of files based on the cloud and language specified.<\/p>\n<p dir=\"auto\">If you are running\u00a0<code>pulumi new<\/code>\u00a0or most other\u00a0<code>pulumi<\/code>\u00a0commands for the first time, you will be prompted to log in to the\u00a0<a href=\"https:\/\/app.pulumi.com\/\" target=\"_blank\" rel=\"noopener noreferrer\">Pulumi service<\/a>. The\u00a0<a href=\"https:\/\/www.pulumi.com\/docs\/reference\/cli\/\">Pulumi CLI<\/a>\u00a0works in the background with the Pulumi service in order to deliver a reliable experience. It is free for individual use.<\/p>\n<p>Create a directory with some valid name<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">mkdir pulumi-devops-junction<\/pre>\n<p>Get into that directory<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">cd pulumi-devops-junction<\/pre>\n<p>Inside that directory execute the\u00a0<code>pulumi new<\/code> command<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">pulumi new<\/pre>\n<p>Once you execute the \u2018Pulumi new\u2019 command, you should see an output similar to below<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new.png\"><img class=\"post-img wp-image-8341 size-large lazyautosizes lazyloaded alignnone\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-1024x508.png\" alt=\"\" width=\"840\" height=\"417\" data-src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-1024x508.png\" data-srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-1024x508.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-300x149.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-768x381.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new.png 1446w\" data-sizes=\"auto\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-1024x508.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-300x149.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new-768x381.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-new.png 1446w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>Using the up-down arrow key, select the\u00a0<code>aws-python<\/code>\u00a0option. Press Enter<\/p>\n<p>Specify the following information<\/p>\n<ul>\n<li>Project Name<\/li>\n<li>Project Description<\/li>\n<li>Stack Name<\/li>\n<li>Aws Region<\/li>\n<\/ul>\n<p>If you hit enter without giving any values pulumi will consider default values.\u00a0 Once you specify all details, pulumi will run and try to install all necessary libs. You should see output similar to below<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values.png\"><img class=\"post-img wp-image-8346 size-large lazyautosizes lazyloaded alignnone\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1024x384.png\" alt=\"\" width=\"840\" height=\"315\" data-src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1024x384.png\" data-srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1024x384.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-300x113.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-768x288.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1536x576.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-2048x768.png 2048w\" data-sizes=\"auto\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1024x384.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-300x113.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-768x288.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-1536x576.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/p-values-2048x768.png 2048w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><br \/>\nNow our pulumi project is set up and ready!! and we are ready to go and make changes in the placeholder code.<\/p>\n<p>&nbsp;<\/p>\n<h3><span id=\"Pulumi_Python_script_to_Clone_EBS_Volumes_and_attach_to_other_EC2\" class=\"ez-toc-section\">Pulumi Python script to set up infrastructure in AWS &#8211; Pulumi AWS Example\u00a0<\/span><\/h3>\n<p>Now we have the default files created, It&#8217;s time to update the placeholder file with our sourcecode.<\/p>\n<p>copy the below content into\u00a0<code>__main.py__<\/code>and replace the existing content.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"python\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">\"\"\"An AWS Python Pulumi program\"\"\"\r\n\r\n\r\nimport pulumi\r\nimport pulumi_aws as aws\r\nfrom pulumi import export\r\n\r\nconfig = pulumi.Config()\r\ndata = config.require_object(\"data\")\r\n\r\nvirtualprivatecloud = aws.ec2.Vpc(data.get(\"vpc_name\"), cidr_block=data.get(\"vpc_cidr\"))\r\n\r\nigw = aws.ec2.InternetGateway(data.get(\"igw_name\"),\r\n    vpc_id=virtualprivatecloud.id,\r\n    tags={\r\n        \"Name\": data.get(\"igw_name\"),\r\n    })\r\n\r\nprivatesubnet = aws.ec2.Subnet(data.get(\"prv_subnet_name\"),\r\n    vpc_id=virtualprivatecloud.id,\r\n    cidr_block=data.get(\"prv_cidr\"),\r\n    map_public_ip_on_launch=False,\r\n    tags={\r\n        \"Name\": data.get(\"prv_subnet_name\"),\r\n    })\r\n\r\npublicsubnet = aws.ec2.Subnet(data.get(\"pub_subnet_name\"),\r\n    vpc_id=virtualprivatecloud.id,\r\n    cidr_block=data.get(\"pub_cidr\"),\r\n    map_public_ip_on_launch=True,\r\n    tags={\r\n        \"Name\": data.get(\"pub_subnet_name\"),\r\n    })\r\n\r\neip = aws.ec2.Eip(data.get(\"eip_name\"),\r\n    vpc=True)\r\n\r\nnatgateway = aws.ec2.NatGateway(data.get(\"natgw_name\"),\r\n    allocation_id=eip.allocation_id,\r\n    subnet_id=publicsubnet.id,\r\n    tags={\r\n        \"Name\": data.get(\"natgw_name\"),\r\n    },\r\n    opts=pulumi.ResourceOptions(depends_on=[igw]))\r\n\r\npubroutetable = aws.ec2.RouteTable(data.get(\"pubrttable_name\"),\r\n    vpc_id=virtualprivatecloud.id,\r\n    routes=[\r\n        aws.ec2.RouteTableRouteArgs(\r\n            cidr_block=\"0.0.0.0\/0\",\r\n            gateway_id=igw.id,\r\n        )\r\n    ],\r\n    tags={\r\n        \"Name\": data.get(\"pubrttable_name\"),\r\n    })\r\n\r\nprvroutetable = aws.ec2.RouteTable(data.get(\"prvrttable_name\"),\r\n    vpc_id=virtualprivatecloud.id,\r\n    routes=[\r\n        aws.ec2.RouteTableRouteArgs(\r\n            cidr_block=\"0.0.0.0\/0\",\r\n            gateway_id=natgateway.id,\r\n        )\r\n    ],\r\n    tags={\r\n        \"Name\": data.get(\"prvrttable_name\"),\r\n    })\r\n\r\npub_route_association = aws.ec2.RouteTableAssociation(\r\n        data.get(\"pubrtasst_name\"),\r\n        route_table_id=pubroutetable.id,\r\n        subnet_id=publicsubnet.id\r\n)\r\n\r\nprv_route_association = aws.ec2.RouteTableAssociation(\r\n        data.get(\"prvrtasst_name\"),\r\n        route_table_id=prvroutetable.id,\r\n        subnet_id=privatesubnet.id\r\n)\r\n\r\nsg = aws.ec2.SecurityGroup(\r\n        data.get(\"sec_grp_name\"),\r\n        description=\"Allow HTTP traffic to EC2 instance\",\r\n        ingress=[{\r\n                \"protocol\": \"tcp\",\r\n                \"from_port\": 80,\r\n                \"to_port\": 80,\r\n                \"cidr_blocks\": [\"0.0.0.0\/0\"],\r\n            },\r\n        {\r\n            \"protocol\": \"tcp\",\r\n            \"from_port\": 443,\r\n            \"to_port\": 443,\r\n            \"cidr_blocks\": [\"0.0.0.0\/0\"],\r\n        },\r\n        {\r\n            \"protocol\": \"tcp\",\r\n            \"from_port\": 22,\r\n            \"to_port\": 22,\r\n            \"cidr_blocks\": [\"0.0.0.0\/0\"],\r\n        }\r\n        ],\r\n    egress=[\r\n        {\r\n            \"protocol\": \"-1\",\r\n            \"from_port\": 0,\r\n            \"to_port\": 0,\r\n            \"cidr_blocks\": [\"0.0.0.0\/0\"],\r\n\r\n        }\r\n    ],\r\n    vpc_id=virtualprivatecloud.id\r\n)\r\n\r\nkeypair = aws.ec2.KeyPair(\"keypair\", public_key=data.get(\"public_key\"))\r\n\r\nami = aws.ec2.get_ami(\r\n        most_recent=\"true\",\r\n        owners=[\"099720109477\"],\r\n)\r\n\r\n\r\nuser_data = \"\"\"\r\n#!\/bin\/bash\r\necho \"Hello, world!\" &gt; index.html\r\nnohup python -m SimpleHTTPServer 80 &amp;\r\n\"\"\"\r\n\r\nbastion_ec2_instance = aws.ec2.Instance(\r\n        data.get(\"ec2_bastion_name\"),\r\n        instance_type=data.get(\"ec2_bastion_type\"),\r\n        vpc_security_group_ids=[sg.id],\r\n        ami=ami.id,\r\n        key_name=keypair.key_name,\r\n        user_data=user_data,\r\n        subnet_id=publicsubnet.id,\r\n        associate_public_ip_address=True,\r\n)\r\n\r\n\r\nprivate_ec2_instance = aws.ec2.Instance(\r\n        data.get(\"ec2_private_name\"),\r\n        instance_type=data.get(\"ec2_private_type\"),\r\n        vpc_security_group_ids=[sg.id],\r\n        ami=ami.id,\r\n        key_name=keypair.key_name,\r\n        subnet_id=privatesubnet.id,\r\n)\r\n<\/pre>\n<p>&nbsp;<\/p>\n<h3><span id=\"Update_the_Values_and_Pulumi_up_Run_the_script\" class=\"ez-toc-section\">Update the Values in the Variables file<\/span><\/h3>\n<p>All the input parameters for this project is maintained in <strong>pulumi.dev.yaml<\/strong> file. Change values in this file as per your requirement<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"yaml\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">config:\r\n  aws:region: us-east-1\r\n  pulumi-ec2:data:\r\n    active: true\r\n    vpc_name: devopsjunc-vpc\r\n    vpc_cidr: 10.0.0.0\/16\r\n    igw_name: devopsjunc-igw\r\n    prv_subnet_name: devopsjunc-private-subnet\r\n    pub_subnet_name: devopsjunc-public-subnet\r\n    prv_cidr: 10.0.1.0\/24\r\n    pub_cidr: 10.0.0.0\/24\r\n    eip_name: devopsjunc-eip\r\n    natgw_name: devopsjunc_ngw\r\n    pubrttable_name: devopsjunc_pubrttable\r\n    prvrttable_name: devopsjunc_prvrttable\r\n    pubrtasst_name: devopsjunc_pub_rt_asst\r\n    prvrtasst_name: devopsjunc_prv_rt_asst\r\n    sec_grp_name: devopsjunc_sec_grp\r\n    public_key: &lt;paste your public key content here&gt;\r\n    ec2_bastion_name: devopsjunc_ec2_bastion\r\n    ec2_bastion_type: t2.micro\r\n    ec2_private_name: devopsjunc_ec2_private\r\n    ec2_private_type: t2.micro<\/pre>\n<p><code>Pulumi.*.yaml<\/code>\u00a0is a configuration file where we can maintain our input parameters and the same can be used in our code. more like a variables file. in terraform it is\u00a0<code>*.tfvars<\/code>\u00a0file<\/p>\n<p>In addition to this, you need to generate ssh keys which are used to get into the private instance<\/p>\n<p>&nbsp;<\/p>\n<h3><span id=\"Update_the_Values_and_Pulumi_up_Run_the_script\" class=\"ez-toc-section\">Creating SSH Keys\u00a0<\/span><\/h3>\n<p>Create a directory called .ssh in your home directory. ( if not already exists)<\/p>\n<p>Execute the below-mentioned commands to generate SSH keys ( or you can choose to use your existing key)<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">mkdir .ssh\r\ncd .ssh\r\nssh-keygen -f devopsjunckeypair\r\n<\/pre>\n<p>Next, you need to add the newly created ssh keys to a key chain. If you have chosen your existing key add that to <code>ssh-add<\/code><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">ssh-add -K devopsjunckeypair<\/pre>\n<p>&nbsp;<\/p>\n<h3><span id=\"Update_the_Values_and_Pulumi_up_Run_the_script\" class=\"ez-toc-section\">Creating the AWS Infrastructure with Pulumi up<\/span><\/h3>\n<p>As we have done all the planning tasks, Now run the <strong>Pulumi up<\/strong>\u00a0command.<\/p>\n<p>Like\u00a0<code>Terraform plan<\/code>\u00a0 or\u00a0<code>Terraform apply<\/code>\u00a0command Pulumi will try to get your confirmation before moving on.<\/p>\n<p>You can simply choose\u00a0<code>no<\/code>\u00a0if you just want to plan or dry run and choose\u00a0<code>yes<\/code>\u00a0to apply the changes.<\/p>\n<p>You should see output similar to below<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM.png\"><img class=\"post-img aligncenter wp-image-8395 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-1024x394.png\" alt=\"\" width=\"840\" height=\"323\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-1024x394.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-300x116.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-768x296.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-1536x592.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.38.05-PM-2048x789.png 2048w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>Select\u00a0<strong>Yes <\/strong>for the question\u00a0<strong>Do you want to perform this update\u00a0<\/strong>question and pulumi will create your desired infrastructure for you.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM.png\"><img class=\"post-img aligncenter wp-image-8396 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM-1024x616.png\" alt=\"\" width=\"840\" height=\"505\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM-1024x616.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM-300x180.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM-768x462.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-12.51.13-PM.png 1430w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>Configuraing SSH to connect through Bastion<\/h3>\n<p>Now, Create an ssh config file inside the <strong>.ssh<\/strong> directory (This directory you would have created in earlier steps)<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">cd ~\/.ssh\r\ntouch config\r\n<\/pre>\n<p>Add the below contents to your ssh config file , this is to tell your ssh to pass through bastion while reaching your private instance<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"raw\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">Host bastion-instance\r\n   HostName &lt;Bastion Public IP&gt;\r\n   User ubuntu\r\n\r\nHost private-instance\r\n   HostName &lt;Private IP&gt;\r\n   User ubuntu\r\n   ProxyCommand ssh -q -W %h:%p bastion-instance<\/pre>\n<p>Short note on ssh config file:-<\/p>\n<p>The\u00a0<a class=\"components__RichTextLink-sc-1uxoc71-0 kjgQLy\" href=\"https:\/\/www.ssh.com\/ssh\/\">ssh<\/a>\u00a0program on a host receives its configuration from either the command line or from configuration files\u00a0<code>~\/.ssh\/config<\/code>\u00a0and\u00a0<code>\/etc\/ssh\/ssh_config<\/code>.<\/p>\n<p><a class=\"components__RichTextLink-sc-1uxoc71-0 kjgQLy\" href=\"https:\/\/www.ssh.com\/ssh\/command\">Command-line<\/a>\u00a0options take precedence over configuration files. The user-specific configuration file\u00a0<code>~\/.ssh\/config<\/code>\u00a0is used next. Finally, the global\u00a0<code>\/etc\/ssh\/ssh_config<\/code> file is used. The first obtained value for each configuration parameter will be used.<\/p>\n<p>You can get Bastion public IP and Private IP from AWS console<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM.png\"><img class=\"post-img aligncenter wp-image-8398 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-1024x566.png\" alt=\"\" width=\"840\" height=\"464\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-1024x566.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-300x166.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-768x424.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-1536x849.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.04.04-PM-2048x1132.png 2048w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM.png\"><img class=\"post-img aligncenter wp-image-8397 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-1024x556.png\" alt=\"\" width=\"840\" height=\"456\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-1024x556.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-300x163.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-768x417.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-1536x834.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.07.31-PM-2048x1112.png 2048w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>SSH to Private EC2 instance using Bastion &#8211; Validation<\/h3>\n<p>Now let&#8217;s try to connect to these instances using ssh<\/p>\n<p>You should update your ssh config file with bastion host IP address and username (Ubuntu &#8211; in this case) and private instance IP address and username.<\/p>\n<p>Next, try to do ssh using the &#8216;<strong>bastion-instance<\/strong>&#8216; variable name<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\"># Connect to the bastion host:\r\nssh -A bastion-instance<\/pre>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM.png\"><img class=\"post-img aligncenter wp-image-8399 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM-1024x699.png\" alt=\"\" width=\"840\" height=\"573\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM-1024x699.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM-300x205.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM-768x525.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.18.20-PM.png 1180w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>Perfect!!, We are able to connect to bastion host without any hustle.<\/p>\n<p>Next, we shall connect to a private instance. Since the private instance is not exposed to the outer internet, we cannot access it as it is using private IP.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.22.51-PM.png\"><img class=\"post-img aligncenter wp-image-8400 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.22.51-PM.png\" alt=\"\" width=\"946\" height=\"160\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.22.51-PM.png 946w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.22.51-PM-300x51.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.22.51-PM-768x130.png 768w\" sizes=\"(max-width: 946px) 100vw, 946px\" \/><\/a><\/p>\n<p>As expected, it failed. Hence we use a proxy command which uses bastion-host in turn gets connected to the private instance.<\/p>\n<p>Look for this below entry in your ssh config file<\/p>\n<pre><code class=\"notranslate\">ProxyCommand ssh -q -W %h:%p bastion-instance<\/code><\/pre>\n<p>Now, let&#8217;s try to connect to the private instance using the &#8216;<strong>private-instance<\/strong>&#8216; variable name (As mentioned in the ssh config file)<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM.png\"><img class=\"post-img aligncenter wp-image-8401 size-large\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM-1024x762.png\" alt=\"\" width=\"840\" height=\"625\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM-1024x762.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM-300x223.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM-768x572.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/Screen-Shot-2022-04-30-at-1.27.39-PM.png 1478w\" sizes=\"(max-width: 840px) 100vw, 840px\" \/><\/a><\/p>\n<p>Voila!!, you got logged into your private instance using the ssh client. Now, you can play around and execute all commands as per your need.<\/p>\n<p>There we go, We have successfully created a fully functioning AWS infrastructure with VPC, Private and Public Subnets, Ec2 instances and Bastion with Pulumi.<\/p>\n<p>&nbsp;<\/p>\n<h3><span id=\"GitHub_Link_for_the_Sourcecode\" class=\"ez-toc-section\">GitHub Link for the Sourcecode<\/span><\/h3>\n<p>You can download the source code from\u00a0<a href=\"https:\/\/github.com\/Gritfy\/pulumi-aws-infra-bastion-host\">this GitHub link\u00a0<\/a><\/p>\n<h3><\/h3>\n<h3><span id=\"Conclusion\" class=\"ez-toc-section\">Conclusion<\/span><\/h3>\n<p>We have learnt how to set up fully pledged to compute infra in AWS using pulumi<\/p>\n<p>During the implementation, we learned some details about bastion-hosts and their uses, and some information on the ssh config file.<\/p>\n<p>Hope you enjoyed this article and would give it a try on your own. Until then, Happy learning \ud83d\ude42<\/p>\n<p>For any help, please reach out to us in the Comments<\/p>\n<p>For Professional help on DevOps, reach out to us at <a href=\"mailto:rumenlishkoff@gmail.com\">rumenlishkoff@gmail.com<\/a><\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>&nbsp;<\/p>\n<p>Thanks and Regards,<br \/>\nTapan Hegde<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFind me on Linkedin <a href=\"https:\/\/www.linkedin.com\/in\/tapanhegde\/\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577322\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"8394\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577322\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577322\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this article, we are going to see how to set up compute infrastructure consisting of virtual private cloud, subnets, internet gateway,\u00a0 NAT gateway, route tables and EC2 instances in Amazon web services using one of the most competent IaC tool &#8216;Pulumi&#8217; In addition to this, we shall see how[&#8230;]<\/p>\n","protected":false},"author":271,"featured_media":8435,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[234,454],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Pulumi AWS Example - Creating VPC, Subnets, EC2, Bastion host<\/title>\n<meta name=\"description\" content=\"Pulumi AWS Example. How to create AWS VPC, Private Public Subnets, EC2 instances, and Bastion hosts using Pulumi. Creating AWS EC2 instance with Pulumi.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Pulumi AWS Example - Creating VPC, Subnets, EC2, Bastion host\" \/>\n<meta property=\"og:description\" content=\"Pulumi AWS Example. How to create AWS VPC, Private Public Subnets, EC2 instances, and Bastion hosts using Pulumi. Creating AWS EC2 instance with Pulumi.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-05-03T19:09:42+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-11-10T19:18:12+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/05\/mwi-2.jpg\",\"width\":1748,\"height\":1240,\"caption\":\"pulumi aws\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/\",\"name\":\"Pulumi AWS Example - Creating VPC, Subnets, EC2, Bastion host\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#primaryimage\"},\"datePublished\":\"2022-05-03T19:09:42+00:00\",\"dateModified\":\"2022-11-10T19:18:12+00:00\",\"description\":\"Pulumi AWS Example. How to create AWS VPC, Private Public Subnets, EC2 instances, and Bastion hosts using Pulumi. Creating AWS EC2 instance with Pulumi.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/a3628fb28665348f6aab4f472ebf7837\"},\"headline\":\"Pulumi AWS Example &#8211; Creating VPC, Subnets, EC2, Bastion host\",\"datePublished\":\"2022-05-03T19:09:42+00:00\",\"dateModified\":\"2022-11-10T19:18:12+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#primaryimage\"},\"articleSection\":\"AWS,DevOps_Beginner\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/pulumi-aws-example\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/a3628fb28665348f6aab4f472ebf7837\",\"name\":\"Tapan Hegde\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/cc6f526212cdbf66b6a32db548fa54b8?s=96&d=mm&r=g\",\"caption\":\"Tapan Hegde\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8394"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/271"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=8394"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8394\/revisions"}],"predecessor-version":[{"id":8442,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8394\/revisions\/8442"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8435"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=8394"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=8394"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=8394"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
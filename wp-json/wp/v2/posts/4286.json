{"id":4286,"date":"2019-12-13T17:19:41","date_gmt":"2019-12-13T11:49:41","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=4286"},"modified":"2022-02-16T23:59:27","modified_gmt":"2022-02-16T18:29:27","slug":"ansible_json_query","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/","title":{"rendered":"Ansible JSON &#8211; Parse JSON using Ansible json_query"},"content":{"rendered":"<p>Ansible <code>json_query<\/code> is an on-demand feature that every ansible user wants to explore. In this post we are going to how Ansible JSON processing works.<\/p>\n<p>During the infrastructure automation, we might end up in a situation where we need to process Huge datasets, especially in JSON format.\u00a0 \u00a0 We might also want to extract Single data or property from the huge dataset.<\/p>\n<p>Typically, we would be looking for JSON parsers to do the job for us or we would create some in-house ones.<\/p>\n<p>But here comes ansible&#8217;s\u00a0<code>json_query<\/code>\u00a0filter to save the day<\/p>\n<p>&nbsp;<\/p>\n<h3>What is\u00a0 <span style=\"color: #e30b50;\">json_query<\/span> and how does it work?<\/h3>\n<p>As the name suggests, the Ansible <code>json_query<\/code> filter is helping you to query the JSON document and get the elements in the JSON tree structure.<\/p>\n<p>json_query is using the <code>jmespath<\/code>\u00a0 Query language. It is a powerful query language to parse JSON content. It helps you to parse JSON content and filter the elements you want. You can pretty much do everything with JSON<\/p>\n<p>Look at the following screenshot, A Home Page of <a href=\"http:\/\/jmespath.org\/\">JMESPATH<\/a><\/p>\n<p>It has a nice toolset as well, where you could write and test your queries before you try it in realtime.<\/p>\n<p>It is more like regex101 we use for Regular expression testing.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-1.12.44-AM.png\"><img class=\"alignnone size-full wp-image-4618\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-1.12.44-AM.png\" alt=\"\" width=\"785\" height=\"629\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-1.12.44-AM.png 785w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-1.12.44-AM-300x240.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-1.12.44-AM-768x615.png 768w\" sizes=\"(max-width: 785px) 100vw, 785px\" \/><\/a><\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3>Some Sample JSON for testing &#8211; Ansible JSON<\/h3>\n<p>This is the sample data we are going to take for our testing. This is taken from the <a href=\"https:\/\/jsonplaceholder.typicode.com\/users\">JSON Placeholder<\/a> users endpoint URL.<\/p>\n<p>JSON Placeholder has a set of JSON endpoints\/URLs you can use for testing. It is more like a <code>lorem ipsum<\/code> for JSON. You can visit the site and explore.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\">[\r\n  {\r\n    <span class=\"hljs-attr\">\"id\"<\/span>: <span class=\"hljs-number\" style=\"color: #880000;\">1<\/span>,\r\n    <span class=\"hljs-attr\">\"name\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Leanne Graham\"<\/span>,\r\n    <span class=\"hljs-attr\">\"username\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Bret\"<\/span>,\r\n    <span class=\"hljs-attr\">\"email\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Sincere@april.biz\"<\/span>,\r\n    <span class=\"hljs-attr\">\"address\"<\/span>: {\r\n      <span class=\"hljs-attr\">\"street\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Kulas Light\"<\/span>,\r\n      <span class=\"hljs-attr\">\"suite\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Apt. 556\"<\/span>,\r\n      <span class=\"hljs-attr\">\"city\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Gwenborough\"<\/span>,\r\n      <span class=\"hljs-attr\">\"zipcode\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"92998-3874\"<\/span>,\r\n      <span class=\"hljs-attr\">\"geo\"<\/span>: {\r\n        <span class=\"hljs-attr\">\"lat\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"-37.3159\"<\/span>,\r\n        <span class=\"hljs-attr\">\"lng\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"81.1496\"<\/span>\r\n      }\r\n    },\r\n    <span class=\"hljs-attr\">\"phone\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"1-770-736-8031 x56442\"<\/span>,\r\n    <span class=\"hljs-attr\">\"website\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"hildegard.org\"<\/span>,\r\n    <span class=\"hljs-attr\">\"company\"<\/span>: {\r\n      <span class=\"hljs-attr\">\"name\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Romaguera-Crona\"<\/span>,\r\n      <span class=\"hljs-attr\">\"catchPhrase\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Multi-layered client-server neural-net\"<\/span>,\r\n      <span class=\"hljs-attr\">\"bs\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"harness real-time e-markets\"<\/span>\r\n    }\r\n  },\r\n  {\r\n    <span class=\"hljs-attr\">\"id\"<\/span>: <span class=\"hljs-number\" style=\"color: #880000;\">2<\/span>,\r\n    <span class=\"hljs-attr\">\"name\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Ervin Howell\"<\/span>,\r\n    <span class=\"hljs-attr\">\"username\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Antonette\"<\/span>,\r\n    <span class=\"hljs-attr\">\"email\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Shanna@melissa.tv\"<\/span>,\r\n    <span class=\"hljs-attr\">\"address\"<\/span>: {\r\n      <span class=\"hljs-attr\">\"street\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Victor Plains\"<\/span>,\r\n      <span class=\"hljs-attr\">\"suite\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Suite 879\"<\/span>,\r\n      <span class=\"hljs-attr\">\"city\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Wisokyburgh\"<\/span>,\r\n      <span class=\"hljs-attr\">\"zipcode\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"90566-7771\"<\/span>,\r\n      <span class=\"hljs-attr\">\"geo\"<\/span>: {\r\n        <span class=\"hljs-attr\">\"lat\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"-43.9509\"<\/span>,\r\n        <span class=\"hljs-attr\">\"lng\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"-34.4618\"<\/span>\r\n      }\r\n    },\r\n    <span class=\"hljs-attr\">\"phone\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"010-692-6593 x09125\"<\/span>,\r\n    <span class=\"hljs-attr\">\"website\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"anastasia.net\"<\/span>,\r\n    <span class=\"hljs-attr\">\"company\"<\/span>: {\r\n      <span class=\"hljs-attr\">\"name\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Deckow-Crist\"<\/span>,\r\n      <span class=\"hljs-attr\">\"catchPhrase\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"Proactive didactic contingency\"<\/span>,\r\n      <span class=\"hljs-attr\">\"bs\"<\/span>: <span class=\"hljs-string\" style=\"color: #880000;\">\"synergize scalable supply-chains\"<\/span>\r\n    }\r\n  }]<\/pre>\n<p>&nbsp;<\/p>\n<blockquote><p>In this article, we are going to parse JSON response given by the URL directly in case if you would like to read JSON file and parse them with ansible. It is possible too.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-read-json-file\/\">I covered how to Parse JSON file using ansible here<\/a><\/p><\/blockquote>\n<h3>Parse <span style=\"color: #f01863;\">JSON data from URL<\/span> response &#8211; using Ansible json_query<\/h3>\n<p>Let us consider the JSON content given above and try to filter only the following fields for each user using ansible json_query and create a <strong>Business card<\/strong> type of data for each user.<\/p>\n<p>So now we are going to create a playbook, which is going to do the following operation<\/p>\n<ol>\n<li>Download the preceding JSON users data from the JSON placeholder URL<\/li>\n<li>Using the ansible json_query filter. Print the following fields for each user ( with custom key names)\n<ol>\n<li>Name<\/li>\n<li>Email<\/li>\n<li>Phone<\/li>\n<li>CompanyName<\/li>\n<li>WebSite<\/li>\n<li>City<\/li>\n<\/ol>\n<\/li>\n<\/ol>\n<p>Now we need to come up with the <code>JMESpath<\/code>\u00a0 query that we are going to use in ansible <code>json_query<\/code> filter to get only these elements from on otherwise huge dataset.<\/p>\n<p>I have used the JMESPath examples and tester to come up with the query and this is what the query I came up with<\/p>\n<p>We are using the MultiSelect syntax of jmespath for this.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\"><span class=\"hljs-selector-attr\" style=\"color: #bc6060;\">[*]<\/span>.{<span class=\"hljs-attribute\" style=\"font-weight: bold;\">Name<\/span>: name, <span class=\"hljs-attribute\" style=\"font-weight: bold;\">Email<\/span>: email, <span class=\"hljs-attribute\" style=\"font-weight: bold;\">Phone<\/span>: phone, <span class=\"hljs-attribute\" style=\"font-weight: bold;\">CompanyName<\/span>: company.name, <span class=\"hljs-attribute\" style=\"font-weight: bold;\">WebSite<\/span>: website, <span class=\"hljs-attribute\" style=\"font-weight: bold;\">City<\/span>: address.city}<\/pre>\n<p>Here is the playbook.<\/p>\n<pre class=\"hljs\" style=\"display: block; background: #ffffff none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-meta\" style=\"color: #969896;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\"> - name:<\/span> JsonQuery Playbook\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   hosts:<\/span> localhost\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Download JSON content play\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       uri:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         url:<\/span> https:\/\/jsonplaceholder.typicode.com\/users\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         return_content:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       register:<\/span> jsoncontent\r\n\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Business Card\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       debug:<\/span> msg=<span class=\"hljs-string\" style=\"color: #df5000;\">\"<span class=\"hljs-template-variable\" style=\"color: #df5000;\">{{ jsoncontent.json | json_query(jmesquery) }}<\/span>\"<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       vars:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         jmesquery:<\/span> <span class=\"hljs-string\" style=\"color: #df5000;\">\"[*].{Name: name, Email: email, Phone: phone, CompanyName: company.name, WebSite: website, City: address.city}\"<\/span><\/pre>\n<p>If you go through the preceding playbook you would understand that there is two tasks or Plays. the former one is to download the JSON content from the remote JSON PlaceHolder URL and the latter one is to parse the JSON content we got in the previous task and prepare a Business Card by choosing a set of selective fields.<\/p>\n<p>I am assigning our query to the variable named <code>jmesquery<\/code> and using the variable as a parameter inside the ansible json_query.<\/p>\n<p>When I run the playbook, My output looked something like this ( I have truncated some of the users to keep it simple) Ideally it would give me 10 business cards as the endpoint has 10 set of users.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\">\u279c  AnsibleWorkSpace git:(master) \u2717 ansible-playbook ansible_json.yml\r\n\r\nPLAY [JsonQuery Playbook] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\n\r\nTASK [Gathering Facts] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>\r\nok: [localhost]\r\n\r\nTASK [Download JSON content play] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-emphasis\" style=\"font-style: italic;\">***<\/span>*\r\nok: [localhost]\r\n\r\nTASK [Business Card] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nok: [localhost] =&gt; {\r\n<span class=\"hljs-code\" style=\"color: #397300;\">    \"msg\": [<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        {<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"City\": \"Gwenborough\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"CompanyName\": \"Romaguera-Crona\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Email\": \"Sincere@april.biz\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Name\": \"Leanne Graham\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Phone\": \"1-770-736-8031 x56442\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"WebSite\": \"hildegard.org\"<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        },<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        {<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"City\": \"Wisokyburgh\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"CompanyName\": \"Deckow-Crist\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Email\": \"Shanna@melissa.tv\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Name\": \"Ervin Howell\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Phone\": \"010-692-6593 x09125\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"WebSite\": \"anastasia.net\"<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        },<\/span>\r\n............\r\n............\r\nPLAY RECAP <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0<\/pre>\n<p>From the result shown. You could understand that the result has been Sorted by Ansible, despite our query is designed to give the City as the last value.<\/p>\n<p>&nbsp;<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>&nbsp;<\/p>\n<h3><span style=\"color: #e01287;\">Example2<\/span>: List only the Names<\/h3>\n<p>Here is one more example to list only the names from the JSON Dataset<\/p>\n<pre class=\"hljs\" style=\"display: block; background: #ffffff none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-meta\" style=\"color: #969896;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\"> - name:<\/span> JsonQuery Playbook\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   hosts:<\/span> localhost\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Download JSON content play\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       uri:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         url:<\/span> https:\/\/jsonplaceholder.typicode.com\/users\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         return_content:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       register:<\/span> jsoncontent\r\n\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Just the Names\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       debug:<\/span> msg=<span class=\"hljs-string\" style=\"color: #df5000;\">\"<span class=\"hljs-template-variable\" style=\"color: #df5000;\">{{ jsoncontent.json | json_query(jmesquery)}}<\/span>\"<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       vars:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         jmesquery:<\/span> <span class=\"hljs-string\" style=\"color: #df5000;\">\"[*].name\"<\/span><\/pre>\n<p>here is the result of the playbook<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\">\u279c  AnsibleWorkSpace git:(master) \u2717 ansible-playbook ansible_json.yml\r\n\r\nPLAY [JsonQuery Playbook] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\n\r\nTASK [Gathering Facts] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>\r\nok: [localhost]\r\n\r\nTASK [Download JSON content play] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-emphasis\" style=\"font-style: italic;\">***<\/span>*\r\nok: [localhost]\r\n\r\nTASK [Just the Names] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nok: [localhost] =&gt; {\r\n<span class=\"hljs-code\" style=\"color: #397300;\">    \"msg\": [<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Leanne Graham\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Ervin Howell\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Clementine Bauch\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Patricia Lebsack\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Chelsey Dietrich\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Mrs. Dennis Schulist\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Kurtis Weissnat\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Nicholas Runolfsdottir V\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Glenna Reichert\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        \"Clementina DuBuque\"<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">    ]<\/span>\r\n}\r\n\r\nPLAY RECAP <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0<\/pre>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3><span style=\"color: #e01287;\">Example3<\/span>: Filter only specific user or users<\/h3>\n<p>In the first example, we have seen how to filter out the necessary fields to create business card type data set. But there we got all 10 users data. What if we want to limit it to a specific user<\/p>\n<p>Here is the query we are going to use to limit the user by name<\/p>\n<blockquote><p>\u00a0In the following query the name is surrounded by a backquote\/backtick <code>`<\/code> not a Single quote.<\/p><\/blockquote>\n<pre class=\"hljs\" style=\"display: block; background: #ffffff none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-selector-attr\" style=\"color: #795da3;\">[? name==`Leanne Graham`]<\/span>.{<span class=\"hljs-attribute\" style=\"color: #0086b3;\">Name<\/span>: name, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">Email<\/span>: email, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">Phone<\/span>: phone, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">CompanyName<\/span>: company.name, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">WebSite<\/span>: website, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">City<\/span>: address.city}<\/pre>\n<p>The preceding JMESPath Query finds the user with a name <code>Leanne Graham<\/code> and getting his business card.<\/p>\n<p>to Run this in a playbook, You just have to modify the <code>jmesquery<\/code> variable<\/p>\n<pre class=\"hljs\" style=\"display: block; background: #ffffff none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-meta\" style=\"color: #969896;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\"> - name:<\/span> JsonQuery Playbook\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   hosts:<\/span> localhost\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">   tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Download JSON content play\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       uri:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         url:<\/span> https:\/\/jsonplaceholder.typicode.com\/users\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         return_content:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       register:<\/span> jsoncontent\r\n\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">     - name:<\/span> Business Card\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       debug:<\/span> msg=<span class=\"hljs-string\" style=\"color: #df5000;\">\"<span class=\"hljs-template-variable\" style=\"color: #df5000;\">{{ jsoncontent.json | json_query(jmesquery)}}<\/span>\"<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">       vars:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">         jmesquery:<\/span> <span class=\"hljs-string\" style=\"color: #df5000;\">\"[? name==`Leanne Graham`].{Name: name, Email: email, Phone: phone, CompanyName: company.name, WebSite: website, City: address.city}\"<\/span>\r\n<\/pre>\n<p>&nbsp;<\/p>\n<p>The output of this playbook is given below.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\">\u279c  AnsibleWorkSpace git:(master) \u2717 ansible-playbook ansible_json.yml\r\n\r\nPLAY [JsonQuery Playbook] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\n\r\nTASK [Gathering Facts] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>\r\nok: [localhost]\r\n\r\nTASK [Download JSON content play] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-emphasis\" style=\"font-style: italic;\">***<\/span>*\r\nok: [localhost]\r\n\r\nTASK [Business Card] <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nok: [localhost] =&gt; {\r\n<span class=\"hljs-code\" style=\"color: #397300;\">    \"msg\": [<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        {<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"City\": \"Gwenborough\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"CompanyName\": \"Romaguera-Crona\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Email\": \"Sincere@april.biz\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Name\": \"Leanne Graham\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"Phone\": \"1-770-736-8031 x56442\",<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">            \"WebSite\": \"hildegard.org\"<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">        }<\/span>\r\n<span class=\"hljs-code\" style=\"color: #397300;\">    ]<\/span>\r\n}\r\n\r\nPLAY RECAP <span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span><span class=\"hljs-strong\" style=\"font-weight: bold;\">*****<\/span>**\r\nlocalhost                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0<\/pre>\n<p>&nbsp;<\/p>\n<p>If you want to use multiple users in your search. You can do it just like you would do any other programming language by using or <code>||<\/code><\/p>\n<p>Here is the jmespath query you can use in your ansible json_query<\/p>\n<pre class=\"hljs\" style=\"display: block; background: #ffffff none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-selector-attr\" style=\"color: #795da3;\">[? name==`Leanne Graham` || name==`Ervin Howell`]<\/span>.{<span class=\"hljs-attribute\" style=\"color: #0086b3;\">Name<\/span>: name, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">Email<\/span>: email, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">Phone<\/span>: phone, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">CompayName<\/span>: company.name, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">WebSite<\/span>: website, <span class=\"hljs-attribute\" style=\"color: #0086b3;\">City<\/span>: address.city}<\/pre>\n<p>You can write many jmes queries using the JMESPath testing tool and use it in your playbook.<\/p>\n<p>&nbsp;<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3>Example4: Parse <span style=\"color: #e01287;\">json_query<\/span> result in a <span style=\"color: #e01287;\">loop<\/span> and access it as <span style=\"color: #e01287;\">variable<\/span><\/h3>\n<p>So far we have seen jmespath queries and how to use them in ansible json_query module. Now we are going to see how to parse the json_query result in an ansible loop and create some dynamic variables (or) use them in the task.<\/p>\n<p>Now we are going to create a Phonebook with the dataset we have.<\/p>\n<p>Here we are NOT going to use major jmes query. Rather, we are going to use Ansible&#8217;s inbuilt features like <code>combine<\/code> to create the phonebook.<\/p>\n<p>The Expected result is a set of<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #f0f0f0 none repeat scroll 0% 0%; color: #444444;\"><span class=\"hljs-symbol\" style=\"color: #bc6060;\">PersonName:<\/span> PhoneNumber<\/pre>\n<p>Here is the playbook we use to get this done for us<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #ffffff none repeat scroll 0% 0%; color: #000000;\"><span class=\"hljs-meta\" style=\"color: #1c00cf;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\"> - name:<\/span> JsonQuery Playbook\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">   hosts:<\/span> localhost\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">   tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">     - name:<\/span> Download JSON content play\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       uri:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">         url:<\/span> https:\/\/jsonplaceholder.typicode.com\/users\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">         return_content:<\/span> <span class=\"hljs-literal\" style=\"color: #aa0d91;\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       register:<\/span> jsoncontent\r\n\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">     - name:<\/span> Collecting UserName and Mobile Number info\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       no_log:<\/span> <span class=\"hljs-literal\" style=\"color: #aa0d91;\">True<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       set_fact:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">         phonebook:<\/span> <span class=\"hljs-string\" style=\"color: #c41a16;\">\"<span class=\"hljs-template-variable\" style=\"color: #666600;\">{{phonebook|default({}) | combine ( {item.name : item.phone}) }}<\/span>\"<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       with_items:<\/span> <span class=\"hljs-string\" style=\"color: #c41a16;\">\"<span class=\"hljs-template-variable\" style=\"color: #666600;\">{{ jsoncontent.json | json_query('[*]')}}<\/span>\"<\/span>\r\n\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">     - name:<\/span> The Phonebook\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">       debug:<\/span> var=phonebook<\/pre>\n<p>you can see that the json_query we have used is pretty simple, All the logic part is being done by Ansible.<\/p>\n<p>A quick explanation of the logic<\/p>\n<p>&#8211; <code>phonebook|default({})<\/code>\u00a0 creates a new dictionary named phonebook<\/p>\n<p>&#8211; <code><span class=\"hljs-string\"><span class=\"hljs-template-variable\">combine ({item.name : item.phone})<\/span><\/span><\/code> used to add an element in the dictionary.<\/p>\n<p>There is a new keyword used in this playbook which deserves an explanation<\/p>\n<p>&#8211; <code>no_log<\/code> this prevents the content being displayed as ansible loop iterate the json which is otherwise displayed. You can try to remove this and execute the playbook to see what does it result.<\/p>\n<p>&nbsp;<\/p>\n<p>Here is the execution output of this playbook<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #ffffff none repeat scroll 0% 0%; color: #000000;\">\u279c  AnsibleWorkSpace git:(master) \u2717 ansible-playbook ansible_json.yml\r\n\r\nPLAY [JsonQuery Playbook] **********************************************************************************\r\n\r\nTASK [Gathering Facts] *************************************************************************************\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost]\r\n\r\nTASK [Download JSON content play] **************************************************************************\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost]\r\n\r\nTASK [Collecting UserName and Mobile Number info] **********************************************************\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; (item=None)\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost]\r\n\r\nTASK [The Phonebook] ***************************************************************************************\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">ok:<\/span> [localhost] =&gt; {\r\n<span class=\"hljs-attr\" style=\"color: #5c2699;\">    \"phonebook\":<\/span> {\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Chelsey Dietrich\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"(254)954-1289\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Clementina DuBuque\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"024-648-3804\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Clementine Bauch\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"1-463-123-4447\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Ervin Howell\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"010-692-6593 x09125\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Glenna Reichert\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"(775)976-6794 x41206\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Kurtis Weissnat\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"210.067.6132\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Leanne Graham\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"1-770-736-8031 x56442\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Mrs. Dennis Schulist\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"1-477-935-8478 x6430\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Nicholas Runolfsdottir V\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"586.493.6943 x140\"<\/span>,\r\n        <span class=\"hljs-string\" style=\"color: #c41a16;\">\"Patricia Lebsack\"<\/span>: <span class=\"hljs-string\" style=\"color: #c41a16;\">\"493-170-9623 x156\"<\/span>\r\n    }\r\n}\r\n\r\nPLAY RECAP *************************************************************************************************\r\nlocalhost                  : ok=<span class=\"hljs-number\" style=\"color: #1c00cf;\">4<\/span>    changed=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span>    unreachable=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span>    failed=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span>    skipped=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span>    rescued=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span>    ignored=<span class=\"hljs-number\" style=\"color: #1c00cf;\">0<\/span><\/pre>\n<p>We have seen various examples of ansible json_query and how ansible works with json. Hope this helps.<\/p>\n<p>If you have any questions. Feel free to comment<\/p>\n<p>&nbsp;<\/p>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577818\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"4286\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577818\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577818\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>Ansible json_query is an on-demand feature that every ansible user wants to explore. In this post we are going to how Ansible JSON processing works. During the infrastructure automation, we might end up in a situation where we need to process Huge datasets, especially in JSON format.\u00a0 \u00a0 We might[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":4625,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[98],"tags":[375,377,376],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ansible JSON - Parse JSON using Ansible json_query | Devops<\/title>\n<meta name=\"description\" content=\"ansible json_query example, Ansible JSON Example. How to parse JSON data from variable or URL response using ansible. Ansible JSON playbook example json_query example\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ansible JSON - Parse JSON using Ansible json_query | Devops\" \/>\n<meta property=\"og:description\" content=\"ansible json_query example, Ansible JSON Example. How to parse JSON data from variable or URL response using ansible. Ansible JSON playbook example json_query example\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2019-12-13T11:49:41+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-02-16T18:29:27+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-5.15.00-PM.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1440\" \/>\n\t<meta property=\"og:image:height\" content=\"757\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/12\/Screenshot-2019-12-13-at-5.15.00-PM.png\",\"width\":1440,\"height\":757,\"caption\":\"ansible json_query\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\",\"name\":\"Ansible JSON - Parse JSON using Ansible json_query | Devops\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#primaryimage\"},\"datePublished\":\"2019-12-13T11:49:41+00:00\",\"dateModified\":\"2022-02-16T18:29:27+00:00\",\"description\":\"ansible json_query example, Ansible JSON Example. How to parse JSON data from variable or URL response using ansible. Ansible JSON playbook example json_query example\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Ansible JSON &#8211; Parse JSON using Ansible json_query\",\"datePublished\":\"2019-12-13T11:49:41+00:00\",\"dateModified\":\"2022-02-16T18:29:27+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#primaryimage\"},\"keywords\":\"ansible json example,ansible json_query,ansible json_query example\",\"articleSection\":\"Ansible\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/4286"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=4286"}],"version-history":[{"count":18,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/4286\/revisions"}],"predecessor-version":[{"id":7355,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/4286\/revisions\/7355"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/4625"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=4286"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=4286"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=4286"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
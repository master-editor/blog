{"id":8667,"date":"2022-06-21T16:54:43","date_gmt":"2022-06-21T11:24:43","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=8667"},"modified":"2022-06-21T17:00:32","modified_gmt":"2022-06-21T11:30:32","slug":"aws-s3-sync-example","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/","title":{"rendered":"AWS S3 Sync Examples &#8211; Sync S3 buckets AWS CLI"},"content":{"rendered":"<p>In this article, we are going to see how to use the powerful aws s3 sync CLI command.<\/p>\n<p>In the Linux world, if we want to compare two directories and copy the files on the same machine or between two machines over the remote (ssh) we use <strong>rsync<\/strong><\/p>\n<p>Those who have used it know how powerful it is. similarly, <strong>aws s3 sync\u00a0<\/strong>is for the S3 bucket or S3 file system ( it is technically not a file system, it is an object store)<\/p>\n<p>Now let us see some real-time use cases for the aws s3 sync command.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync.png\"><img class=\"post-img alignnone wp-image-8730 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync.png\" alt=\"aws s3 sync\" width=\"1748\" height=\"1240\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync.png 1748w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync-300x213.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync-1024x726.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync-768x545.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync-1536x1090.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync-90x65.png 90w\" sizes=\"(max-width: 1748px) 100vw, 1748px\" \/><\/a><\/p>\n<h2>Where can aws s3 sync be used?<\/h2>\n<ul>\n<li>To upload a Large directory with files to the remote S3 bucket recursively<\/li>\n<li>download a Large directory with files from S3 to local<\/li>\n<li>To compare two S3 buckets and copy files between them ( only the missing )<\/li>\n<li>compare a local directory with a remote S3 bucket and copy the missing files on the remote or vice versa<\/li>\n<li>Syncing two buckets in two different regions<\/li>\n<li>Including or Excluding files during the copy between source and destination<\/li>\n<li>To update the website content and set cache if your website hosted on S3<\/li>\n<li>Uploading files from local with different file permissions on bulk<\/li>\n<\/ul>\n<p>There are more use cases of aws s3 sync than I have listed here.<\/p>\n<p>While not all of them are mostly used across the industry. we will try to address some of the examples of the aws s3 sync command<\/p>\n<p>Let us start with some basics<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h2>AWS CLI Installation and Configuration<\/h2>\n<p>For us to be able to use aws s3 sync command. we need to have the aws CLI installed and configured.<\/p>\n<p>If you already have the AWS CLI installed and configured in your local. please ignore this section and move on or follow through.<\/p>\n<p>Here we are trying to create a new user with full Admin access privileges for testing purposes.<\/p>\n<p>You can give fewer privileges or just <code>s3<\/code> related permissions are also fine just to try this article.<\/p>\n<p>&nbsp;<\/p>\n<h3><span id=\"Setup_your_Programmatic_Access_Create_Access_Key\" class=\"ez-toc-section\">Setup your\u00a0Programmatic Access\u00a0\u2013 Create Access Key<\/span><\/h3>\n<p>If you would like to create a new user in IAM along with the Access Key follow these steps.<\/p>\n<ol>\n<li>\n<div>Login to AWS Console<\/div>\n<\/li>\n<li>\n<div>In the services go to IAM<\/div>\n<\/li>\n<li>\n<div>Create a User and Click on map existing Policies<\/div>\n<\/li>\n<li>\n<div>Choose UserName and Select the Policy (Administrator Access Policy)<\/div>\n<\/li>\n<li>\n<div>Create user<\/div>\n<\/li>\n<li>\n<div>The final Stage would present the AccessKEY and Secret Access as given below.<\/div>\n<\/li>\n<\/ol>\n<figure id=\"attachment_3140\" class=\"wp-caption alignleft\"><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM.png\"><img class=\"post-img alignleft wp-image-3140 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM.png\" sizes=\"819px\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM.png 996w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM-300x116.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM-768x297.png 768w\" alt=\"\" width=\"996\" height=\"385\" data-src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM.png\" data-srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM.png 996w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM-300x116.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/03\/Screen-Shot-2019-03-31-at-2.20.07-AM-768x297.png 768w\" data-sizes=\"auto\" \/><\/a><figcaption class=\"wp-caption-text\">API key creation Successful Message Banner<\/figcaption><\/figure>\n<p>&nbsp;<\/p>\n<p>If you would like to Choose the existing user and create an Access Key follow this<\/p>\n<ol>\n<li>Sign in to the AWS Management Console and open the IAM console at https:\/\/console.aws.amazon.com\/iam\/.<\/li>\n<li>In the navigation pane, choose Users.<\/li>\n<li>Choose the name of the user whose access keys you want to create, and then choose the Security credentials tab.<\/li>\n<li>In the Access keys section, choose to create an access key.<\/li>\n<li>To view the new access key pair, choose Show. You will not have access to the secret access key again after this dialog box closes. ( Refer to the image given above)<\/li>\n<\/ol>\n<p>&nbsp;<\/p>\n<h3 id=\"install-cli\"><span id=\"Install_AWS_CLI\" class=\"ez-toc-section\">Install\u00a0AWS CLI<\/span><\/h3>\n<p>Based on your base machine the AWS CLI installation and command might vary.<\/p>\n<p>Amazon has given clear instructions on how to install AWS CLI on each platform. Choose any of the following links and get your AWS CLI installed and ready<\/p>\n<ul>\n<li><a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/install-cliv2-linux.html\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI version 2 on Linux or Unix<\/a><\/li>\n<li><a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/install-cliv2-macOS.html\" target=\"_blank\" rel=\"noopener noreferrer\">AWS CLI version 2 on macOS<\/a><\/li>\n<li><a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/userguide\/install-cliv2-windows.html\" target=\"_blank\" rel=\"noopener noreferrer\">Installing AWS CLI version 2 on Windows<\/a><\/li>\n<\/ul>\n<h3><\/h3>\n<h3 id=\"configure-cli\"><span id=\"Configure_AWS_CLI\" class=\"ez-toc-section\">Configure\u00a0AWS CLI<\/span><\/h3>\n<p>I presume that you have installed the AWS CLI package and if everything went well.<\/p>\n<p>You should be able to see the version of the AWS CLI installed when entering the following command in your terminal or command prompt<\/p>\n<pre>aws &#8211; version<\/pre>\n<p>I am using the AWS CLI Version1 as CLI Version 2 is still in Beta.<\/p>\n<p>Now it is time to configure the AWS CLI, Just enter the following command and you would be prompted with a few questions about the Access Key and Passwords.<\/p>\n<pre>aws configure<\/pre>\n<p>it would look like this as you are setting it up.<\/p>\n<p>You enter your own\u00a0<code>AWS Access Key ID<\/code>\u00a0and\u00a0<code>Secret Access Key<\/code> and the one given below is not correct. Just a made-up.<\/p>\n<pre>\u279c ~ aws configure\r\nAWS Access Key ID [None]: AKIAS790KQGK63WUK6T5\r\nAWS Secret Access Key [None]: kkQEiBjJSKrDkWBLO9G\/JJKQWIOKL\/CpHjMGyoiJWW\r\nDefault region name [None]: us-east-1\r\nDefault output format [None]:<\/pre>\n<p>Well done. You are ready with AWS CLI<\/p>\n<p>&nbsp;<\/p>\n<h2>AWS S3 SYNC Examples ( Local and S3 bucket )<\/h2>\n<p>Hope you are ready with all the necessary items to test things in practice.<\/p>\n<p>Here are some examples of aws s3 sync<\/p>\n<p>First, let us see how to use aws s3 sync to upload and download data. In other words, syncing the local to S3 bucket and S3 bucket to local<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM.png\"><img class=\"post-img alignnone wp-image-8703 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM.png\" alt=\"aws s3 sync\" width=\"1812\" height=\"1062\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM.png 1812w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM-300x176.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM-1024x600.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM-768x450.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-19-at-11.54.37-PM-1536x900.png 1536w\" sizes=\"(max-width: 1812px) 100vw, 1812px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>AWS S3 sync Local to S3 bucket &#8211; Copying\/Uploading files<\/h3>\n<p>When you want to copy a large number of files in Linux, we always use RSYNC as it compares the existence of the files in both source and destination and copies only the files which are not present or recently modified.<\/p>\n<p><strong>rsync<\/strong> provides options to delete the files in case you want the sync to be perfect.<\/p>\n<p>AWS S3 Sync also provides similar options too. we will get there.<\/p>\n<p>For now, let us see a simple example of uploading a directory using s3 sync<\/p>\n<p>I have a directory named <code>tobeuploaded<\/code> on my local and I want to sync it to the remote S3 bucket which is empty.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM.png\"><img class=\"post-img alignnone wp-image-8668 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM.png\" alt=\"aws s3 cli\" width=\"1358\" height=\"420\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM.png 1358w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM-300x93.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM-1024x317.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-18-at-12.32.10-AM-768x238.png 768w\" sizes=\"(max-width: 1358px) 100vw, 1358px\" \/><\/a><\/p>\n<p>Let us execute the aws s3 sync command to upload the files\/directories on the <code>tobeuploaded<\/code> directory to the S3 bucket recursively<\/p>\n<pre>\u26a1 aws s3 sync tobeuploaded\/. s3:\/\/gritfy-s3-bucket1<\/pre>\n<p>You can also execute this command in another way.<\/p>\n<pre>\u26a1 cd tobeuploaded\r\n\u26a1 aws s3 sync . s3:\/\/gritfy-s3-bucket1<\/pre>\n<p>In this example, we are <code>cd<\/code> going into that directory and syncing the file both would give the same result.<\/p>\n<p>Here is the execution\/implementation terminal record<\/p>\n<p><script id=\"asciicast-S9bLps6EPuKeYNGKUU4mV05H9\" src=\"https:\/\/asciinema.org\/a\/S9bLps6EPuKeYNGKUU4mV05H9.js\" async><\/script><\/p>\n<p>After the upload, if you execute the <code>aws s3 ls<\/code> command you would see the output as shown below.<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1<\/strong> <\/span>aws s3 ls s3:\/\/gritfy-s3-bucket1\r\n\r\n2022-06-17 21:42:30 0 testfile1\r\n2022-06-17 21:42:30 0 testfile2\r\n2022-06-17 21:42:30 0 testfile3<\/pre>\n<p>If you notice, you can see the subdirectories are not being copied.<\/p>\n<blockquote><p><strong>Note*:<\/strong> s3 sync does not consider the empty directories in both upload\/download. <strong>the empty directories would not be considered at the destination if they are empty on the source.<\/strong><\/p><\/blockquote>\n<p>Now, I hope you know why the subdirectories were not considered by the aws s3 sync command.<\/p>\n<p>Let us create some test files in the subdirectories and re-sync.<\/p>\n<p><script id=\"asciicast-i4yAs4wCA4AC6jeTwIeilyqt2\" src=\"https:\/\/asciinema.org\/a\/i4yAs4wCA4AC6jeTwIeilyqt2.js\" async><\/script><\/p>\n<p>As you can see on the preceding terminal record. the subdirectories are now copied or synced to the S3<\/p>\n<p>the output of aws s3 ls with the recursive flag would yield the following result<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong>aws s3 ls s3:\/\/gritfy-s3-bucket1 &#8211; recursive\r\n2022-06-18 00:47:40 0 testdir1\/testfile1\r\n2022-06-18 00:47:41 0 testdir2\/testfile1\r\n2022-06-17 21:42:30 0 testfile1\r\n2022-06-17 21:42:30 0 testfile2\r\n2022-06-17 21:42:30 0 testfile3<\/span><\/pre>\n<p>&nbsp;<\/p>\n<h3>Sync S3 bucket to Local &#8211; Downloading Files from S3 to local<\/h3>\n<p>In the previous example, we have seen in detail how to sync the local directory and files to the s3 bucket.<\/p>\n<p>Now let us see how can we sync the S3 bucket to the local directory.<\/p>\n<p>In other words, we can say downloading the content from the S3 bucket to local.<\/p>\n<p>To sync the S3 bucket to the local, all we need to change is the order of S3 URI and the local path<\/p>\n<p>Here is the recorded video of me trying to sync the S3 bucket to local<\/p>\n<p><script id=\"asciicast-AfsiZFDRby8UW7TVgsO82feWZ\" src=\"https:\/\/asciinema.org\/a\/AfsiZFDRby8UW7TVgsO82feWZ.js\" async><\/script><\/p>\n<p>As you can see in the preceding video, Existing files would not be copied or overwritten by default<\/p>\n<p>Let&#8217;s suppose our local directory has these files<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>ls -lrt\r\ntotal 0\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile1\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile2\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile3\r\ndrwxr-xr-x 3 sarav staff 96 Jun 18 00:46 testdir1\r\ndrwxr-xr-x 3 sarav staff 96 Jun 18 00:46 testdir2<\/pre>\n<p>Our S3 buckets have these files<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 ls s3:\/\/gritfy-s3-bucket1 &#8211; recursive\r\n2022-06-18 00:47:40 0 testdir1\/testfile1\r\n2022-06-18 00:47:41 0 testdir2\/testfile1\r\n<span style=\"color: #993300;\">2022-06-19 22:29:58 0 testdir3\/testfile1<\/span>\r\n2022-06-17 21:42:30 0 testfile1\r\n2022-06-17 21:42:30 0 testfile2\r\n2022-06-17 21:42:30 0 testfile3<\/pre>\n<p>As you can see, we have an extra directory on the S3 bucket which is not present on the local path<\/p>\n<p>If I sync my local path to the S3.\u00a0 No action would be taken as the source is our local path and the destination is an s3 bucket<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync . s3:\/\/gritfy-s3-bucket1<\/pre>\n<p>If I sync the S3 bucket to my local path, In this context, the source is the S3 bucket and the destination is the local path<\/p>\n<p>The missing file or directory (non-empty) on my local would be copied over from the S3<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync s3:\/\/gritfy-s3-bucket1 .\r\n  download: s3:\/\/gritfy-s3-bucket1\/testdir3\/testfile1 to testdir3\/testfile1<\/pre>\n<p>As you can see the <code>testdir3<\/code> is now being copied from the S3 to local.<\/p>\n<blockquote><p>If you are trying to sync the S3 bucket to an empty local directory, <strong>you could be able to download all the files from the S3 bucket recursively<\/strong><\/p><\/blockquote>\n<p>Hope you have now understood about S3 sync and source and destination.<\/p>\n<p>Here is the pictorial representation of what we did now.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM.jpg\"><img class=\"post-img alignnone wp-image-8711 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM.jpg\" alt=\"aws s3 sync\" width=\"1360\" height=\"1020\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM.jpg 1360w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM-300x225.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM-1024x768.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-4.04.39-PM-768x576.jpg 768w\" sizes=\"(max-width: 1360px) 100vw, 1360px\" \/><\/a><\/p>\n<p>how to upload and download with s3 sync.<\/p>\n<p>&nbsp;<\/p>\n<h3>Sync and delete the extra files on the S3 destination<\/h3>\n<p>&nbsp;<\/p>\n<p>While performing the sync, What if we want to remove some files to maintain the sync state either at the source or destination. local path or S3<\/p>\n<p>Let&#8217;s suppose <strong>we have a file in the <span style=\"color: #149be3;\">S3 bucket<\/span> but not on the <span style=\"color: #800080;\">local path.\u00a0<\/span><\/strong><\/p>\n<p>As we have seen if we use the S3 path as the source and local path as the destination and perform the sync, the missing file would be downloaded<\/p>\n<p>Let&#8217;s suppose <strong>we have a file in the <span style=\"color: #149be3;\">Local path<\/span> but not on the <span style=\"color: #800080;\">S3 bucket<\/span><\/strong><\/p>\n<p>If we do a sync with the local path as a source and the S3 bucket as destination the file would be uploaded to the s3 bucket.<\/p>\n<p><span style=\"color: #003366;\">Now let&#8217;s say we want to delete the file at the destination if the file is not present in the source.<\/span><\/p>\n<p>How to do it?<\/p>\n<p>You need a special option to be passed to the aws s3 sync command<\/p>\n<blockquote><p>&#8211;delete (boolean) Files that exist in the destination but not in the<br \/>\nsource are deleted during sync.<\/p><\/blockquote>\n<p>Let us see it in real time<\/p>\n<p>I have the local directory ( source )\u00a0 with the following files<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>tree .\r\n.\r\n\u251c\u2500\u2500 testdir1\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 testfile1\r\n\u251c\u2500\u2500 testdir2\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 testfile1\r\n\u251c\u2500\u2500 testfile1\r\n\u251c\u2500\u2500 testfile2\r\n\u2514\u2500\u2500 testfile3<\/pre>\n<p>I am trying to sync this local directory with a remote S3 bucket which has the following files<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 ls s3:\/\/gritfy-s3-bucket1 &#8211; recursive\r\n2022-06-18 00:47:40 0 testdir1\/testfile1\r\n2022-06-18 00:47:41 0 testdir2\/testfile1\r\n2022-06-19 22:27:15 0 testdir3\/\r\n<span style=\"color: #800080;\">2022-06-19 22:29:58 0 testdir3\/testfile1<\/span>\r\n2022-06-17 21:42:30 0 testfile1\r\n2022-06-17 21:42:30 0 testfile2\r\n2022-06-17 21:42:30 0 testfile3<\/pre>\n<p>as you can see there is a directory named <code>testdir3<\/code>\u00a0 and file inside, which is not present on the source<\/p>\n<p>Let us see how to delete it on the S3 bucket.<\/p>\n<p>Remember the file would be deleted only on the destination if they are not present on the source.<\/p>\n<p>In our case destination is <code>S3 bucket<\/code><\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM.png\"><img class=\"alignnone wp-image-8715 size-full\" title=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM.png\" alt=\"aws s3 sync\" width=\"1382\" height=\"1308\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM.png 1382w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM-300x284.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM-1024x969.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-6.41.56-PM-768x727.png 768w\" sizes=\"(max-width: 1382px) 100vw, 1382px\" \/><\/a><\/p>\n<p>In the preceding screenshot, you can see we are using the <code>--delete<\/code> flag<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync &#8211; delete . s3:\/\/gritfy-s3-bucket1\r\ndelete: s3:\/\/gritfy-s3-bucket1\/testdir3\/testfile1<\/pre>\n<p>You can see it returns the output that the additional file which is not present on the source but the destination is deleted.<\/p>\n<p>&nbsp;<\/p>\n<h3>Sync and delete the extra files on the Local destination<\/h3>\n<p>we have seen how to delete the extra files which are present on the local but not on the destination s3 bucket<\/p>\n<p>What if the destination is local and it has an extra file.<\/p>\n<p>No difference except the change of destination, the <code>--delete<\/code> a flag would make sure it deletes the file on the destination irrespective of whether it is local or S3<\/p>\n<p>Take a look at the list of files on the S3 bucket<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png\"><img class=\"post-img alignnone wp-image-8718 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png\" alt=\"aws s3 sync\" width=\"3142\" height=\"1146\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png 3142w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-300x109.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-1024x373.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-768x280.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-1536x560.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-2048x747.png 2048w\" sizes=\"(max-width: 3142px) 100vw, 3142px\" \/><\/a><\/p>\n<p>Here is the list of files on my local. let us try to sync keeping the local path as the destination<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>ls -rlt\r\n\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile1\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile2\r\n<span style=\"color: #800080;\">-rw-r--r &#8211; 1 sarav staff 0 Jun 17 21:40 testfile3<\/span>\r\ndrwxr-xr-x 3 sarav staff 96 Jun 18 00:46 testdir1\r\ndrwxr-xr-x 3 sarav staff 96 Jun 18 00:46 testdir2<\/pre>\n<p>as you can see the <code>testfile3<\/code> is not present on the source ( s3 path ) but the destination (local path)<\/p>\n<p>when we execute the following command. the testfile3 should be deleted from the local path<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync s3:\/\/gritfy-s3-bucket1 . &#8211; delete<\/pre>\n<p>and here is the output of this command at my end when tested<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM.png\"><img class=\"post-img alignnone wp-image-8719 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM.png\" alt=\"aws s3 sync\" width=\"1428\" height=\"814\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM.png 1428w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM-300x171.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM-1024x584.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.11.17-PM-768x438.png 768w\" sizes=\"(max-width: 1428px) 100vw, 1428px\" \/><\/a><\/p>\n<p>as you can see the testfile3 is deleted on the local path ( destination)<\/p>\n<p>&nbsp;<\/p>\n<h2>AWS S3 Sync two S3 buckets<\/h2>\n<p>So far we have seen how to sync upload, download and delete between the local path and s3 bucket<\/p>\n<p>Let us see the most important feature of comparing and syncing two S3 buckets<\/p>\n<p>Just know that all the examples we have seen earlier could be replicated to the S3 buckets.<\/p>\n<p>The only difference is that we are going to use two S3 buckets in both source and destination, unlike our previous examples.<\/p>\n<p>Let us see examples of how to sync two s3 buckets<\/p>\n<p>&nbsp;<\/p>\n<h3>AWS S3 sync two s3 buckets<\/h3>\n<p>Always remember the Source and Destination play an important role while performing a Sync.<\/p>\n<p>While syncing two S3 buckets, the bucket which is at the source end would be considered the ideal state and the destination would be brought to the source state<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM.png\"><img class=\"post-img alignnone wp-image-8724 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM.png\" alt=\"s3 sync two buckets\" width=\"1226\" height=\"776\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM.png 1226w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM-300x190.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM-1024x648.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.52.10-PM-768x486.png 768w\" sizes=\"(max-width: 1226px) 100vw, 1226px\" \/><\/a><\/p>\n<p>as we have mentioned the source bucket would be considered as the ideal desired state and the destination would be synced to match the source.<\/p>\n<p>let us validate it once by testing it ourselves<\/p>\n<p>I have two buckets.<\/p>\n<p>here is the state of the first s3 bucket<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png\"><img class=\"post-img alignnone wp-image-8718 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png\" alt=\"aws s3 sync\" width=\"3142\" height=\"1146\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM.png 3142w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-300x109.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-1024x373.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-768x280.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-1536x560.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.03.39-PM-2048x747.png 2048w\" sizes=\"(max-width: 3142px) 100vw, 3142px\" \/><\/a><\/p>\n<p>and the state of the second s3 bucket<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM.png\"><img class=\"post-img alignnone wp-image-8725 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM.png\" alt=\"sync s3 buckets\" width=\"3148\" height=\"1132\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM.png 3148w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM-300x108.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM-1024x368.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM-768x276.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM-1536x552.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-20-at-10.55.31-PM-2048x736.png 2048w\" sizes=\"(max-width: 3148px) 100vw, 3148px\" \/><\/a><\/p>\n<p>as you can see the Second bucket <code>gritfy-s3-bucket2<\/code> is empty.<\/p>\n<p>to meet the desired state, we need to have the files created on the <code>bucket2<\/code><\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong>aws s3 s3:\/\/gritfy-s3-bucket1 s3:\/\/gritfy-s3-bucket2<\/span><\/pre>\n<p>let us try to sync it.\u00a0 See it in action<\/p>\n<p><script id=\"asciicast-meOnWU73gfNtLyOwwf2KIJBLk\" src=\"https:\/\/asciinema.org\/a\/meOnWU73gfNtLyOwwf2KIJBLk.js\" async><\/script><\/p>\n<p>you can see the files are copied from the source bucket to the destination bucket as the bucket 2 was not having the files on bucket1<\/p>\n<p><strong>In case you want to keep bucket2 as the ideal desired state.<\/strong> All you have to do is to change the source and destination<\/p>\n<p>In the following command, you can see that bucket2 is now at the source and bucket1 is on the destination end.<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong>aws s3 s3:\/\/gritfy-s3-bucket2 s3:\/\/gritfy-s3-bucket1<\/span><\/pre>\n<p>Remember the source is considered as the desired state and the destination would be matched to the source<\/p>\n<p>&nbsp;<\/p>\n<h3>AWS S3 sync two s3 buckets &#8211; Delete extra files<\/h3>\n<p>As we have seen earlier, we can delete the extra files\/objects from the destination if they are not present on the source.<\/p>\n<p>The same can be done while syncing between two S3 buckets<\/p>\n<p>Let us see how it works in real time.<\/p>\n<p>we will take the same buckets we have used in the previous example.<\/p>\n<p><strong>bucket1<\/strong> is having the following files and directories<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong>aws s3 ls s3:\/\/gritfy-s3-bucket1 &#8211; recursive\r\n2022-06-18 00:47:40 0 testdir1\/testfile1\r\n2022-06-18 00:47:41 0 testdir2\/testfile1\r\n2022-06-17 21:42:30 0 testfile1\r\n2022-06-17 21:42:30 0 testfile2<\/span><\/pre>\n<p><strong>bucket2<\/strong> is having the following files and directories<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 ls s3:\/\/gritfy-s3-bucket2 &#8211; recursive\r\n\r\n2022-06-20 23:00:20 0 testdir1\/testfile1\r\n2022-06-20 23:00:21 0 testdir2\/testfile1\r\n<span style=\"color: #800080;\">2022-06-20 23:03:53 0 testdir3\/testfile1<\/span>\r\n<span style=\"color: #800080;\">2022-06-20 23:03:53 0 testdir4\/testfile1<\/span>\r\n2022-06-20 23:00:21 0 testfile1\r\n2022-06-20 23:00:21 0 testfile2\r\n<span style=\"color: #800080;\">2022-06-20 23:03:53 0 testfile3<\/span><\/pre>\n<p>as you can see we have two directories and a file extra on bucket2 which is not present on bucket1.<\/p>\n<p>If we are using bucket1 as the source and bucket2\u00a0 as the destination and perform a simple sync. No action would be taken as the source files are already present at the destination.<\/p>\n<p>In case if you want to make sure bucket2 is exactly the same as bucket1. you should delete the extra files on the bucket2<\/p>\n<p><code>--delete<\/code> option can help here. we have seen how it works earlier too.<\/p>\n<p>It deletes the files on the destination which are not available on the source<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM.png\"><img class=\"post-img alignnone wp-image-8726 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM.png\" alt=\"aws s3 sync buckets\" width=\"2166\" height=\"1022\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM.png 2166w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM-300x142.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM-1024x483.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM-768x362.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM-1536x725.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-11.24.36-AM-2048x966.png 2048w\" sizes=\"(max-width: 2166px) 100vw, 2166px\" \/><\/a><\/p>\n<p>In the preceding screenshot, you can see while performing the sync, the extra files on the destination are removed.<\/p>\n<blockquote><p>\u00a0Note*: You can also use an <a href=\"https:\/\/docs.aws.amazon.com\/vpc\/latest\/privatelink\/vpc-endpoints-s3.html\">S3 access endpoint<\/a> in place of the S3 bucket URL.<\/p><\/blockquote>\n<p>Hope you have learnt how to perform aws s3 sync between two buckets.<\/p>\n<p>&nbsp;<\/p>\n<h2>AWS S3 Sync &#8211; Exclude and Include files<\/h2>\n<p>we have seen so far how to upload\/download files and how to sync local path and S3 bucket and also two s3 buckets.<\/p>\n<p>sometimes we might not want all of our files to be considered while performing the sync<\/p>\n<p>for example. let&#8217;s say you have a directory with various file types like <code>pdf, jpg, png, txt<\/code> etc.<\/p>\n<p>You are interested in uploading only the image files. how would you do it?<\/p>\n<p>there are two special options that you can use <code>--exclude<\/code> and <code>--include<\/code><\/p>\n<p>let us see how it works<\/p>\n<p>I have a s3 bucket, used as a backend for the CDN ( Content Delivery Network) with images.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM.png\"><img class=\"post-img alignnone wp-image-8729 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM.png\" alt=\"s3 bucket sync \" width=\"3616\" height=\"1266\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM.png 3616w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM-300x105.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM-1024x359.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM-768x269.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM-1536x538.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/Screenshot-2022-06-21-at-4.10.55-PM-2048x717.png 2048w\" sizes=\"(max-width: 3616px) 100vw, 3616px\" \/><\/a><\/p>\n<p>I have some files on my local and want to upload (sync) only the image files from Local Path(source) to the s3 bucket (destination)<\/p>\n<p>Look at the following directory listing where I have a variety of files pdf, jpg, png, txt<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>ls -lrt\r\ntotal 0\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:35 test.jpg\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:35 test1.png\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:35 test3.pdf\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:35 test.txt\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:36 test2.jpg\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:36 test2.png\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:36 test1.pdf\r\n-rw-r--r &#8211; 1 sarav staff 0 Jun 21 11:36 test1.txt<\/pre>\n<p>Let us see how can I sync (upload) only the image files. with extension <code>jpg<\/code> or <code>png<\/code> to our s3 bucket<\/p>\n<p>see it in action here.<\/p>\n<p><script id=\"asciicast-Axw68uTBWqccVluymX6cI22ou\" src=\"https:\/\/asciinema.org\/a\/Axw68uTBWqccVluymX6cI22ou.js\" async><\/script><\/p>\n<p>As you can see on the terminal record, we are including and excluding certain files using <code>--include<\/code> and <code>--exclude<\/code><\/p>\n<p>To include only image files, you need to exclude all the files first and include only images like this<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync . s3:\/\/gritfy-cdn &#8211; exclude \"*\" &#8211; include \"*.jpg\" &#8211; include \"*.png\"<\/pre>\n<p>to exclude certain files only you can simply use exclude alone<\/p>\n<pre><span style=\"color: #000000;\"><strong>\u26a1 <\/strong><\/span>aws s3 sync . s3:\/\/gritfy-cdn &#8211; exclude \"*.txt\"<\/pre>\n<p>You can use multiple <code>--include<\/code> and <code>--exclude<\/code> as per your requirement<\/p>\n<p>Read more about<a href=\"https:\/\/docs.aws.amazon.com\/cli\/latest\/reference\/s3\/index.html#use-of-exclude-and-include-filters\"> include and exclude filter<\/a> here<\/p>\n<p>&nbsp;<\/p>\n<h2>Conclusion<\/h2>\n<p>In this article, we have learnt various use cases and examples of aws s3 sync such as<\/p>\n<ul>\n<li>How to upload a directory recursively to S3 using aws S3 CLI<\/li>\n<li>How to download a directory recursively from S3 to local using aws S3 CLI<\/li>\n<li>Syncing Local and S3 buckets and uploading\/downloading the files<\/li>\n<li>Source and Destination importance in the S3 command<\/li>\n<li>Sync and delete the extra files at the destination<\/li>\n<li>Syncing two S3 buckets and deleting extra files using aws s3 sync etc<\/li>\n<\/ul>\n<p>Hope this article helps.<\/p>\n<p>If you have any requirements in Cloud and DevOps or Product Development.\u00a0 For Free Consultation reach out to us at <a href=\"mailto:rumenlishkoff@gmail.com\">rumenlishkoff@gmail.com<\/a><\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>&nbsp;<\/p>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577370\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"8667\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577370\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577370\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>In this article, we are going to see how to use the powerful aws s3 sync CLI command. In the Linux world, if we want to compare two directories and copy the files on the same machine or between two machines over the remote (ssh) we use rsync Those who[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":8730,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[234],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>AWS S3 Sync Examples - Sync S3 buckets AWS CLI | Devops Junction<\/title>\n<meta name=\"description\" content=\"AWS S3 Sync Examples. Sync S3 buckets and local files or directories using aws s3 cli. aws s3 sync two s3 buckets one to another. aws s3 sync copy files example.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"AWS S3 Sync Examples - Sync S3 buckets AWS CLI | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"AWS S3 Sync Examples. Sync S3 buckets and local files or directories using aws s3 cli. aws s3 sync two s3 buckets one to another. aws s3 sync copy files example.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-06-21T11:24:43+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-06-21T11:30:32+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/06\/aws-s3-sync.png\",\"width\":1748,\"height\":1240,\"caption\":\"aws s3 sync\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/\",\"name\":\"AWS S3 Sync Examples - Sync S3 buckets AWS CLI | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#primaryimage\"},\"datePublished\":\"2022-06-21T11:24:43+00:00\",\"dateModified\":\"2022-06-21T11:30:32+00:00\",\"description\":\"AWS S3 Sync Examples. Sync S3 buckets and local files or directories using aws s3 cli. aws s3 sync two s3 buckets one to another. aws s3 sync copy files example.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"AWS S3 Sync Examples &#8211; Sync S3 buckets AWS CLI\",\"datePublished\":\"2022-06-21T11:24:43+00:00\",\"dateModified\":\"2022-06-21T11:30:32+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#primaryimage\"},\"articleSection\":\"AWS\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-s3-sync-example\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8667"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=8667"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8667\/revisions"}],"predecessor-version":[{"id":8738,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8667\/revisions\/8738"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8730"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=8667"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=8667"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=8667"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
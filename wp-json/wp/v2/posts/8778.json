{"id":8778,"date":"2022-07-04T00:31:22","date_gmt":"2022-07-03T19:01:22","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=8778"},"modified":"2022-07-04T00:45:45","modified_gmt":"2022-07-03T19:15:45","slug":"kubectl-exec-examples","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/","title":{"rendered":"kubectl exec examples &#8211; Execute Shell commands into a POD | K8s"},"content":{"rendered":"<p>In this article, we will learn in detail how to exec shell commands on the container or pod using kubectl.<\/p>\n<p>We will learn how to execute bash or any shell commands using kubectl and exec any command into a container or pod<\/p>\n<p>Let us start,<\/p>\n<p>Before we begin, all the examples am going to execute today\/in this article are based on the <a href=\"https:\/\/www.middlewareinventory.com\/blog\/docker-tomcat-example-dockerfile-sample\/\">tomcat docker image<\/a> we published earlier<\/p>\n<p>To stay in sync with me, follow this article and create some sample namespace and single container and multi-container deployments\/pods.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec.png\"><img class=\"post-img alignnone wp-image-8816 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec.png\" alt=\"kubectl exec examples\" width=\"1748\" height=\"1240\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec.png 1748w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec-300x213.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec-1024x726.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec-768x545.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec-1536x1090.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec-90x65.png 90w\" sizes=\"(max-width: 1748px) 100vw, 1748px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h2><\/h2>\n<h2>Create a <span style=\"color: #e3144f;\">single<\/span> container, <span style=\"color: #e3144f;\">multi<\/span> <span style=\"color: #e3144f;\">container<\/span> deployments &#8211; For testing<\/h2>\n<p>Before we begin, I have two deployments one with a single container in a pod and another with a sidecar container ( one main + one sidecar)<\/p>\n<p>When dealing with PODs with multiple containers, you need to specify which container you want to execute the command into.<\/p>\n<p>We will see examples of kubectl exec with both <strong>single container pod<\/strong> and <strong>multi container pod<\/strong><\/p>\n<p>We have two deployments as represented in the following image.<\/p>\n<ul>\n<li>tomcat-nginx &#8211;\u00a0 multi container deployment ( sidecar)<\/li>\n<li>tomcatinfra &#8211; single container deployment<\/li>\n<\/ul>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM.png\"><img class=\"post-img alignnone wp-image-8782 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM.png\" alt=\"kubectl exec\" width=\"2018\" height=\"948\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM.png 2018w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM-300x141.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM-1024x481.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM-768x361.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-02-at-8.00.05-PM-1536x722.png 1536w\" sizes=\"(max-width: 2018px) 100vw, 2018px\" \/><\/a><\/p>\n<p>To stay in sync with me, you can do the same setup by executing the following commands<\/p>\n<p>First, let us create a namespace, I am creating a new namespace named <code>test-ns<\/code><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubect create namespace test-ns<\/pre>\n<p>Creating a Single Container deployment<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl create deployment tomcatinfra &#8211; image=saravak\/tomcat8 -n test-ns<\/pre>\n<p>Creating a Multi Container deployment<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl create deployment tomcat-nginx &#8211; image=saravak\/tomcat8,nginx -n test-ns<\/pre>\n<p>Validating the deployments<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl get deployment -n test-ns\r\nNAME           READY   UP-TO-DATE   AVAILABLE   AGE\r\ntomcat-nginx   1\/1     1            1           31s\r\ntomcatinfra    0\/1     1            0           8s<\/pre>\n<p>Validating the pods<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl get pods -n test-ns\r\nNAME                            READY   STATUS    RESTARTS   AGE\r\ntomcat-nginx-78d457fd5d-446wx   2\/2     Running   0          2m14s\r\ntomcatinfra-7f58bf9cb8-bk654    1\/1     Running   0          111s<\/pre>\n<p>&nbsp;<\/p>\n<p>To get the list of containers in each pod with nice formatting ( Note you might need JQ and awk be installed for this command to work)<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl get pod -o \"custom-columns=PodName:.metadata.name,Containers:.spec.containers[*].name,Image:.spec.containers[*].image\" -n test-ns\r\n\r\nPodName                         Containers      Image\r\ntomcat-nginx-78d457fd5d-446wx   tomcat8,nginx   saravak\/tomcat8,nginx\r\ntomcatinfra-7f58bf9cb8-bk654    tomcat8         saravak\/tomcat8<\/pre>\n<p>Here is the terminal record of me doing the same steps<\/p>\n<p><script id=\"asciicast-1GwUmuBV6RgzMNgVhARC512g5\" src=\"https:\/\/asciinema.org\/a\/1GwUmuBV6RgzMNgVhARC512g5.js\" async><\/script><\/p>\n<p>&nbsp;<\/p>\n<h2>Kubectl <span style=\"color: #e3144f;\">exec<\/span> command syntax<\/h2>\n<p>This is the syntax of the kubectl exec command.<\/p>\n<p>The syntax is a little self-explanatory, we will see more examples so that you would understand this even better.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">kubectl exec (POD | TYPE\/NAME) [-c CONTAINER] [flags] &#8211; COMMAND [args...] [options]<\/pre>\n<p>One thing you might have noticed is that\u00a0double dash (<code>--<\/code>), It is intentionally kept to separate the arguments you want to pass to the command from the kubectl arguments.<\/p>\n<p>Let&#8217;s suppose you want to pass some complicated commands like <code>ls -lrt |awk '{print $9}'<\/code>\u00a0 that time this would be really helpful.<\/p>\n<p>With that said, let us move on to the examples.<\/p>\n<p>&nbsp;<\/p>\n<h2>Kubectl <span style=\"color: #e3144f;\">exec<\/span> examples<\/h2>\n<p>We have listed various examples of kubectl exec here. you can refer to them and let us know in the comments section for more or any feedback.<\/p>\n<p>All my commands are executed on the local namespace we have created and I have two pods<\/p>\n<ul>\n<li><strong>tomcatinfra-7f58bf9cb8-bk654<\/strong> &#8211; Single Container POD<\/li>\n<li><strong>tomcat-nginx-78d457fd5d-446wx<\/strong> &#8211; Multi Container POD<\/li>\n<\/ul>\n<p>&nbsp;<\/p>\n<h3>Kubectl exec into pod &#8211; Executing commands inside POD<\/h3>\n<p>Now let us see how to execute a shell command into a pod using kubectl exec.<\/p>\n<p>As we have already mentioned If it is a single container pod, you do not have to mention the container name with <code>-c<\/code><\/p>\n<p>If it is a multi-container pod. you need to mention which container, the command should be executed using <code>-c<\/code><\/p>\n<blockquote><p>Note*: In a multi container pod, if you are not mentioning the desired container name, the first container would be taken by default.<\/p><\/blockquote>\n<p>Now we are going to execute some Linux commands on a <strong>Single container pod first.<\/strong><\/p>\n<p>Let us execute a simple <code>ls -lrt<\/code> command<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl exec tomcatinfra-7f58bf9cb8-bk654 -n test-ns &#8211; ls -lrt \/opt\/tomcat\/webapps<\/pre>\n<p>Now let us execute the same command on the <strong>Multi Container pod.\u00a0<\/strong><\/p>\n<p>As we mentioned earlier, we need to use <code>-c<\/code> to specify the container name. In our case <code>-c tomcat8<\/code><\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl exec tomcat-nginx-78d457fd5d-446wx -n test-ns -c tomcat8 &#8211; ls -lrt \/opt\/tomcat\/webapps<\/pre>\n<p>Here is the snapshot of the execution<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM.png\"><img class=\"post-img alignnone wp-image-8799 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM.png\" alt=\"kubectl exec\" width=\"2252\" height=\"970\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM.png 2252w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM-300x129.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM-1024x441.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM-768x331.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM-1536x662.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.49.14-PM-2048x882.png 2048w\" sizes=\"(max-width: 2252px) 100vw, 2252px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p>Now we have learnt how to execute a command into a container on the pod.<\/p>\n<p>In multi container pod if you are not specifying the container name with option <strong>-c<\/strong> \u00a0 it would default to the first container<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1.png\"><img class=\"post-img alignnone wp-image-8800 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1.png\" alt=\"kubectl exec \" width=\"2300\" height=\"954\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1.png 2300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1-300x124.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1-1024x425.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1-768x319.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1-1536x637.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-7.53.20-PM-1-2048x849.png 2048w\" sizes=\"(max-width: 2300px) 100vw, 2300px\" \/><\/a><\/p>\n<p>In the preceding snapshot. you can see if you are not using the <code>-c<\/code> it would be defaulting to the first container. It would also print a message <code>Defaulted Container<\/code><\/p>\n<p>&nbsp;<\/p>\n<h3>Running Complex Shell commands with Kubectl exec<\/h3>\n<p>As we have seen earlier, anything after the double dash <code>--<\/code> would be considered as a shell command and passed to the container<\/p>\n<p>so you would be able to execute any complex shell commands with <code>|<\/code> pipes and awk, sed etc.<\/p>\n<p>as long as you are having the commands available on the container. it would\/should be accepted and executed.<\/p>\n<p>Here is a screenshot of us trying to run some complex shell commands with sed and awk<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM.png\"><img class=\"post-img alignnone wp-image-8801 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM.png\" alt=\"kubectl exec multiple commands\" width=\"3014\" height=\"1022\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM.png 3014w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM-300x102.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM-1024x347.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM-768x260.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM-1536x521.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.26.24-PM-2048x694.png 2048w\" sizes=\"(max-width: 3014px) 100vw, 3014px\" \/><\/a><\/p>\n<p>All the commands you see on the preceding screenshot are given below for you to copy and try<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\"># grep for a specific file or directory\r\n\r\nkubectl exec tomcatinfra-7f58bf9cb8-bk654 -n test-ns &#8211; ls -lrt \/opt\/tomcat\/webapps | grep  ROOT\r\n\r\n# with some awk print only file and directory names, the column 9\r\n\r\nkubectl exec tomcatinfra-7f58bf9cb8-bk654 -n test-ns &#8211; ls -lrt \/opt\/tomcat\/webapps | awk '{print $9}'\r\n\r\n# removing the extra line at the beginning using sed \r\n\r\nkubectl exec tomcatinfra-7f58bf9cb8-bk654 -n test-ns &#8211; ls -lrt \/opt\/tomcat\/webapps | awk '{print $9}' | sed \"\/^$\/d\"\r\n\r\n# I want my output in a single line \r\n\r\nkubectl exec tomcatinfra-7f58bf9cb8-bk654 -n test-ns &#8211; ls -lrt \/opt\/tomcat\/webapps | awk '{print $9}'| sed \"\/^$\/d\"| tr \"\\n\" \" \"<\/pre>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h3>Executing shell scripts with kubectl exec<\/h3>\n<p>Now we have learnt how to execute commands into the pod and on the specific container using the <strong>-c option<\/strong><\/p>\n<p>We have seen how to execute some Linux commands using kubectl exec on the previous example.<\/p>\n<p>While Shell scripts are also a bunch of Linux commands.<\/p>\n<p>how do we run shell scripts with kubectl exec ?.\u00a0 let us see an example.<\/p>\n<p>Here is a screenshot of me executing a shell script<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM.png\"><img class=\"alignnone size-full wp-image-8803\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM.png\" alt=\"kubectl exec shell script\" width=\"2268\" height=\"466\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM.png 2268w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM-300x62.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM-1024x210.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM-768x158.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM-1536x316.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.38.45-PM-2048x421.png 2048w\" sizes=\"(max-width: 2268px) 100vw, 2268px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>Running some while loop without Interactive Terminal &#8211; Inline Scripting<\/h3>\n<p>Sometimes you would not want to login to the POD and create a shell script and execute it.<\/p>\n<p>You can just write it as a single-line script and execute it in a similar way as we did for the commands.<\/p>\n<p>Here is one example where I am running a while loop on a container without terminal<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM.png\"><img class=\"alignnone size-full wp-image-8804\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM.png\" alt=\"kubectl exec while loop\" width=\"2486\" height=\"468\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM.png 2486w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM-300x56.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM-1024x193.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM-768x145.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM-1536x289.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-03-at-11.41.54-PM-2048x386.png 2048w\" sizes=\"(max-width: 2486px) 100vw, 2486px\" \/><\/a><\/p>\n<p>Since it is a while true loop it would keep your session active. to stop it you need to CTRL+C.<\/p>\n<p>This is another way to keep your session active without having to SSH or go to terminal<\/p>\n<blockquote><p>\u00a0Note*: If you look closely we have one extra command before the while loop. which is <code>bash -c<\/code>\u00a0 this technically means that we are running the bash command with the script as an argument. this is a way to invoke a inline shell script using\u00a0 bash shell<\/p><\/blockquote>\n<p>Here is the command we have used on the screenshot, for you to copy and try<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl exec tomcat-nginx-78d457fd5d-446wx -n test-ns &#8211; bash -c \"while true; do  date;  sleep 3; done\"<\/pre>\n<p>&nbsp;<\/p>\n<p><span style=\"color: #993366;\">So what if there is no bash on the container ?<\/span><\/p>\n<p>In the previous command, we have seen <code>bash -c<\/code> and a while loop passed as an argument.<\/p>\n<p>It worked because my container had a bash. What if there is no bash shell on the container.<\/p>\n<p>It would fail.<\/p>\n<p>You might see some errors like this<\/p>\n<pre>OCI runtime exec failed: exec failed: container_linux.go:380: starting container process caused: exec: \"bash\": executable file not found in $PATH: unknown\r\ncommand terminated with exit code 126<\/pre>\n<p>so it is not always good to assume that we have bash in the container.\u00a0 but we have a workaround to try all the shells before we give up.<\/p>\n<p>Will see that soon.<\/p>\n<p>&nbsp;<\/p>\n<h3>Kubectl exec bash &#8211;\u00a0 Opening SSH Terminal to the pod<\/h3>\n<p>Let us presume the container we want to SSH to or take a terminal has a bash shell installed<\/p>\n<p>So to open a shell\/terminal. with the learning we already have. let us frame a command<\/p>\n<pre>$ kubectl exec tomcat-nginx-78d457fd5d-446wx -n test-ns -c nginx &#8211; bash\r\n\r\n$ kubectl exec tomcat-nginx-78d457fd5d-446wx -n test-ns -c tomcat8 &#8211; bash<\/pre>\n<p>but this is wrong. the command you have given previously might not let you into a terminal.<\/p>\n<p>This would execute the bash command as we wanted to but will it give you a terminal access ? No.<\/p>\n<p>To get SSH or Terminal access to the container on the POD using kubectl exec.<\/p>\n<p>You need to use the option <code>-i<\/code>\u00a0 and <code>-t<\/code><\/p>\n<ul>\n<li>-i\u00a0 represents that we want kubectl exec to run this interactive session<\/li>\n<li>-t\u00a0 represents that kubectl exec should get a terminal ID allotted.<\/li>\n<\/ul>\n<p>Both have to be given for opening a proper SSH terminal to the POD\/container.<\/p>\n<p>Here is a quick video where we demonstrate how to SSH or take the terminal into the container and what happens if we are not using both the options<\/p>\n<p><script id=\"asciicast-Q8dxW6cGFsO0dgn0w2W6xZhak\" src=\"https:\/\/asciinema.org\/a\/Q8dxW6cGFsO0dgn0w2W6xZhak.js\" async><\/script><\/p>\n<p>So here are the right commands you have to use to SSH into the pod or the container. ( make sure you update the pod name and ns name with yours )<\/p>\n<pre>$ kubectl exec tomcat-nginx-78d457fd5d-446wx -n test-ns -c tomcat8 -i -t &#8211; bash<\/pre>\n<p>So as we mentioned, we have presumed that bash is present on the container. In my case it was.<\/p>\n<p>What if there is no bash and how would you take terminal or SSH into the container\/pod<\/p>\n<h3><\/h3>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>Kubectl exec\u00a0 SSH into the terminal without bash<\/h3>\n<p>When you are not sure what shell would be available on the container, or when you know that bash may not be there but to try it out<\/p>\n<p>There is a command we can use to test major shells before giving up<\/p>\n<p>This is a recommended way to gain SSH or terminal access or Simply POD SHELL access.<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\" data-enlighter-linenumbers=\"false\">$ kubectl exec PODNAME -n NAMESPAE -c CONTAINER_NAME -i -t &#8211; sh -c \"clear; (bash || ash || sh || ksh || csh || zsh )\"<\/pre>\n<p>In the preceding command, we are trying all the shells before we give up. we check if any one of the shell is available on the container<\/p>\n<ul>\n<li>bash<\/li>\n<li>ash<\/li>\n<li>sh<\/li>\n<li>KSH<\/li>\n<li>zsh<\/li>\n<\/ul>\n<p>You can add more shells of your choice with <code>|| shell name<\/code>\u00a0 on the command<\/p>\n<p>Take a look at the following terminal record to understand how it works in real time<\/p>\n<p><script id=\"asciicast-57w0tGU7LZLZ1g2kHWWR96nC2\" src=\"https:\/\/asciinema.org\/a\/57w0tGU7LZLZ1g2kHWWR96nC2.js\" async><\/script><\/p>\n<p>&nbsp;<\/p>\n<h2>Conclusion<\/h2>\n<p>In this article we have seen examples of kubectl exec and covered few topics<\/p>\n<ul>\n<li>how to ssh or open pod shell using kubectl exec<\/li>\n<li>how to execute a command into the pod or container<\/li>\n<li>choosing the container name using option -c<\/li>\n<li>interactive terminal option and why both are important<\/li>\n<li>exec inline shell scripts using bash -c<\/li>\n<li>how to run multiple complex commands using kubectl exec etc.<\/li>\n<\/ul>\n<p>Hope this helps you and if you have any questions or feedback. please do let us know on the comments section.<\/p>\n<p>If you have any requirements on cloud\/DevOps (or) Looking for a DevOps mentor or Support as a service. do visit <a href=\"https:\/\/gritfy.com\">https:\/\/gritfy.com\u00a0<\/a>or email us at <a href=\"mailto:rumenlishkoff@gmail.com\">rumenlishkoff@gmail.com<\/a><\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577616\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"8778\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577616\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577616\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this article, we will learn in detail how to exec shell commands on the container or pod using kubectl. We will learn how to execute bash or any shell commands using kubectl and exec any command into a container or pod Let us start, Before we begin, all the[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":8816,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[151],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>kubectl exec examples - Execute Shell commands into a POD | K8s<\/title>\n<meta name=\"description\" content=\"kubectl exec command examples. how to kubectl exec into a pod or container. how to choose container while executing command. Kubectl exec bash or any other shell.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"kubectl exec examples - Execute Shell commands into a POD | K8s\" \/>\n<meta property=\"og:description\" content=\"kubectl exec command examples. how to kubectl exec into a pod or container. how to choose container while executing command. Kubectl exec bash or any other shell.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-07-03T19:01:22+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-07-03T19:15:45+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/kubectlexec.png\",\"width\":1748,\"height\":1240,\"caption\":\"kubectl exec examples\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/\",\"name\":\"kubectl exec examples - Execute Shell commands into a POD | K8s\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#primaryimage\"},\"datePublished\":\"2022-07-03T19:01:22+00:00\",\"dateModified\":\"2022-07-03T19:15:45+00:00\",\"description\":\"kubectl exec command examples. how to kubectl exec into a pod or container. how to choose container while executing command. Kubectl exec bash or any other shell.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"kubectl exec examples &#8211; Execute Shell commands into a POD | K8s\",\"datePublished\":\"2022-07-03T19:01:22+00:00\",\"dateModified\":\"2022-07-03T19:15:45+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#primaryimage\"},\"articleSection\":\"Kubernetes\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/kubectl-exec-examples\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8778"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=8778"}],"version-history":[{"count":6,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8778\/revisions"}],"predecessor-version":[{"id":8812,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8778\/revisions\/8812"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8816"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=8778"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=8778"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=8778"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
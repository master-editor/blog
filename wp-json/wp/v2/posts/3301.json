{"id":3301,"date":"2019-06-02T04:58:44","date_gmt":"2019-06-01T23:28:44","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=3301"},"modified":"2022-06-19T11:28:05","modified_gmt":"2022-06-19T05:58:05","slug":"shell-script-to-ssh-multiple-servers-with-password","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/","title":{"rendered":"Shell Script to SSH with Password &#8211; How to Handle Password Prompt"},"content":{"rendered":"<p>Are you looking for a Shell Script that connects to remote server and executes some commands or another script?\u00a0 Are you looking for a Shell Script which SCP files to a remote server? Are you looking for Shell Script to SSH with Password and Automatically handle the Password Prompt?<\/p>\n<p>Wondering how to manage the Password Prompt while using SSH and SCP inside the Script.\u00a0 ?<\/p>\n<p>Else, Are you looking for an answer to any of the following questions<\/p>\n<ol>\n<li>SSH from Shell Script to Remote Server and Execute Multiple Commands<\/li>\n<li>shell script ssh with password<\/li>\n<li>shell script ssh without password prompt<\/li>\n<li>how to handle password prompt in a shell script<\/li>\n<li>ssh without key pair (or) key authentication<\/li>\n<li>SCP shell script with password<\/li>\n<li>SCP command in shell script without prompting password<\/li>\n<\/ol>\n<p>Then this post is for you<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM.png\"><img class=\"alignnone size-full wp-image-3901\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM.png\" alt=\"\" width=\"994\" height=\"678\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM.png 994w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM-300x205.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM-768x524.png 768w\" sizes=\"(max-width: 994px) 100vw, 994px\" \/><\/a><\/p>\n<h3>So how do you connect to remote Linux server Normally ( From Terminal)<\/h3>\n<p>To Login to remote servers we use <code>SSH<\/code> and to transfer files between Linux Servers we <code>SCP<\/code>. I presume that you might have used this in your experience.<\/p>\n<p>Now while using the SSH and SCP command you would be prompted for the password before it lets you do anything with the remote Linux Server.<\/p>\n<p>If it is terminal you can actually enter\/type the password yourself and proceed.<\/p>\n<p>But what will you do when you want to use the SSH and SCP commands inside the Shell Script.<\/p>\n<p>So, How do you handle the Password Prompt of SSH and SCP inside the Shell Script?<\/p>\n<p>There are two ways.<\/p>\n<ol>\n<li><a href=\"https:\/\/www.middlewareinventory.com\/blog\/enable-ssh-key-based-authentication-ssh-without-password\/\">\u00a0Create Passwordless SSH connection between servers using Key-based Authentication<\/a><\/li>\n<li>\u00a0Use SSHPass to pass the password with your SCP and SSH commands. discussed in this post<\/li>\n<\/ol>\n<blockquote><p><span style=\"font-size: 14pt;\">Yes the objective of this post is to make you able to use SSH and SCP inside the Shell Script and handling the Password prompt without having to create Key based authentication<\/span><\/p><\/blockquote>\n<p>So let&#8217;s Proceed.<\/p>\n<p>Before going to the Shell Script. Let us see the same requirement done in the terminal\/shell.<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>So, How to connect to SSH or SCP without being prompted for the Password\u00a0 (Terminal)<\/h3>\n<p>The Answer is. You should use <strong>SSHPASS<\/strong> along with your\u00a0<strong>SSH <\/strong>and<strong> SCP <\/strong>commands<\/p>\n<p>What!!!.<\/p>\n<blockquote><p>SSHPASS command reads the password from a FILE or from STDIN and pass it on to the SSH and SCP command, and thereby\u00a0preventing the SSH and SCP commands from prompting for a password<\/p><\/blockquote>\n<p>See the example in real time.<\/p>\n<p><script id=\"asciicast-96XzFNOs8aBXnm17QlCRHqelc\" src=\"https:\/\/asciinema.org\/a\/96XzFNOs8aBXnm17QlCRHqelc.js\" async><\/script><\/p>\n<p>So as shown in the preceding record. I have to perform the following steps to log in to the remote server without being prompted or in other words, <strong>Make SSH read password from a file using SSHpass<\/strong><\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p><span style=\"color: #000000;\"><strong>Step1:\u00a0 Create a password file and type in your password as a clear text ( Not a Secure Method\u00a0)<\/strong><\/span><\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Write the password into a file and Save it<\/span>\r\n[vagrant@mwivmapp01 ~]$ <span style=\"color: #00ccff;\">cat &gt; .passwrdfile<\/span>\r\nvagrant\r\n\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Display the content of the file<\/span>\r\n[vagrant@mwivmapp01 ~]$ <span style=\"color: #00ccff;\">cat  .passwrdfile<\/span>\r\nvagrant<\/pre>\n<p>&nbsp;<\/p>\n<p><span style=\"color: #000000;\"><strong>Step2:\u00a0 Refer the password file in SSHPASS and pass it to SSH.\u00a0<\/strong><\/span><\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Logging into mwivmapp02 from mwivmapp02 using SSHPASS and SSH<\/span>\r\n[vagrant@<span style=\"color: #ffcc00;\">mwivmapp01<\/span> ~]$ <span style=\"color: #00ffff;\">sshpass -f.passwrdfile ssh mwivmapp02<\/span>\r\nLast login: Sat Jun\u00a0 1 20:36:14 2019 from 192.168.43.11\r\n[vagrant@<span style=\"color: #ffcc00;\">mwivmapp02<\/span> ~]$ <span class=\"hljs-built_in\" style=\"color: #6d9cbe;\"><span style=\"color: #00ffff;\">exit<\/span>\r\n<span style=\"color: #ffffff;\">[vagrant@<span style=\"color: #ffcc00;\">mwivmapp01<\/span> ~]$<\/span>\r\n<\/span><\/pre>\n<p>In the preceding snippet shown. you can find that there was no password prompt and we have successfully logged in to the remote server [<code>mwivmapp02<\/code>]<\/p>\n<p>There is a Security flaw in this approach. Whoever gets access to this password file can get the password as it is a plain text. therefore,\u00a0 it is not a recommended approach.<\/p>\n<p>&nbsp;<\/p>\n<h3>How to use SSHPASS inside the Shell Script ( A Secure Approach )<\/h3>\n<p>Now we are going to use the SSHPASS inside the Shell Script and this time we are going to read the password from the user instead of keeping it in a file<\/p>\n<p>we are going to use <code>sshpass -p<\/code> for that. Here -p represents the Clear Text password<\/p>\n<p>We cannot use this in the terminal as the history would show the password as a clear text to whoever logged in to the System.<\/p>\n<p>But with Script it is OK as the Variables are alive only during the lifetime of the Script and they cannot be seen in the history.<\/p>\n<p>The Script does the following tasks<\/p>\n<ol>\n<li>Gets UserName and Password from the User<\/li>\n<li>Read the list of server names from a <code>Serverlist.properties<\/code> file<\/li>\n<li>Create a Script on the Runtime named <code>TestScript.sh<\/code>\u00a0using <a href=\"https:\/\/linuxhint.com\/bash-heredoc-tutorial\/\">HereDocument<\/a><\/li>\n<li>Copy the Created TestScript to the remote server using <strong>SCP<\/strong><\/li>\n<li>Execute the Copied TestScript on the remote server using <strong>SSH<\/strong><\/li>\n<\/ol>\n<p>&nbsp;<\/p>\n<p><span style=\"color: #0e5687; font-size: 14pt;\">The Serverlist.properties file<\/span><\/p>\n<p>we have intentionally kept only one server. you can have more based on your need.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># cat Serverlist.properties <\/span>\r\nmwivmapp02\r\n<\/pre>\n<p>&nbsp;<\/p>\n<p><span style=\"color: #0e5687; font-size: 14pt;\">The Script file [RemoteExec.sh]<\/span><\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">#!\/bin\/bash<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Author: Rumen Lishkov - aksarav@middlewareinventory.com<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Date: 2 June 2019<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">#<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">#<\/span>\r\n\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Get the UserName to use while logging into a Remote machine<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"Enter the Remote UserName\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">read<\/span> rmtuname\r\n\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"Enter the Remote Password\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">read<\/span> <span class=\"hljs-_\">-s<\/span> rmtpasswrd\r\n\r\n\r\n<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Read the ServerNames from Properties file<\/span>\r\n<span class=\"hljs-keyword\" style=\"color: #c26230;\">for<\/span> server <span class=\"hljs-keyword\" style=\"color: #c26230;\">in<\/span> `cat Serverlist.properties`\r\n<span class=\"hljs-keyword\" style=\"color: #c26230;\">do<\/span>\r\n        <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Printing the ServerName<\/span>\r\n        <span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"Processing ServerName \"<\/span><span class=\"hljs-variable\" style=\"color: #a5c261;\">$server<\/span>\r\n\r\n        <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Write some Shell Script for Temporary Usage and Save in Current location<\/span>\r\n        cat &lt;&lt; <span class=\"hljs-string\" style=\"color: #a5c261;\">'EOF'<\/span> &gt; .\/TestScript.sh\r\n        \t<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">#!\/bin\/bash<\/span>\r\n        \t<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"My Name is <span class=\"hljs-variable\" style=\"color: #a5c261;\">$0<\/span>\"<\/span>\r\n        \t<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"I am Running on `hostname`\"<\/span>\r\n        \t<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"The Date on the Current System is `date`\"<\/span>\r\n        \t<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"That's all!!. I am Exitting\"<\/span>\r\n        \t<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">exit<\/span> 0\r\nEOF\r\n\tchmod a+x TestScript.sh\r\n\r\n        <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># SCP - copy the script file from Current Directory to Remote Server <\/span>\r\n        sshpass -p<span class=\"hljs-variable\" style=\"color: #a5c261;\">$rmtpasswrd<\/span> scp -o UserKnownHostsFile=\/dev\/null -o StrictHostKeyChecking=no TestScript.sh <span class=\"hljs-variable\" style=\"color: #a5c261;\">$rmtuname<\/span>@<span class=\"hljs-variable\" style=\"color: #a5c261;\">$server<\/span>:\/tmp\/TestScript.sh\r\n        \r\n        <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># Take Rest for 5 Seconds<\/span>\r\n        sleep 5\r\n\r\n        <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># SSH to remote Server  and Execute a Command [ Invoke the Script ] <\/span>\r\n        sshpass -p<span class=\"hljs-variable\" style=\"color: #a5c261;\">$rmtpasswrd<\/span> ssh   -o UserKnownHostsFile=\/dev\/null -o StrictHostKeyChecking=no <span class=\"hljs-variable\" style=\"color: #a5c261;\">$rmtuname<\/span>@<span class=\"hljs-variable\" style=\"color: #a5c261;\">$server<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"\/tmp\/TestScript.sh\"<\/span>\r\n<span class=\"hljs-keyword\" style=\"color: #c26230;\">done<\/span>\r\n<\/pre>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p><span style=\"font-size: 14pt; color: #0e5687;\">The Dynamically Created TestScript.sh<\/span><\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">#!\/bin\/bash<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"My Name is <span class=\"hljs-variable\" style=\"color: #a5c261;\">$0<\/span>\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"I am Running on `hostname`\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"The Date on the Current System is `date`\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">echo<\/span> <span class=\"hljs-string\" style=\"color: #a5c261;\">\"That's all!!. I am Exitting\"<\/span>\r\n<span class=\"hljs-built_in\" style=\"color: #6d9cbe;\">exit<\/span> 0<\/pre>\n<p>&nbsp;<\/p>\n<p><span style=\"font-size: 14pt; color: #0e5687;\">Runtime Output of RemoteExec.sh<\/span><\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\">[root@mwivmapp01 tmp]<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># hostname<\/span>\r\nmwivmapp01\r\n[root@mwivmapp01 tmp]<span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># .\/RemoteExec.sh <\/span>\r\nEnter the Remote UserName\r\nvagrant\r\nEnter the Remote Password\r\nProcessing ServerName mwivmapp02\r\nWarning: Permanently added <span class=\"hljs-string\" style=\"color: #a5c261;\">'mwivmapp02,192.168.43.12'<\/span> (ECDSA) to the list of known hosts.\r\nWarning: Permanently added <span class=\"hljs-string\" style=\"color: #a5c261;\">'mwivmapp02,192.168.43.12'<\/span> (ECDSA) to the list of known hosts.\r\n\r\nMy Name is \/tmp\/TestScript.sh\r\nI am Running on mwivmapp02\r\nThe Date on the Current System is Sat Jun  1 22:17:07 UTC 2019\r\nThat's all!!. I am Exitting\r\n<span class=\"hljs-string\" style=\"color: #a5c261;\">\r\n[root@mwivmapp01 tmp]# <\/span><\/pre>\n<p>You can see that the script has been created dynamically and shared with the remote server and executed and the output has been displayed.<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>Some Security Testing I did, to verify if ps reveals my password<\/h3>\n<p>I wanted to see if this is a Real Secure approach<\/p>\n<p>Being aware that, All the commands being executed inside the Shell Script would eventually show up in the result of PS at least during the time of execution<\/p>\n<p>Though the <code>sshpass -p<\/code> is inside the script. I thought if another user who have access to the terminal can use ps command to get the password<\/p>\n<p>So I wanted it to test it myself.<\/p>\n<p>I used <code>ps -auxwww<\/code> command and was searching for the keyword sshpass on the <code>mwivmapp01<\/code> server after invoking the script<\/p>\n<p>This is what I got.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM.png\"><img class=\"alignnone size-full wp-image-3900\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM.png\" alt=\"\" width=\"1425\" height=\"565\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM.png 1425w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM-300x119.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM-768x305.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-3.59.26-AM-1024x406.png 1024w\" sizes=\"(max-width: 1425px) 100vw, 1425px\" \/><\/a><\/p>\n<p>I found some Random Characters replacing my actual password. Thanks to the Developers of SSHPASS<\/p>\n<p>So It is clear that you cannot get the password using PS using this Method. Hence it is proved to be Secure<\/p>\n<p>Hope this article helps. Rate this article [ratings]<\/p>\n<p>If you find any bug in this article (or) security issues with this approache please feel free to enlighten me<\/p>\n<p>Thanks,<\/p>\n<p>Rumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670578038\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"3301\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670578038\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670578038\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Are you looking for a Shell Script that connects to remote server and executes some commands or another script?\u00a0 Are you looking for a Shell Script which SCP files to a remote server? Are you looking for Shell Script to SSH with Password and Automatically handle the Password Prompt? Wondering[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":3901,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[7],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Shell Script to SSH with Password - How to Handle Password Prompt<\/title>\n<meta name=\"description\" content=\"The objective of this Post is to answer How to SSH from Shell Script to Remote Servers and Execute Multiple Commands, A shell script ssh with password, ssh without password prompt, handle password prompt in a shell script, ssh without key pair, SCP command in shell script without password prompt. Example Shell Script\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Shell Script to SSH with Password - How to Handle Password Prompt\" \/>\n<meta property=\"og:description\" content=\"The objective of this Post is to answer How to SSH from Shell Script to Remote Servers and Execute Multiple Commands, A shell script ssh with password, ssh without password prompt, handle password prompt in a shell script, ssh without key pair, SCP command in shell script without password prompt. Example Shell Script\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2019-06-01T23:28:44+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-06-19T05:58:05+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM.png\" \/>\n\t<meta property=\"og:image:width\" content=\"994\" \/>\n\t<meta property=\"og:image:height\" content=\"678\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/06\/Screen-Shot-2019-06-02-at-4.49.05-AM.png\",\"width\":994,\"height\":678},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/\",\"name\":\"Shell Script to SSH with Password - How to Handle Password Prompt\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#primaryimage\"},\"datePublished\":\"2019-06-01T23:28:44+00:00\",\"dateModified\":\"2022-06-19T05:58:05+00:00\",\"description\":\"The objective of this Post is to answer How to SSH from Shell Script to Remote Servers and Execute Multiple Commands, A shell script ssh with password, ssh without password prompt, handle password prompt in a shell script, ssh without key pair, SCP command in shell script without password prompt. Example Shell Script\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Shell Script to SSH with Password &#8211; How to Handle Password Prompt\",\"datePublished\":\"2019-06-01T23:28:44+00:00\",\"dateModified\":\"2022-06-19T05:58:05+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#primaryimage\"},\"articleSection\":\"Unix\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/shell-script-to-ssh-multiple-servers-with-password\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/3301"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=3301"}],"version-history":[{"count":18,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/3301\/revisions"}],"predecessor-version":[{"id":6441,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/3301\/revisions\/6441"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/3901"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=3301"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=3301"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=3301"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
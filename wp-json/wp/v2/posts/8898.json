{"id":8898,"date":"2022-07-15T21:43:51","date_gmt":"2022-07-15T16:13:51","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=8898"},"modified":"2022-07-15T21:45:22","modified_gmt":"2022-07-15T16:15:22","slug":"kubernetes-restart-daemonset-kubectl-devops-junction","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/","title":{"rendered":"Kubernetes restart daemonset &#8211; kubectl | Devops Junction"},"content":{"rendered":"<p>In this quick article, let us learn how to restart the Kubernetes <strong>DaemonSet<\/strong> and all the pods created by the DaemonSet.<\/p>\n<p>Before we move on to the objective, here are some basics. real quick.<\/p>\n<p>DaemonSet is to deploy a specific application\/feature to your Kubernetes cluster and to make sure it is available to all the nodes currently running and for those going to be added in future by <strong>cluster auto scaler<\/strong> or <a href=\"https:\/\/www.middlewareinventory.com\/blog\/creating-eks-cluster-with-karpenter-auto-scaling-terraform-kubernetes\/\">Karpenter<\/a><\/p>\n<p>Some examples of DaemonSet are.<\/p>\n<ul>\n<li>running a cluster storage daemon on every node &#8211; EFS Driver, CSI driver<\/li>\n<li>running a logs collection daemon on every node &#8211; FluentD, DataDog, Splunk<\/li>\n<li>running a node monitoring daemon on every node &#8211; Nodeexporter, Telegraf<\/li>\n<\/ul>\n<p>Now it&#8217;s time for the objective.<\/p>\n<h2><\/h2>\n<h2>List the daemonset<\/h2>\n<p>First, let us take a quick look at how many Daemonsets we are having in our cluster<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM.png\"><img class=\"post-img alignnone wp-image-8899 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM.png\" alt=\"kubectl deaemonset restart\" width=\"2952\" height=\"376\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM.png 2952w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-300x38.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-1024x130.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-768x98.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-1536x196.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-2048x261.png 2048w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.11.00-PM-1080x138.png 1080w\" sizes=\"(max-width: 2952px) 100vw, 2952px\" \/><\/a><\/p>\n<p>As you can see, we are listing all the Daemonsets in our cluster using the following command<\/p>\n<pre>kubectl get -A daemonset<\/pre>\n<p><code>-A<\/code> is to list DaemonSets across all namespaces.<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h2>How to restart a Kubernetes daemonset<\/h2>\n<p>You can use the <strong>kubectl rollout restart<\/strong> command to restart the DaemonSet. Here is an example of how it works in real-time.<\/p>\n<p>As you could have noticed in our previous listing screenshot. I have a <code>datadog<\/code> daemonset installed, for log collection and host monitoring.<\/p>\n<p>Now let us restart the daemonset and see how it goes.<\/p>\n<p>This is the command we are going to use to restart the <strong>datadog<\/strong> daemonset running in my cluster on the <strong>default<\/strong> namespace<\/p>\n<pre>kubectl rollout restart daemonset datadog -n default<\/pre>\n<p>I have created a terminal record of me doing a daemonset restart at my end<\/p>\n<p><script id=\"asciicast-d0TfKhUW4wbnjuFPSLPTcMjCb\" src=\"https:\/\/asciinema.org\/a\/d0TfKhUW4wbnjuFPSLPTcMjCb.js\" async><\/script><\/p>\n<p>&nbsp;<\/p>\n<h2>Check the progress of kubectl rollout restart<\/h2>\n<p>When we have executed the<strong> kubectl rollout restart<\/strong> command to restart the daemonset, we got the message it is restarted<\/p>\n<p>But it actually takes a while before it can replace all the running pods with a new one.<\/p>\n<p>To see the actual status and to stay updated on the status of how the restart is going on.<\/p>\n<p>there is a kubectl command we can use to see the progress of rollout restart<\/p>\n<pre>kubectl rollout status ds\/datadog -n default<\/pre>\n<p>Here is a screenshot\u00a0 of this command while executed at my end<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM.png\"><img class=\"post-img alignnone wp-image-8900 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM.png\" alt=\"kubectl restart daemonset\" width=\"1708\" height=\"668\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM.png 1708w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM-300x117.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM-1024x400.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM-768x300.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM-1536x601.png 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/07\/Screenshot-2022-07-15-at-9.37.49-PM-1080x422.png 1080w\" sizes=\"(max-width: 1708px) 100vw, 1708px\" \/><\/a><\/p>\n<p>Hope this helps<\/p>\n<p>Access our other <a href=\"https:\/\/www.middlewareinventory.com\/blog\/category\/kubernetes\/\">Kubernetes articles<\/a> here<\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>&nbsp;<\/p>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670578136\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"8898\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670578136\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670578136\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this quick article, let us learn how to restart the Kubernetes DaemonSet and all the pods created by the DaemonSet. Before we move on to the objective, here are some basics. real quick. DaemonSet is to deploy a specific application\/feature to your Kubernetes cluster and to make sure it[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":8381,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[151],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Kubernetes restart daemonset - kubectl | Devops Junction<\/title>\n<meta name=\"description\" content=\"How to restart Kubernetes daemonset using kubectl. Kubectl rollout restart daemonset command example and check the status of rollout restart kubectl.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Kubernetes restart daemonset - kubectl | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"How to restart Kubernetes daemonset using kubectl. Kubectl rollout restart daemonset command example and check the status of rollout restart kubectl.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-07-15T16:13:51+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-07-15T16:15:22+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/kubernetes-tricks.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/04\/kubernetes-tricks.png\",\"width\":1748,\"height\":1240},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/\",\"name\":\"Kubernetes restart daemonset - kubectl | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#primaryimage\"},\"datePublished\":\"2022-07-15T16:13:51+00:00\",\"dateModified\":\"2022-07-15T16:15:22+00:00\",\"description\":\"How to restart Kubernetes daemonset using kubectl. Kubectl rollout restart daemonset command example and check the status of rollout restart kubectl.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Kubernetes restart daemonset &#8211; kubectl | Devops Junction\",\"datePublished\":\"2022-07-15T16:13:51+00:00\",\"dateModified\":\"2022-07-15T16:15:22+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#primaryimage\"},\"articleSection\":\"Kubernetes\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/kubernetes-restart-daemonset-kubectl-devops-junction\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8898"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=8898"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8898\/revisions"}],"predecessor-version":[{"id":8910,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/8898\/revisions\/8910"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8381"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=8898"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=8898"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=8898"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
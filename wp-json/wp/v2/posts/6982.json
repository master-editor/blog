{"id":6982,"date":"2022-01-19T11:47:52","date_gmt":"2022-01-19T06:17:52","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=6982"},"modified":"2022-01-19T18:56:36","modified_gmt":"2022-01-19T13:26:36","slug":"ansible-pre-tasks-and-post-tasks-example","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/","title":{"rendered":"Ansible Pre Tasks and Post Tasks Example | Devops Junction"},"content":{"rendered":"<p>In this article, we are going to see how to use ansible pre tasks and post tasks with examples.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks.jpg\"><img class=\"post-img alignnone wp-image-8054 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks.jpg\" alt=\"ansible pre tasks\" width=\"1748\" height=\"1240\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks.jpg 1748w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks-300x213.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks-1024x726.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks-768x545.jpg 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks-1536x1090.jpg 1536w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks-90x65.jpg 90w\" sizes=\"(max-width: 1748px) 100vw, 1748px\" \/><\/a><\/p>\n<h2><strong>What is Ansible pre_tasks?<\/strong><\/h2>\n<p>Ansible pretask is a conditional execution block that runs before running the play. It can be a task with some prerequisites check (or) validation<\/p>\n<p>Some examples we can think where ansible pre-task would be helpful<\/p>\n<ul>\n<li>To install dependency packages before running the actual application <code>npm install<\/code> or <code>pip install -r requirements.txt<\/code><\/li>\n<li>To validate if the environment meets sufficient criteria like memory, OS version etc before installing a software<\/li>\n<li>configuring SSH key prior so that you can log in<\/li>\n<li>Server provisioning steps like creating user, group etc before the installation or setup begin<\/li>\n<\/ul>\n<p>There are more examples we can continue adding to this list<\/p>\n<p>To put it simply. If you want to run anything as a prerequisite or prevalidation before your actual play. ansible pre_tasks is your way to go<\/p>\n<p>&nbsp;<\/p>\n<h2><strong>What is Ansible post_tasks?<\/strong><\/h2>\n<p>Just like ansible pre_tasks but this is executed after the actual play or task is completed.<\/p>\n<p>this is mostly useful for post validation or assertion to make sure things are in the right shape or the result is matching our expectations.<\/p>\n<p>Some examples we can think of are listed below<\/p>\n<ul>\n<li>To validate if things were installed properly and the playbook executed fine.<\/li>\n<li>To send emails or Slack notifications after successful completion of a playbook<\/li>\n<li>Running some other task or for accessing some API or external service upon playbook completion like webhook<\/li>\n<li>Starting the application after the installation and configuration is completed<\/li>\n<\/ul>\n<p>We can keep this list going with more and more use cases for ansible post_tasks<\/p>\n<p>Simply put, ansible post_tasks is to conditionally execute a block or play upon the successful completion of the playbook. it can be used for post validation, post-execution automation.<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h2>How to use pre_tasks and post_tasks in Ansible<\/h2>\n<p>Let us see how to use ansible <code>pre_tasks<\/code> and <code>post_tasks<\/code> in the ansible-playbook practically.<\/p>\n<p>In this playbook, we are going to perform the following tasks<\/p>\n<ul>\n<li style=\"list-style-type: none;\">\n<ul>\n<li>Install necessary commands and tools using <code>apt<\/code> module &#8211; <code>pre_tasks<\/code><\/li>\n<li>Validate the nodejs installation is successful and print version using debug and assert<\/li>\n<li>Create a directory to download the nodejs application<\/li>\n<li>Download the nodejs codebase from GIT repo using Tokenized URL<\/li>\n<li>Tokens are saved and retrieved from the Secrets file named <code>gitsecrets.yml<\/code><\/li>\n<li>Do <code>npm install<\/code>once the code is downloaded<\/li>\n<li>Start the nodejs application<\/li>\n<li>Validate if the port is open and Node js is accepting requests<\/li>\n<li>Send Slack notification using ansible slack module &#8211; <code>post_tasks<\/code><\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"yaml\" data-enlighter-theme=\"bootstrap4\">---\r\n  - name: Install and Launch the Simple NodeJS Application\r\n    hosts: testserver\r\n    vars_files:\r\n       - gitsecrets.yml\r\n    vars:\r\n       - destdir: \/apps\/sampleapp\r\n\r\n    pre_tasks:\r\n      - name : install dependencies before starting\r\n        become: yes\r\n        register: aptinstall\r\n        apt:\r\n           name: \r\n            - nodejs\r\n            - npm\r\n            - git\r\n           state: latest\r\n           update_cache: yes\r\n      \r\n      - name : validate the nodejs installation\r\n        debug: msg=\"Installation of node is Successfull\"\r\n        when: aptinstall is changed\r\n    \r\n    tasks:\r\n       - name: Version of Node and NPM\r\n         shell:\r\n            \"npm -v &amp;&amp; nodejs -v\"\r\n         register: versioninfo\r\n\r\n       - name: Validate if the installation is intact\r\n         assert:\r\n          that: \"versioninfo is changed\"\r\n\r\n      \r\n       - name: Create Dest Directory if not exists\r\n         become: yes\r\n         file: \r\n          path: \"{{ destdir }}\"\r\n          state: directory\r\n          owner: vagrant\r\n          group: vagrant\r\n          mode: 0755\r\n\r\n       - name: Download the NodeJS code from the GitRepo\r\n         become: yes\r\n         git:\r\n            repo: 'https:\/\/{{gittoken}}@github.com\/AKSarav\/SampleNodeApp.git'\r\n            dest: \"{{ destdir }}\"\r\n\r\n       - name: Change the ownership of the directory\r\n         become: yes\r\n         file:\r\n           path: \"{{destdir}}\"\r\n           owner: \"vagrant\"\r\n         register: chgrpout\r\n\r\n       - name: Install Dependencies with NPM install command\r\n         shell:\r\n            \"npm install\"\r\n         args:\r\n            chdir: \"{{ destdir }}\"\r\n         register: npminstlout\r\n\r\n       - name: Debug npm install command\r\n         debug: msg='{{npminstlout.stdout_lines}}'\r\n\r\n\r\n       - name: Start the App\r\n         async: 10\r\n         poll: 0\r\n         shell:\r\n            \"(node index.js &gt; nodesrv.log 2&gt;&amp;1 &amp;)\"\r\n         args:\r\n           chdir: \"{{ destdir }}\"\r\n         register: appstart\r\n\r\n       - name: Validating the port is open\r\n         tags: nodevalidate\r\n         wait_for:\r\n           host: \"localhost\"\r\n           port: 5000\r\n           delay: 10\r\n           timeout: 30\r\n           state: started\r\n           msg: \"NodeJS server is not running\"\r\n\r\n    post_tasks:\r\n        - name: notify Slack that the servers have been updated \r\n          tags: slack\r\n          community.general.slack:\r\n            token: T026******PF\/B02U*****N\/WOa7r**********Ao0jnWn\r\n            msg: |\r\n                ### StatusUpdate ###\r\n                &#8211; ------------------------------------\r\n                ``\r\n                `Server`: {{ansible_host}}\r\n                `Status`: NodeJS Sample Application installed successfully\r\n                &#8211; ------------------------------------\r\n            channel: '#ansible'\r\n            color: good\r\n            username: 'Ansible on {{ inventory_hostname }}'\r\n            link_names: 0\r\n            parse: 'none'\r\n          delegate_to: localhost<\/pre>\n<p>&nbsp;<\/p>\n<p>You can see how we are using <code>pre_tasks<\/code> and <code>post_tasks<\/code> in this playbook<\/p>\n<p>we are using <code>pre_tasks<\/code> to run a task that installs necessary components and packages like node, npm etc<\/p>\n<p>Learn more about, <a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-apt-examples\/\">how to use apt with ansible<\/a>.<\/p>\n<p>and using <code>post_tasks<\/code> to send a notification to the Slack channel upon Task completion using the ansible slack module and webhook. I will try to cover this slack integration in detail in my next article<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible.png\"><img class=\"post-img alignnone wp-image-8049 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible.png\" alt=\"ansible post_task\" width=\"1402\" height=\"422\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible.png 1402w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible-300x90.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible-1024x308.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/slack-notification-ansible-768x231.png 768w\" sizes=\"(max-width: 1402px) 100vw, 1402px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p>Here is the output of this playbook<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\" data-enlighter-theme=\"bootstrap4\">$ ansible-playbook install-nodejs-app.yaml -i hosts &#8211; ask-vault-password\r\nVault password: \r\n\r\nPLAY [Install and Launch the Simple NodeJS Application] ************************************************************************************\r\n\r\nTASK [Gathering Facts] *********************************************************************************************************************\r\nok: [testserver]\r\n\r\nTASK [install dependencies before starting] ************************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [validate the nodejs installation] ****************************************************************************************************\r\nok: [testserver] =&gt; {\r\n    \"msg\": \"Installation of node is Successfull\"\r\n}\r\n\r\nTASK [Version of Node and NPM] *************************************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [Validate if the installation is intact] **********************************************************************************************\r\nok: [testserver] =&gt; {\r\n    \"changed\": false,\r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [Create Dest Directory if not exists] *************************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [Download the NodeJS code from the GitRepo] *******************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [Change the ownership of the directory] ***********************************************************************************************\r\nok: [testserver]\r\n\r\nTASK [Install Dependencies with NPM install command] ***************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [Debug npm install command] ***********************************************************************************************************\r\nok: [testserver] =&gt; {\r\n    \"msg\": [\r\n        \"nodeproject1@1.0.0 \/apps\/sampleapp\",\r\n        \"\u251c\u2500\u252c express@4.17.2 \",\r\n        \"\u2502 \u251c\u2500\u252c accepts@1.3.7 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u252c mime-types@2.1.34 \",\r\n        \"\u2502 \u2502 \u2502 \u2514\u2500\u2500 mime-db@1.51.0 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 negotiator@0.6.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 array-flatten@1.1.1 \",\r\n        \"\u2502 \u251c\u2500\u252c body-parser@1.19.1 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u2500 bytes@3.1.1 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u252c http-errors@1.8.1 \",\r\n        \"\u2502 \u2502 \u2502 \u251c\u2500\u2500 inherits@2.0.4 \",\r\n        \"\u2502 \u2502 \u2502 \u2514\u2500\u2500 toidentifier@1.0.1 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u252c iconv-lite@0.4.24 \",\r\n        \"\u2502 \u2502 \u2502 \u2514\u2500\u2500 safer-buffer@2.1.2 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 raw-body@2.4.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 content-disposition@0.5.4 \",\r\n        \"\u2502 \u251c\u2500\u2500 content-type@1.0.4 \",\r\n        \"\u2502 \u251c\u2500\u2500 cookie@0.4.1 \",\r\n        \"\u2502 \u251c\u2500\u2500 cookie-signature@1.0.6 \",\r\n        \"\u2502 \u251c\u2500\u252c debug@2.6.9 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 ms@2.0.0 \",\r\n        \"\u2502 \u251c\u2500\u2500 depd@1.1.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 encodeurl@1.0.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 escape-html@1.0.3 \",\r\n        \"\u2502 \u251c\u2500\u2500 etag@1.8.1 \",\r\n        \"\u2502 \u251c\u2500\u252c finalhandler@1.1.2 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 unpipe@1.0.0 \",\r\n        \"\u2502 \u251c\u2500\u2500 fresh@0.5.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 merge-descriptors@1.0.1 \",\r\n        \"\u2502 \u251c\u2500\u2500 methods@1.1.2 \",\r\n        \"\u2502 \u251c\u2500\u252c on-finished@2.3.0 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 ee-first@1.1.1 \",\r\n        \"\u2502 \u251c\u2500\u2500 parseurl@1.3.3 \",\r\n        \"\u2502 \u251c\u2500\u2500 path-to-regexp@0.1.7 \",\r\n        \"\u2502 \u251c\u2500\u252c proxy-addr@2.0.7 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u2500 forwarded@0.2.0 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 ipaddr.js@1.9.1 \",\r\n        \"\u2502 \u251c\u2500\u2500 qs@6.9.6 \",\r\n        \"\u2502 \u251c\u2500\u2500 range-parser@1.2.1 \",\r\n        \"\u2502 \u251c\u2500\u2500 safe-buffer@5.2.1 \",\r\n        \"\u2502 \u251c\u2500\u252c send@0.17.2 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u2500 destroy@1.0.4 \",\r\n        \"\u2502 \u2502 \u251c\u2500\u2500 mime@1.6.0 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 ms@2.1.3 \",\r\n        \"\u2502 \u251c\u2500\u2500 serve-static@1.14.2 \",\r\n        \"\u2502 \u251c\u2500\u2500 setprototypeof@1.2.0 \",\r\n        \"\u2502 \u251c\u2500\u2500 statuses@1.5.0 \",\r\n        \"\u2502 \u251c\u2500\u252c type-is@1.6.18 \",\r\n        \"\u2502 \u2502 \u2514\u2500\u2500 media-typer@0.3.0 \",\r\n        \"\u2502 \u251c\u2500\u2500 utils-merge@1.0.1 \",\r\n        \"\u2502 \u2514\u2500\u2500 vary@1.1.2 \",\r\n        \"\u2514\u2500\u252c redis@4.0.2 \",\r\n        \"  \u251c\u2500\u2500 @node-redis\/bloom@1.0.1 \",\r\n        \"  \u251c\u2500\u252c @node-redis\/client@1.0.2 \",\r\n        \"  \u2502 \u251c\u2500\u2500 cluster-key-slot@1.1.0 \",\r\n        \"  \u2502 \u251c\u2500\u2500 generic-pool@3.8.2 \",\r\n        \"  \u2502 \u251c\u2500\u252c redis-parser@3.0.0 \",\r\n        \"  \u2502 \u2502 \u2514\u2500\u2500 redis-errors@1.2.0 \",\r\n        \"  \u2502 \u2514\u2500\u2500 yallist@4.0.0 \",\r\n        \"  \u251c\u2500\u2500 @node-redis\/json@1.0.2 \",\r\n        \"  \u251c\u2500\u2500 @node-redis\/search@1.0.2 \",\r\n        \"  \u2514\u2500\u2500 @node-redis\/time-series@1.0.1 \"\r\n    ]\r\n}\r\n\r\nTASK [Start the App] ***********************************************************************************************************************\r\nchanged: [testserver]\r\n\r\nTASK [Validating the port is open] *********************************************************************************************************\r\nok: [testserver]\r\n\r\nTASK [notify Slack that the servers have been updated] *************************************************************************************\r\nok: [testserver -&gt; localhost]\r\n\r\nPLAY RECAP *********************************************************************************************************************************\r\ntestserver                 : ok=13   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0<\/pre>\n<p>&nbsp;<\/p>\n<h2>Conclusion<\/h2>\n<p>In this article, we have learnt what is ansible pre tasks and ansible post tasks and how to use them.<\/p>\n<p>As a summary, we learnt <code>pre_tasks<\/code> is to execute some tasks prior\/before executing the actual play or tasks. there can be many tasks under <code>pre_tasks<\/code><\/p>\n<p>Likewise, ansible <code>post_tasks<\/code> is to execute some tasks post\/after the successful completion of the actual play or tasks. Like sending emails and slack notifications etc.<\/p>\n<p>We have also learned how to send slack notifications using ansible post_task in this article along with a few more tricks like<\/p>\n<ul>\n<li>Ansible Assertion<\/li>\n<li><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-git-example\/\">Ansible Git<\/a><\/li>\n<li><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-wait_for-examples\/\">How to use ansible wait_for<\/a><\/li>\n<li><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-apt-examples\/\">how to install packages with Ansible apt<\/a><\/li>\n<li><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-shell-examples\/\">Ansible Shell<\/a>.<\/li>\n<li>How to use Ansible Vault and secrets in the playbook<\/li>\n<\/ul>\n<p>We have around 50+ articles dedicatedly for each of these modules. in DevopsJunction.<\/p>\n<p>Please refer to the following article and make use of it.<\/p>\n<blockquote class=\"wp-embedded-content\" data-secret=\"bBgfQnsMUO\"><p><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\">Ansible Playbook Examples &#8211; Sample Ansible Playbooks | Devops Junction<\/a><\/p><\/blockquote>\n<p><iframe class=\"wp-embedded-content\" sandbox=\"allow-scripts\" security=\"restricted\" style=\"position: absolute; clip: rect(1px, 1px, 1px, 1px);\" title=\"&#8220;Ansible Playbook Examples &#8211; Sample Ansible Playbooks | Devops Junction&#8221; &#8212; Middleware Inventory\" src=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/embed\/#?secret=bBgfQnsMUO\" data-secret=\"bBgfQnsMUO\" width=\"600\" height=\"338\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\"><\/iframe><\/p>\n<p>&nbsp;<\/p>\n<p>Cheers<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670576916\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"6982\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670576916\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670576916\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>In this article, we are going to see how to use ansible pre tasks and post tasks with examples. What is Ansible pre_tasks? Ansible pretask is a conditional execution block that runs before running the play. It can be a task with some prerequisites check (or) validation Some examples we[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":8054,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[98],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ansible Pre Tasks and Post Tasks Example | Devops Junction<\/title>\n<meta name=\"description\" content=\"Ansible pre_tasks and ansible post_tasks examples. How to use ansible pre tasks and ansible post tasks in Playbook. How to send Ansible Slack Notification.\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ansible Pre Tasks and Post Tasks Example | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"Ansible pre_tasks and ansible post_tasks examples. How to use ansible pre tasks and ansible post tasks in Playbook. How to send Ansible Slack Notification.\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2022-01-19T06:17:52+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-01-19T13:26:36+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"1748\" \/>\n\t<meta property=\"og:image:height\" content=\"1240\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2022\/01\/ansible_pre_tasks.jpg\",\"width\":1748,\"height\":1240,\"caption\":\"ansible pre tasks\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\",\"name\":\"Ansible Pre Tasks and Post Tasks Example | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#primaryimage\"},\"datePublished\":\"2022-01-19T06:17:52+00:00\",\"dateModified\":\"2022-01-19T13:26:36+00:00\",\"description\":\"Ansible pre_tasks and ansible post_tasks examples. How to use ansible pre tasks and ansible post tasks in Playbook. How to send Ansible Slack Notification.\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Ansible Pre Tasks and Post Tasks Example | Devops Junction\",\"datePublished\":\"2022-01-19T06:17:52+00:00\",\"dateModified\":\"2022-01-19T13:26:36+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#primaryimage\"},\"articleSection\":\"Ansible\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6982"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=6982"}],"version-history":[{"count":5,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6982\/revisions"}],"predecessor-version":[{"id":8068,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6982\/revisions\/8068"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/8054"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=6982"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=6982"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=6982"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
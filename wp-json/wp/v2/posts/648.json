{"id":648,"date":"2017-12-14T06:34:10","date_gmt":"2017-12-14T01:04:10","guid":{"rendered":"http:\/\/www.mwinventory.in\/?p=648"},"modified":"2018-07-31T01:54:50","modified_gmt":"2018-07-30T20:24:50","slug":"client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/","title":{"rendered":"Client IP Logging in IIS\/Apache &#8211; Story of X-Forwarded-For Header"},"content":{"rendered":"<p id=\"MDBNmBS\"><style>\r\nli\r\n{\r\nmargin-bottom: 10px;\r\n}\r\n<\/style><\/p>\n<p>We all at some point wanted to know who is accessing our web page.<\/p>\n<p>Our Source of information is the access log file. Sometimes we do not get what we expect to.<\/p>\n<p>In case if we want to know the exact client&#8217;s IP.\u00a0 Sometimes All you get is some network\/firewall endpoint IP address which is none of your concern.<\/p>\n<p>So how to get your exact client IP address in your web server log file.<\/p>\n<p>Before discussing that part. We have to set a stage first, an infrastructure setup which we could relate and understand.\u00a0The objective of this post will only be met if we are on the same page.<\/p>\n<p>&nbsp;<\/p>\n<h5><strong>Let&#8217;s consider a scenario like this.\u00a0<\/strong><\/h5>\n<ul>\n<li style=\"text-align: left;\">A user named &#8220;Tony Stark&#8221; { I like him :)} is launching the URL <strong>www.mwinventory.in<\/strong> from his home in his favorite browser.<\/li>\n<li style=\"text-align: left;\">After all the DNS resolution story, It gets the IP of the domain name mwinventory.in as 166.62.30.153<\/li>\n<li style=\"text-align: left;\">This must be a <strong>Public IP address<\/strong>, Generally denoted or pointing to some internal virtual IP\u00a0 of\u00a0the company\u00a0\u00a0mwinventory VIP [<em>Virtual IP is an IP created\/used in Load Balancer (Bigip, F5, Squid) to receive the global request before\u00a0applying\u00a0any load balancing (or) IP spraying (or) internal re-routing strategies<\/em>.]<\/li>\n<li style=\"text-align: left;\">These VIPs will forward the requests to the actual web server IP\u00a0address (or) to a group of web server organized\u00a0and denoted in the name of <b>pool<\/b><\/li>\n<li style=\"text-align: left;\">When the HTTP request reaches the Load balancer, it continues the journey through the load balancing rules and find its way to the web server using\u00a0 <b>server_pool<\/b> or an <b>Irule <\/b>[<em>Rules, written for routing, A kind of algorithm<\/em>]<\/li>\n<li style=\"text-align: left;\">After reaching the web server based on the technology this site is using it will either go to the\u00a0application server (or) will be processed at the web server itself. i.e LAMP\/WAMP [PHP\/CGI] websites<\/li>\n<li style=\"text-align: left;\">In case of java based web application, HTTP request will proceed further to application server with the help of application server proxies\/plugins like [mod_proxy\/mod_jk\/WebLogic Proxy Plugin\/Websphere Proxy Plugin]<\/li>\n<\/ul>\n<div>In this long voyage,\u00a0 Tony Stark&#8217;s actual IP address would get lost or gets replaced by the IP address of any edge components like load balancer (or) firewall<\/div>\n<p>&nbsp;<\/p>\n<div>So finally, on the web server what we get is not the IP address of Tony Stark. ( Not even Hulk \ud83d\ude42 ) it is some edge component&#8217;s IP. We do not need that.<\/div>\n<p>&nbsp;<\/p>\n<p><iframe class=\"giphy-embed\" src=\"https:\/\/giphy.com\/embed\/RWCetJu76wAsE\" width=\"480\" height=\"240\" frameborder=\"0\" allowfullscreen=\"allowfullscreen\"><\/iframe><\/p>\n<div>So how to handle it?<\/div>\n<p>&nbsp;<\/p>\n<div>Here comes the header, which is going to help us\u00a0on this mysterious journey of HTTP request<\/div>\n<p>&nbsp;<\/p>\n<h5><strong>What is X-Forwarded-For<\/strong><\/h5>\n<p>The\u00a0<b>X-Forwarded-For<\/b>\u00a0(<b>XFF<\/b>)\u00a0<a title=\"List of HTTP header fields\" href=\"https:\/\/en.wikipedia.org\/wiki\/List_of_HTTP_header_fields\">HTTP header field<\/a>\u00a0is a common method for identifying the originating\u00a0<a title=\"IP address\" href=\"https:\/\/en.wikipedia.org\/wiki\/IP_address\">IP address<\/a>\u00a0of a client connecting to a\u00a0<a title=\"Web server\" href=\"https:\/\/en.wikipedia.org\/wiki\/Web_server\">web server<\/a>\u00a0through an\u00a0<a class=\"mw-redirect\" title=\"HTTP\" href=\"https:\/\/en.wikipedia.org\/wiki\/HTTP\">HTTP<\/a>\u00a0<a title=\"Proxy server\" href=\"https:\/\/en.wikipedia.org\/wiki\/Proxy_server\">proxy<\/a>\u00a0or\u00a0<a class=\"mw-redirect\" title=\"Load balancer\" href=\"https:\/\/en.wikipedia.org\/wiki\/Load_balancer\">load balancer<\/a>.<\/p>\n<p>So let us start with, how to enable X-Forwarding in the Load Balancer<\/p>\n<p>I am taking Big-IP Load balancer for this article.<\/p>\n<h5><strong>How to enable XFF in BigIP<\/strong><\/h5>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">To configure the BIG-IP system to insert the original client IP address in an\u00a0<span style=\"font-weight: bold;\">X-Forwarded-For<\/span>\u00a0HTTP header, perform the following procedure:<\/p>\n<ol style=\"margin-top: 0px; margin-bottom: 10px; clear: both; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">\n<li>Log in to the Configuration utility.<\/li>\n<li>Navigate to\u00a0<span style=\"font-weight: bold;\">Local Traffic<\/span>\u00a0&gt;\u00a0<span style=\"font-weight: bold;\">Profiles<\/span>.<\/li>\n<li>From the\u00a0<span style=\"font-weight: bold;\">Services<\/span>\u00a0menu, click\u00a0<span style=\"font-weight: bold;\">HTTP<\/span>.<\/li>\n<li>Click\u00a0<span style=\"font-weight: bold;\">Create<\/span>.<\/li>\n<li>Type a name for the HTTP profile.<\/li>\n<li>Select the\u00a0<span style=\"font-weight: bold;\">Insert X-Forwarded-For<\/span>\u00a0check box.\n<p style=\"margin: 0px 0px 10px;\"><span class=\"note\" style=\"padding: 6px 0px; font-style: italic; color: #078a85;\"><span style=\"font-weight: bold;\">Note<\/span>: Older versions of BIG-IP software may display the option as\u00a0<span style=\"font-weight: bold;\">Insert XForwarded For\u00a0<\/span>instead of\u00a0<span style=\"font-weight: bold;\">Insert X-Forwarded-For<\/span>.<\/span><\/p>\n<\/li>\n<li>From the\u00a0<span style=\"font-weight: bold;\">Insert X-Forwarded-For\u00a0<\/span>menu, select\u00a0<span style=\"font-weight: bold;\">Enabled<\/span>.<\/li>\n<li>Click\u00a0<span style=\"font-weight: bold;\">Finished<\/span>.\n<p style=\"margin: 0px 0px 10px;\">You must now associate the new HTTP profile with the virtual server\/VIP<\/p>\n<\/li>\n<\/ol>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\"><span class=\"subsectiontitle\" style=\"font-weight: bold; margin: 20px 0px 0px;\">Using an iRule to insert the original client IP address in an X-Forwarded-For HTTP header<\/span><\/p>\n<ol style=\"margin-top: 0px; margin-bottom: 10px; clear: both; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">\n<li>Log in to the Configuration utility.<\/li>\n<li>Navigate to\u00a0<span style=\"font-weight: bold;\">Local Traffic<\/span>\u00a0&gt;\u00a0<span style=\"font-weight: bold;\">iRules<\/span>\u00a0&gt;\u00a0<span style=\"font-weight: bold;\">Create<\/span>.<\/li>\n<li>In the\u00a0<span style=\"font-weight: bold;\">Name<\/span>\u00a0box, type a name.<\/li>\n<li>In the\u00a0<span style=\"font-weight: bold;\">Definition<\/span>\u00a0box, copy and paste the following iRule:\n<p class=\"code\" style=\"margin: 0px 0px 10px; padding: 2px 4px; color: #000000; background-color: #ebebeb; border-radius: 4px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\"><span class=\"example2\" style=\"padding: 2px 0px; border: 0px;\">when HTTP_REQUEST {<br style=\"box-sizing: border-box;\" \/>HTTP::header insert X-Forwarded-For [IP::remote_addr]<br style=\"box-sizing: border-box;\" \/>}<\/span><\/p>\n<\/li>\n<li>Click\u00a0<span style=\"font-weight: bold;\">Finished<\/span>.\n<p style=\"margin: 0px 0px 10px;\">You must now associate the new iRule with the virtual server\/VIP<\/p>\n<\/li>\n<\/ol>\n<h5 style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\"><strong>Configuring the web server to extract the IP address from the HTTP header<\/strong><\/h5>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">After you have configured the BIG-IP system to insert the original client IP address in an HTTP header using an\u00a0<span style=\"font-weight: bold;\">X-Forwarded-For<\/span>\u00a0HTTP header, you must also configure the web server to extract the IP address from the HTTP header, and then log the IP address to the web server log file.<\/p>\n<h5 style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\"><span class=\"subsectiontitle\" style=\"font-weight: bold; margin: 20px 0px 0px;\">Apache web server<\/span><\/h5>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">You can configure an Apache web server to extract the IP address from the\u00a0<span style=\"font-weight: bold;\">X-Forwarded-For<\/span>\u00a0HTTP header and log that IP address to the web server log file by adding the appropriate logging directives to the main Apache configuration file (typically named\u00a0<span style=\"font-weight: bold;\">httpd.conf<\/span>) or to the relevant virtual host configuration files.<\/p>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">For example:<\/p>\n<p class=\"example2\" style=\"margin: 0px 0px 10px; padding: 2px 0px; font-size: 14px; color: #000000; background-color: #ffffff; border: 0px; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\">LogFormat &#8220;%v %{<strong>X-Forwarded-For<\/strong>}i %l %u %t \\&#8221;%r\\&#8221; %&gt;s %b&#8221; X-Forwarded-For<br style=\"box-sizing: border-box;\" \/>CustomLog \/var\/log\/apache\/www.example.com-xforwarded.log X-Forwarded-For<\/p>\n<h5 style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\"><strong>IIS web server<\/strong><\/h5>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">Unlike Apache Web server, to make IIS web server to extract the IP address from the X-Forwarded-For HTTP Header and log that IP address to the log file, we need to perform list of configuration changes in the site.<\/p>\n<h6 style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\"><strong>For IIS 7<\/strong><\/h6>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">Open IIS manager by\u00a0the run command <strong>inetmgr\u00a0<\/strong>(or) using control panel.<\/p>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">To enable XFF logging you must have a <strong>Advanced Logging<\/strong> feature enabled<\/p>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">In general &#8220;Advanced Logging&#8221; does not come as built in with IIS 7, you must install as an add-on<\/p>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">From here you can download the same\u00a0<a href=\"https:\/\/www.microsoft.com\/en-us\/download\/confirmation.aspx?id=7211\">https:\/\/www.microsoft.com\/en-us\/download\/confirmation.aspx?id=7211<\/a><\/p>\n<p style=\"margin: 0px 0px 10px; color: #333333; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; background-color: #ffffff;\">You will get a installation binary with \u00a0a name \u00a0<strong>AdvancedLogging.msi\u00a0<\/strong>double click on the package to install it on the server<\/p>\n<p id=\"cfYsRVE\"><img width=\"499\" height=\"385\" class=\"alignnone size-full wp-image-663 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c4e7b0335.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c4e7b0335.png 499w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c4e7b0335-300x231.png 300w\" sizes=\"(max-width: 499px) 100vw, 499px\" \/><\/p>\n<p>After installing the Advanced Logging plugin, close and re-open the iis manager and click on the server node<\/p>\n<p>You will be able to see an Icon named Advanced Logging under the IIS grouping on the center\u00a0panel<\/p>\n<p id=\"jECqLBR\">Double click on Advanced Logging\u00a0Icon<\/p>\n<p id=\"yZMtdmR\"><img width=\"1215\" height=\"353\" class=\"alignnone size-full wp-image-657 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c1bf1a032.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c1bf1a032.png 1215w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c1bf1a032-300x87.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c1bf1a032-768x223.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c1bf1a032-1024x298.png 1024w\" sizes=\"(max-width: 1215px) 100vw, 1215px\" \/><\/p>\n<p>you will get screen like this, you must enable it by clicking &#8220;<strong>Enable Advanced Logging<\/strong>&#8221; option on the right panel<\/p>\n<p>After enabling the Advanced Logging<\/p>\n<p>Expand the Server Node\u00a0\u00a0-&gt; Click on Sites -&gt; \u00a0Click on your corresponding Site name<\/p>\n<p>Here my website name is &#8220;WebServices&#8221; , click to select it<\/p>\n<p><a href=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c09d5eb4f.png\"><img class=\"alignnone size-full wp-image-656\" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c09d5eb4f.png\" alt=\"img_5a31c09d5eb4f\" width=\"1005\" height=\"476\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c09d5eb4f.png 1005w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c09d5eb4f-300x142.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c09d5eb4f-768x364.png 768w\" sizes=\"(max-width: 1005px) 100vw, 1005px\" \/><\/a><\/p>\n<p>Double click on Advanced Logging\u00a0Icon available on the\u00a0center panel.<\/p>\n<p>on the right panel click on &#8220;<strong>Edit Logging Fields<\/strong>&#8221; \u00a0link \u00a0to add\u00a0a new logging field<\/p>\n<p>You will get screen like below<\/p>\n<p id=\"RsGdhrj\"><img width=\"549\" height=\"424\" class=\"alignnone size-full wp-image-658 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c2b5c95fe.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c2b5c95fe.png 549w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c2b5c95fe-300x232.png 300w\" sizes=\"(max-width: 549px) 100vw, 549px\" \/><\/p>\n<p>Now click on <strong>Add Field \u00a0<\/strong>and fill the values as shown in the below Screen snap<\/p>\n<p id=\"tUFYOhx\"><img width=\"1008\" height=\"597\" class=\"alignnone size-full wp-image-659 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c2efab5ff.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c2efab5ff.png 1008w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c2efab5ff-300x178.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c2efab5ff-768x455.png 768w\" sizes=\"(max-width: 1008px) 100vw, 1008px\" \/><\/p>\n<p>Now hit <strong>OK\u00a0<\/strong><\/p>\n<p>From the Actions pane on the right, click\u00a0<strong>Add Log Definition.<\/strong><\/p>\n<p id=\"DtGTZYd\"><img width=\"580\" height=\"439\" class=\"alignnone size-full wp-image-665 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c9b07add9.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c9b07add9.png 580w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c9b07add9-300x227.png 300w\" sizes=\"(max-width: 580px) 100vw, 580px\" \/><\/p>\n<p>Enter &#8220;Client Source IP&#8221; in the\u00a0<strong>Base file name<\/strong>\u00a0field.<\/p>\n<p id=\"bFvNklR\"><img width=\"584\" height=\"674\" class=\"alignnone size-full wp-image-666 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c9f8865d7.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c9f8865d7.png 584w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31c9f8865d7-260x300.png 260w\" sizes=\"(max-width: 584px) 100vw, 584px\" \/><\/p>\n<p>Click <strong>Select Fields\u00a0<\/strong>and select the Logging Field we have added in the previous section &#8220;<strong>Client Source IP<\/strong>&#8221;<\/p>\n<p>&nbsp;<\/p>\n<p id=\"zosCQkG\"><img width=\"546\" height=\"388\" class=\"alignnone size-full wp-image-667 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31cada34363.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31cada34363.png 546w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31cada34363-300x213.png 300w\" sizes=\"(max-width: 546px) 100vw, 546px\" \/><\/p>\n<p>Click\u00a0<em>OK<\/em>\u00a0on the Select Logging Fields form, then click\u00a0<em>Apply<\/em>\u00a0in the actions pane.<\/p>\n<p>Restart the corresponding website<\/p>\n<p>The advanced log must be viewed rather than the default log. The advanced log is located in <strong>%SystemDrive%inetpublogsAdvancedLogs.<\/strong> To view the logs, right-click the Client Source IP log definition and click\u00a0<strong>View Log Files<\/strong>.<\/p>\n<p id=\"ytXkRRk\"><img width=\"578\" height=\"383\" class=\"alignnone size-full wp-image-668 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31cb67d95d1.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31cb67d95d1.png 578w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31cb67d95d1-300x199.png 300w\" sizes=\"(max-width: 578px) 100vw, 578px\" \/><\/p>\n<h6><script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script><\/h6>\n<h6><strong>For IIS8<\/strong><\/h6>\n<p>In IIS8 this is much simpler to enable XFF and to capture XFF in the log<\/p>\n<ol>\n<li>Select your website and click on it<\/li>\n<li>Click the Logging Icon in the center panel<\/li>\n<li>In the <strong>Log File<\/strong> Grouping click on <strong><strong>Select Fields<\/strong><\/strong>\n<p id=\"xjnAayY\"><img width=\"572\" height=\"85\" class=\"alignnone size-full wp-image-675 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31d04216779.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31d04216779.png 572w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31d04216779-300x45.png 300w\" sizes=\"(max-width: 572px) 100vw, 572px\" \/><\/p>\n<\/li>\n<li>Click on <strong>Add Field<\/strong> and add a new Field as shown in the following snap\n<p id=\"ilSVSkI\"><img width=\"598\" height=\"589\" class=\"alignnone size-full wp-image-677 \" src=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31d13702e1b.png\" alt=\"\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31d13702e1b.png 598w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2017\/12\/img_5a31d13702e1b-300x295.png 300w\" sizes=\"(max-width: 598px) 100vw, 598px\" \/><\/p>\n<\/li>\n<li>Click OK and return to previous page and restart the corresponding website<\/li>\n<\/ol>\n<p>That&#8217;s it, you will be able to see the XFF information in the current log file of your website.<\/p>\n<p>&nbsp;<\/p>\n<p>Hope this post is helpful. Please comment and let me know your feedback<\/p>\n<p>For more contents like this, Please follow us in facebook by liking our page <a href=\"http:\/\/www.facebook.com\/middlewareinventory\">http:\/\/www.facebook.com\/middlewareinventory<\/a><\/p>\n<p>Thanks<\/p>\n<p>A K SARAV<\/p>\n","protected":false},"excerpt":{"rendered":"<p>We all at some point wanted to know who is accessing our web page. Our Source of information is the access log file. Sometimes we do not get what we expect to. In case if we want to know the exact client&#8217;s IP.\u00a0 Sometimes All you get is some network\/firewall[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[10,9],"tags":[53,52,51,54],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Client IP Logging in IIS\/Apache - Story of X-Forwarded-For Header<\/title>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Client IP Logging in IIS\/Apache - Story of X-Forwarded-For Header\" \/>\n<meta property=\"og:description\" content=\"We all at some point wanted to know who is accessing our web page. Our Source of information is the access log file. Sometimes we do not get what we expect to. In case if we want to know the exact client&#8217;s IP.\u00a0 Sometimes All you get is some network\/firewall[...]\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2017-12-14T01:04:10+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2018-07-30T20:24:50+00:00\" \/>\n<meta property=\"og:image\" content=\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c4e7b0335.png\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"http:\/\/www.mwinventory.in\/wp-content\/uploads\/2017\/12\/img_5a31c4e7b0335.png\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/\",\"name\":\"Client IP Logging in IIS\/Apache - Story of X-Forwarded-For Header\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#primaryimage\"},\"datePublished\":\"2017-12-14T01:04:10+00:00\",\"dateModified\":\"2018-07-30T20:24:50+00:00\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Client IP Logging in IIS\/Apache &#8211; Story of X-Forwarded-For Header\",\"datePublished\":\"2017-12-14T01:04:10+00:00\",\"dateModified\":\"2018-07-30T20:24:50+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#webpage\"},\"commentCount\":1,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#primaryimage\"},\"keywords\":\"Client IP Logging in IIS\/Apache - Story of X-Forwarded-For Heder,How to Enable to X-Forwarded-For logging in Bigip,How to Enable X-Forwarded-For loggin in IIS,XFF header in webserver\",\"articleSection\":\"Apache,Webserver\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/client-ip-logging-in-iisapache-story-of-x-forwarded-for-heder\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/648"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=648"}],"version-history":[{"count":19,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/648\/revisions"}],"predecessor-version":[{"id":673,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/648\/revisions\/673"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=648"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=648"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=648"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
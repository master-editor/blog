{"id":2887,"date":"2019-07-20T16:56:00","date_gmt":"2019-07-20T11:26:00","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=2887"},"modified":"2022-12-07T23:34:32","modified_gmt":"2022-12-07T18:04:32","slug":"ansible-playbook-example","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/","title":{"rendered":"Ansible Playbook Examples &#8211; Sample Ansible Playbooks | Devops Junction"},"content":{"rendered":"<p>In this post, we are going to see examples of Ansible playbook and various different modules and playbook examples with various modules and multiple hosts. We will start with a basic Ansible playbook and learn what is task and play and what is playbook etc.<\/p>\n<h2>What is Ansible Playbook<\/h2>\n<p>It is a metaphor representing the configuration files of Ansible.\u00a0 It contains a list of tasks\u00a0 (plays) in an order they should get executed against a set of hosts or a single host based on the configuration specified.\u00a0 Playbooks are written in YAML, in an easy human-readable syntax<\/p>\n<blockquote><p>You can consider <strong>ansible ad-hoc commands as shell commands<\/strong> and a <strong>playbook as a shell script.\u00a0<\/strong><\/p><\/blockquote>\n<p>In this Shell script analogy, many shell commands put together in the form of shell script to perform a set of tasks and they also give us benefits like conditional statements, loops, functions etc.<\/p>\n<p>Likewise, Ansible Playbooks are a group of ad-hoc commands with additional programming elements like loops, iterations, conditionals etc.<\/p>\n<p>Before writing a Playbook It is recommended that you have given a glance on the Ansible AD HOC Command how it works and how to execute them. You can <a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-ad-hoc-command-examples-cheat-sheet\/\">read about Ansible AD HOC Command here<\/a><\/p>\n<p>Simply put,\u00a0If Ansible modules are the tools in your workshop, playbooks are your instruction manuals, and your inventory of hosts are your raw material.<\/p>\n<p>If ansible ad hoc is suitable for quick and single task (or) Purpose,\u00a0 ansible playbooks are ideal for projects and automation.<\/p>\n<p>In a single playbook, you can see multiple modules and handlers are organized. In other words, this is called as Orchestration.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM.png\"><img class=\"alignnone size-full wp-image-2787\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM.png\" alt=\"\" width=\"790\" height=\"580\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM.png 790w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM-300x220.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM-768x564.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/01\/Screen-Shot-2019-01-16-at-4.23.23-AM-90x65.png 90w\" sizes=\"(max-width: 790px) 100vw, 790px\" \/><\/a><\/p>\n<p>As an example. <strong>Let us consider you want to install an Apache Web server<\/strong> against multiple hosts. The following playbook would get it done for you.<\/p>\n<p>&nbsp;<\/p>\n<h2>Ansible Playbook Example<\/h2>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">  - name:<\/span> Playbook\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    hosts:<\/span> webservers\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become:<\/span> yes\r\n    <span class=\"hljs-attr\" style=\"color: #6d9cbe;\">become_user:<\/span> root\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is at the latest version\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        yum:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> latest\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is running\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> started<\/pre>\n<p>this simple ansible-playbook example given above is enough to get your Apache installation done and ready. I sense your anger that I just gave a plain text with no explanation of what do they do.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM.png\"><img class=\"alignnone size-full wp-image-5568\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM.png\" alt=\"\" width=\"1538\" height=\"674\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM.png 1538w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM-300x131.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM-768x337.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2020-07-15-at-1.47.21-PM-1024x449.png 1024w\" sizes=\"(max-width: 1538px) 100vw, 1538px\" \/><\/a><\/p>\n<p>Well, I have explained what each line does<\/p>\n<p><code>name<\/code> Name of the playbook<\/p>\n<p><code>hosts<\/code> A set of hosts usually grouped together as a host group and defined in inventory file<\/p>\n<p><code>become<\/code> To tell ansible this play has to be executed with elevated privileges<\/p>\n<p><code>become_user<\/code> the user name that we want to switch to like compare it with <code>sudo su - user<\/code><\/p>\n<p><code>tasks<\/code> set of tasks to execute, All tasks would be defined below this<\/p>\n<p>and then we have two tasks with two modules, the first module is <code>yum<\/code> and the second module is <code>service<\/code><\/p>\n<p><strong>in the first task<\/strong> with yum\u00a0 the state <code>latest<\/code> represents that the forementioned package <code>httpd<\/code> should be installed if it is not installed (or) if it is already installed it should be upgraded to the latest version available. If you do not want it to be upgraded if present, You can change it to <code>state: present<\/code><\/p>\n<p><strong>On the Second task<\/strong> with service module, we are making sure that the service named <code>httpd<\/code> is started and running using the <code>state: started<\/code> Ansible would not restart the service if it is already started and running.<\/p>\n<p>&nbsp;<\/p>\n<h2>Ansible Play vs Ansible Playbook?<\/h2>\n<p>To understand the ansible-playbook you have to understand the Ansible Adhoc commands.<\/p>\n<div class=\"page\" title=\"Page 78\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Ad hoc commands can run a single, simple task against a set of targeted hosts as a one-time command. The real power of Ansible, however, is in learning how to use playbooks to run multiple, complex tasks against a set of targeted hosts in an easily repeatable manner.<\/p>\n<p>Here is something to take away<\/p>\n<blockquote><p><strong>A play<\/strong> is an ordered set of tasks which should be run against hosts selected from your inventory.<\/p>\n<p><strong>A playbook<\/strong> is a text file that contains a list of one or more plays to run in order.<\/p><\/blockquote>\n<\/div>\n<\/div>\n<\/div>\n<p>In the previously given example, you can see we are running all the tasks against a single host group named <code>webservers<\/code>\u00a0 this is called <strong>A PLAY<\/strong>.<\/p>\n<p>If I want to run a different set of tasks against different host group. All you need to do is add one more PLAY.<\/p>\n<p>Remember: A Playbook can have many plays destined to run against a different set of host groups<\/p>\n<p>Every Play must contain<\/p>\n<div class=\"page\" title=\"Page 53\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>A set of hosts to configure<\/li>\n<li>A list of tasks to be executed on those hosts<\/li>\n<\/ul>\n<p>Think of a play as a wire that connects hosts to tasks.<\/p>\n<\/div>\n<\/div>\n<\/div>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>&nbsp;<\/p>\n<h2>Example Ansible Playbook with multiple hosts and multiple plays.<\/h2>\n<p>Here is the ansible playbook with multiple hosts in it.\u00a0 You can see we are working with web and application servers in the same playbook and executing two different plays (set of tasks) respectively.<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">---\r\n<\/span><span style=\"color: #ffff00;\">  # Play1 - WebServer related tasks<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">  - name:<\/span> Play Web - Create apache directories and username in web servers\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    hosts:<\/span> webservers\r\n    <span class=\"hljs-attr\" style=\"color: #6d9cbe;\">become:<\/span> yes\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become_user:<\/span> root\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> create username apacheadm\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        user:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> apacheadm\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          group:<\/span> users,admin\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          shell:<\/span> \/bin\/bash\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          home:<\/span> \/home\/weblogic\r\n\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> install httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        yum:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> installed\r\n        \r\n<span style=\"color: #ffff00;\">  # Play2 - Application Server related tasks<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">  - name:<\/span> Play app - Create tomcat directories and username in app servers\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    hosts:<\/span> appservers\r\n    <span class=\"hljs-attr\" style=\"color: #6d9cbe;\">become:<\/span> yes\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become_user:<\/span> root\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> Create a username for tomcat\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        user:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> tomcatadm\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          group:<\/span> users\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          shell:<\/span> \/bin\/bash\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          home:<\/span> \/home\/tomcat\r\n\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> create a directory for apache tomcat\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        file:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          path:<\/span> \/opt\/oracle\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          owner:<\/span> tomcatadm\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          group:<\/span> users\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> present\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          mode:<\/span> <span class=\"hljs-number\" style=\"color: #a5c261;\">0755<\/span><\/pre>\n<p>In the preceding playbook, you could notice that two plays are there and both of them targeted to different host groups.<\/p>\n<p>&nbsp;<\/p>\n<h2>How to Execute an Ansible Playbook<\/h2>\n<p>Ansible playbook can be executed with <code>ansible-playbook<\/code> command. like you have <code>ansible<\/code> command to execute ad hoc command. This is dedicated for ansible playbooks<\/p>\n<p>Let us see how to execute the preceding playbook and install apache on the <code>webservers<\/code> host group<\/p>\n<p>Note*: a host group is a group of hosts and servers mentioned in the ansible inventory file.<\/p>\n<pre id=\"custompre\">\u279c  Ansible-Examples git:(master) \u2717 cat ansible_hosts\r\n[webservers]\r\nmwivmweb01\r\nmwivmweb02\r\n<\/pre>\n<p>Here is the customized Ansible inventory file with two hosts grouped as\u00a0<code>webservers<\/code><\/p>\n<p>Here the host group name is <code>webservers<\/code> and it is mentioned in the <code>hosts:<\/code> directive on the playbook<\/p>\n<p>Given below is the command syntax or sample to run an ansible playbook.<\/p>\n<pre id=\"custompre\">\u279c ansible-playbook sampleplaybook.yml -i ansible_hosts<\/pre>\n<p>If you have mentioned all the host groups in your default inventory file\u00a0<code>\/etc\/ansible\/hosts<\/code>\u00a0 then you do not have use <code>-i<\/code> argument.\u00a0 this is only when you have a customized inventory file like I do.<\/p>\n<p><a href=\"https:\/\/youtu.be\/5SAIS2cAVKA\">See this video log<\/a> for further information on how to execute the playbook in real-time.<\/p>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h2>How to Dry Run the playbook without making Actual Changes<\/h2>\n<p>you can actually run the playbook with Dry Run feature to see what changes would be made to the server without having to perform the actual changes.<\/p>\n<p>to do that. you just have to add <code>-C<\/code> to your ansible-playbook startup command<\/p>\n<pre id=\"custompre\">\u279c ansible-playbook -C sampleplaybook.yml -i ansible_hosts<\/pre>\n<p>&nbsp;<\/p>\n<h2>How to Perform a Syntax Check on the Playbook<\/h2>\n<p>If you quickly want to verify if everything is ok with the playbook. You can perform a Syntax check.<\/p>\n<p>Here is the ansible command line example on how to perform Syntax check on ansible playbook. Refer the video for the practical idea.<\/p>\n<pre id=\"custompre\">\u279c ansible-playbook &#8211; syntax-check sampleplaybook.yml -i ansible_hosts<\/pre>\n<p>&nbsp;<\/p>\n<h2>How to use Variables in Ansible Playbook<\/h2>\n<p>Ansible playbook supports defining the variable in two forms, Either as a separate file with full of variables and values like a properties file. or a Single liner variable declaration like we do in any common programming languages<\/p>\n<p><code>vars<\/code> to define inline variables within the playbook<\/p>\n<p><code>vars_files<\/code> to import files with variables<\/p>\n<p>Let&#8217;s suppose we want to add a few variables for our webserver like the server name and SSL key file and cert file etc.<\/p>\n<p>it can be done with <code>vars<\/code> like this<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">  - name:<\/span> Playbook\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    hosts:<\/span> webservers\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become:<\/span> <span class=\"hljs-literal\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become_user:<\/span> root\r\n<span style=\"color: #ffff99;\"><span class=\"hljs-attr\">    vars:<\/span>\r\n<span class=\"hljs-attr\">       key_file:<\/span>  \/etc\/apache2\/ssl\/mywebsite.key\r\n<span class=\"hljs-attr\">       cert_file:<\/span> \/etc\/apache2\/ssl\/mywebsite.cert\r\n<span class=\"hljs-attr\">       server_name:<\/span> www.mywebsite.com<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is at the latest version\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        yum:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> latest\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">### SOME MORE TASKS WOULD COME HERE ###<\/span>\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># you can refer the variable you have defined earlier like this #<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #ffff99; font-style: italic;\">      # \"{{key_file}}\"  (or) \"{{cert_file}}\" (or) \"{{server_name}}\" #<\/span>\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">##<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is running\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> started<\/pre>\n<p>and the variables can be referred with the jinja2 template later<code>\"{{ variable name }}\"<\/code><\/p>\n<p>If you want to keep the variables in a separate file and import it with <code>vars_files<\/code><\/p>\n<p>You have to first save the variables and values in the same format you have written in the playbook and the file can later be imported using vars_files like this<\/p>\n<pre class=\"hljs\" style=\"display: block; overflow-x: auto; padding: 0.5em; background: #232323 none repeat scroll 0% 0%; color: #e6e1dc;\"><span class=\"hljs-meta\" style=\"color: #9b859d;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">  - name:<\/span> Playbook\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    hosts:<\/span> webservers\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become:<\/span> <span class=\"hljs-literal\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    become_user:<\/span> root\r\n<span style=\"color: #ffff99;\"><span class=\"hljs-attr\">    vars_files:<\/span>\r\n<span class=\"hljs-bullet\">        -<\/span> apacheconf.yml<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">    tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is at the latest version\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        yum:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> latest\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">### SOME MORE TASKS WOULD COME HERE ###<\/span>\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\"># you can refer the variable you have defined earlier like this #<\/span>\r\n<span class=\"hljs-comment\" style=\"color: #ffff99; font-style: italic;\">      # \"{{key_file}}\"  (or) \"{{cert_file}}\" (or) \"{{server_name}}\" #<\/span>\r\n      <span class=\"hljs-comment\" style=\"color: #bc9458; font-style: italic;\">##<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">      - name:<\/span> ensure apache is running\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">        service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #6d9cbe;\">          state:<\/span> started<\/pre>\n<p>the content of the <code>apacheconf.yml<\/code> would like like this<\/p>\n<pre><span class=\"hljs-attr\">key_file:<\/span> \/etc\/apache2\/ssl\/mywebsite.key  \r\n<span class=\"hljs-attr\">cert_file:<\/span> \/etc\/apache2\/ssl\/mywebsite.cert  \r\n<span class=\"hljs-attr\">server_name:<\/span> www.mywebsite.com<\/pre>\n<p>to keep things cleaner and to keep your playbook simple, It is recommended to use separate variable files and when you are creating ansible roles, you would have to use the variable files more than defining it inline.<\/p>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n<h2>Example Ansible Playbook to Setup LAMP stack<\/h2>\n<p>Linux Apache Mysql\/MariaDB PHP is shortly called as LAMP stack and it powers most of the internet websites including Facebook.<\/p>\n<p>So let us look at a Sample Ansible Playbook to install LAMP stack with necessary packages and tools.<\/p>\n<p>So what are going to do in this playbook<\/p>\n<ul>\n<li><strong>Connect to Remote host and execute the following tasks<\/strong>\n<ul>\n<li>Install all necessary packages like Apache(httpd), mariadb, php<\/li>\n<li>Installing a firewall and enabling HTTP services<\/li>\n<li>Start the Apache HTTPD web server.<\/li>\n<li>Start the MariaDB server<\/li>\n<li>Download a Sample PHP page from remote URL<\/li>\n<li>Access the website we have built by accessng the URL<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<p>&nbsp;<\/p>\n<p>Here is the Ansible Playbook example to setup LAMP Stack<\/p>\n<pre class=\"hljs\" style=\"display: block; background: #f3f3f3 none repeat scroll 0% 0%; padding: 0.5em; color: #333333; overflow-x: auto;\"><span class=\"hljs-meta\" style=\"color: #969896;\">---<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">- name:<\/span> Setting up LAMP Website\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">  user:<\/span> vagrant\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">  hosts:<\/span> testserver\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">  become:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">  tasks:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> latest version of all required packages installed\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      yum:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        name:<\/span>\r\n<span class=\"hljs-bullet\" style=\"color: #0086b3;\">          -<\/span> firewalld\r\n<span class=\"hljs-bullet\" style=\"color: #0086b3;\">          -<\/span> httpd\r\n<span class=\"hljs-bullet\" style=\"color: #0086b3;\">          -<\/span> mariadb-server\r\n<span class=\"hljs-bullet\" style=\"color: #0086b3;\">          -<\/span> php\r\n<span class=\"hljs-bullet\" style=\"color: #0086b3;\">          -<\/span> php-mysql\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        state:<\/span> latest\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> firewalld enabled and running\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        name:<\/span> firewalld\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        enabled:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">true<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        state:<\/span> started\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> firewalld permits http service\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      firewalld:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        service:<\/span> http\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        permanent:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">true<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        state:<\/span> enabled\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        immediate:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> Copy mime.types file\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      copy:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        src:<\/span> \/etc\/mime.types\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        dest:<\/span> \/etc\/httpd\/conf\/mime.types\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        remote_src:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">yes<\/span>\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> httpd enabled and running\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        name:<\/span> httpd\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        enabled:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">true<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        state:<\/span> started\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> mariadb enabled and running\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      service:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        name:<\/span> mariadb\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        enabled:<\/span> <span class=\"hljs-literal\" style=\"color: #0086b3;\">true<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        state:<\/span> started\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> copy the php page from remote using get_url\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      get_url:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        url:<\/span> <span class=\"hljs-string\" style=\"color: #df5000;\">\"https:\/\/www.middlewareinventory.com\/index.php\"<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        dest:<\/span> \/var\/www\/html\/index.php\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        mode:<\/span> <span class=\"hljs-number\">0644<\/span>\r\n\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">    - name:<\/span> test the webpage\/website we have setup\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">      uri:<\/span>\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        url:<\/span> http:\/\/{{ansible_hostname}}\/index.php\r\n<span class=\"hljs-attr\" style=\"color: #795da3;\">        status_code:<\/span> <span class=\"hljs-number\">200<\/span><\/pre>\n<p>&nbsp;<\/p>\n<h2>Ansible playbook Examples<\/h2>\n<p>I have written various Ansible playbooks and I have listed most of them here for your easy access.\u00a0 these articles would have a lot of playbook examples specific to modules and to a single topic.<\/p>\n<ol>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-archive-module-examples\/\">Archive module examples &#8211; Ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-unarchive-module-examples\/\">Ansible Unarchive module examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-shell-examples\/\">Shell module examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-copy-examples\/\">Ansible Copy module examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/vagrant-ansible-example\/\">Ansible + Vagrant Playbook for provisioning Apache<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-ssh-key-exchange\/\">Ansible Copy SSH Keys between remote servers example<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/how-to-copy-files-between-remote-servers-ansible-fetch-sync\/\">How to copy files between remote hosts with ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-changed_when-and-failed_when-examples\/\">Ansible changed_when and failed_when in playbook<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-command-examples\/\">Ansible Command Module Playbook examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-git-example\/\">How to use GIT with Ansible playbook<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-template-module-example\/\">Template module examples &#8211; Ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-lookup-file\/\">Lookup module examples &#8211; Ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-read-json-file\/\">How to read and process JSON file with ansible example<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-apt-examples\/\">Ansible apt module examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-find-examples\/\">Ansible Find module examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible_json_query\/\">How to Process JSON Data with JSON_Query ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-aws-ec2\/\">Ansible AWS EC2 Example playbook<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-async\/\">Ansible async Poll examples<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-get_url-examples-how-to-download-file-from-url\/\">How to download file from URL with ansible playbook<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-lineinfile-examples\/\">Ansible lineinfile &#8211; How to add, replace, update line in file with ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-replace-line-in-file-ansible-replace-examples\/\">Ansible replace module &#8211; how to replace texts in ansible<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-wait_for-examples\/\">How to wait_for task to be completed in playbook example<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/add-users-to-ec2-instances-with-ssh-access-ansible\/\" rel=\"bookmark\"><span style=\"font-size: 14pt;\">Add users to EC2 instances with SSH Access \u2013 Ansible automated<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/weblogic-jms-queue-creation-wlst-script-and-ansible-playbook\/\">Weblogic JMS Queue Creation with Ansible and WLST<\/a><\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-inventory_hostname-ansible_hostname-variables\/\"><span style=\"font-size: 14pt;\">Ansible inventory_hostname and ansible_hostname example playbook<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><span style=\"font-size: 14pt;\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-firewalld\/\">Ansible FirewallD Example Playbook<\/a><br \/>\n<\/span><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-how-to-connect-to-remote-hosts-using-bastion\/\"><span style=\"font-size: 14pt;\">Ansible How to connect using Bastion host<\/span> <\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/collect-efs-ec2-ansible\/\"><span style=\"font-size: 14pt;\">Ansible Playbook to find EC2 instances using EFS file system<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-to-delete-old-log-files-windows\/\"><span style=\"font-size: 14pt;\">Ansible Playbook to Delete OLD log files in Windows &#8211; Ansible Windows<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/find-and-replace-default-html-in-iis-windows-ansible\/\"><span style=\"font-size: 14pt;\">Playbook to Find and Replace Default HTML in IIS &#8211; Ansible Windows<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/how-to-use-ansible-with-windows-host-ansible-windows-example\/\"><span style=\"font-size: 14pt;\">Ansible Windows Example &#8211; How to use Ansible with Windows<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-selectattr-example\/\"><span style=\"font-size: 14pt;\">Ansible Select Attr Example &#8211; How to Filter Dictionary and Select Items<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-map\/\"><span style=\"font-size: 14pt;\">Ansible Map Function Examples &#8211; How to Filter List and Dictionaries<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-selectattr-example\/\"><span style=\"font-size: 14pt;\">Ansible Split Function Examples &#8211; With String, List and Dictionary<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-aws_s3-example\/\"><span style=\"font-size: 14pt;\">Ansible S3 module Examples &#8211; How to use ansible aws_s3 module<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-copy-file-or-directory-local-to-remote\"><span style=\"font-size: 14pt;\">Ansible Copy files Local to Remote<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-pre-tasks-and-post-tasks-example\/\"><span style=\"font-size: 14pt;\">Ansible PRE tasks and POST Tasks Introduction and Examples<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-list-examples-how-to-create-and-append-items-to-list\/\"><span style=\"font-size: 18.6667px;\">Ansible List Examples &#8211; How to create and append items to list<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-kafka\/\"><span style=\"font-size: 14pt;\">Ansible playbook to install KAFKA On Ubuntu<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-slack-notification\/\"><span style=\"font-size: 14pt;\">Ansible Slack example &#8211; How to send Slack notifications from Ansible<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-retry-examples\/\"><span style=\"font-size: 14pt;\">Ansible Retry example &#8211; How to retry an ansible task until the Condition is met<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-find-multiple-files-with-pattern-replace\/\"><span style=\"font-size: 14pt;\">Find multiple files with patterns and replace them with Ansible<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-tomcat-installation\/\"><span style=\"font-size: 14pt;\">Playbook to install Apache Tomcat <\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-wait-for-url\/\"><span style=\"font-size: 14pt;\">How to wait for URL to respond with Ansible URI &#8211; Web and API automation<\/span><\/a><\/h3>\n<\/li>\n<li>\n<h3 id=\"exmenu\"><a href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-uri-examples\/\"><span style=\"font-size: 14pt;\">Ansible URI module examples &#8211; for Web and API automation<\/span><\/a><\/h3>\n<\/li>\n<\/ol>\n<p>&nbsp;<\/p>\n<h2>Conclusion<\/h2>\n<p>I hope this article gave you some solid base on what is Ansible playbook and I know you might still have questions. the best way to learn is to explore and practice. So keep writing many playbooks and you can share it with us in the comments or send them to me.<\/p>\n<p>If you want your Playbook to be shared with the world consider uploading it to<a href=\"https:\/\/galaxy.ansible.com\/\"> Ansible Galaxy<\/a><\/p>\n<p>If you want your playbook to be published here in DevopsJunction. Share it with us over email or by comment.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM.jpg\"><img class=\"alignnone size-full wp-image-6623\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM.jpg\" alt=\"gritfy\" width=\"1047\" height=\"415\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM.jpg 1047w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM-300x119.jpg 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM-1024x406.jpg 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/01\/Screenshot-2021-01-15-at-6.18.23-AM-768x304.jpg 768w\" sizes=\"(max-width: 1047px) 100vw, 1047px\" \/><\/a><\/p>\n<p>Keep Learning.<\/p>\n<p>&nbsp;<\/p>\n<p>Cheers,<br \/>\nRumen Lishkov<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on<a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or<a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\nFor more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\nFollow me on Linkedin <a href=\"https:\/\/www.linkedin.com\/comm\/mynetwork\/discovery-see-all?usecase=PEOPLE_FOLLOWS&followMember=saravakmwinventory\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/p>\r\n<p style=\"color: palevioletred !important;\">Signup for Exclusive \"Subscriber-only\" Content<\/p>\r\n\n\t\t<div class=\"emaillist\">\n\t\t\t<form action=\"#\" method=\"post\" class=\"es_subscription_form es_shortcode_form\" id=\"es_subscription_form_1670577345\" data-source=\"ig-es\">\n\t\t\t\t\t\t\t\t<div class=\"es-field-wrap\"><label>Name*<br \/><input type=\"text\" name=\"name\" class=\"ig_es_form_field_name\" placeholder=\"\" value=\"\" required=\"required\" \/><\/label><\/div><div class=\"es-field-wrap\"><label>Email*<br \/><input class=\"es_required_field es_txt_email ig_es_form_field_email\" type=\"email\" name=\"email\" value=\"\" placeholder=\"\" required=\"required\" \/><\/label><\/div><input type=\"hidden\" name=\"lists[]\" value=\"1\" \/><input type=\"hidden\" name=\"form_id\" value=\"3\" \/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page\" value=\"2887\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es_email_page_url\" value=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"status\" value=\"Unconfirmed\"\/>\n\t\t\t\t<input type=\"hidden\" name=\"es-subscribe\" id=\"es-subscribe\" value=\"7aebfb1a9b\"\/>\n\t\t\t\t<label style=\"position:absolute;top:-99999px;left:-99999px;z-index:-99;\"><input type=\"email\" name=\"es_hp_email\" class=\"es_required_field\" tabindex=\"-1\" autocomplete=\"-1\" value=\"\"\/><\/label>\n\t\t\t\t\t\t\t\t<input type=\"submit\" name=\"submit\" class=\"es_subscription_form_submit es_submit_button es_textbox_button\" id=\"es_subscription_form_submit_1670577345\" value=\"Subscribe\"\/>\n\n\t\t\t\t\n\t\t\t\t<span class=\"es_spinner_image\" id=\"spinner-image\"><img src=\"https:\/\/www.middlewareinventory.com\/wp-content\/plugins\/email-subscribers\/lite\/public\/images\/spinner.gif\" alt=\"Loading\"\/><\/span>\n\n\t\t\t<\/form>\n\n\t\t\t<span class=\"es_subscription_message\" id=\"es_subscription_message_1670577345\"><\/span>\n\t\t<\/div>\n\n\t\t\r\n<\/div>\r\n<hr>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>In this post, we are going to see examples of Ansible playbook and various different modules and playbook examples with various modules and multiple hosts. We will start with a basic Ansible playbook and learn what is task and play and what is playbook etc. What is Ansible Playbook It[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":4062,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[98,454],"tags":[303,170,169,418],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>Ansible Playbook Examples - Sample Ansible Playbooks | Devops Junction<\/title>\n<meta name=\"description\" content=\"Ansible Playbook Examples. Sample Ansible playbooks and how to use Ansible Playbook. How to write ansible playbook what is ansible playbook and how to use ansible playbook. Ansible playbook example with explanation what is play and playbook in ansible. difference between ansible ad hoc and playbook with examples\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"Ansible Playbook Examples - Sample Ansible Playbooks | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"Ansible Playbook Examples. Sample Ansible playbooks and how to use Ansible Playbook. How to write ansible playbook what is ansible playbook and how to use ansible playbook. Ansible playbook example with explanation what is play and playbook in ansible. difference between ansible ad hoc and playbook with examples\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2019-07-20T11:26:00+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-12-07T18:04:32+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2019-07-20-at-4.48.10-PM.png\" \/>\n\t<meta property=\"og:image:width\" content=\"1418\" \/>\n\t<meta property=\"og:image:height\" content=\"796\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2019\/07\/Screenshot-2019-07-20-at-4.48.10-PM.png\",\"width\":1418,\"height\":796,\"caption\":\"Ansible Playbook Examples\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\",\"name\":\"Ansible Playbook Examples - Sample Ansible Playbooks | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#primaryimage\"},\"datePublished\":\"2019-07-20T11:26:00+00:00\",\"dateModified\":\"2022-12-07T18:04:32+00:00\",\"description\":\"Ansible Playbook Examples. Sample Ansible playbooks and how to use Ansible Playbook. How to write ansible playbook what is ansible playbook and how to use ansible playbook. Ansible playbook example with explanation what is play and playbook in ansible. difference between ansible ad hoc and playbook with examples\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"Ansible Playbook Examples &#8211; Sample Ansible Playbooks | Devops Junction\",\"datePublished\":\"2019-07-20T11:26:00+00:00\",\"dateModified\":\"2022-12-07T18:04:32+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#primaryimage\"},\"keywords\":\"Ansible Playbook,ansible playbook example,ansible playbook examples,example ansible playbooks\",\"articleSection\":\"Ansible,DevOps_Beginner\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/ansible-playbook-example\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2887"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=2887"}],"version-history":[{"count":6,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2887\/revisions"}],"predecessor-version":[{"id":9402,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/2887\/revisions\/9402"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/4062"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=2887"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=2887"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=2887"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}
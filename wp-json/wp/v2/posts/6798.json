{"id":6798,"date":"2021-03-15T17:47:03","date_gmt":"2021-03-15T12:17:03","guid":{"rendered":"https:\/\/www.middlewareinventory.com\/?p=6798"},"modified":"2022-02-27T13:35:52","modified_gmt":"2022-02-27T08:05:52","slug":"aws-vpc-peering-tutorial","status":"publish","type":"post","link":"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/","title":{"rendered":"How to create AWS VPC Peering &#8211; Step by Step Tutorial"},"content":{"rendered":"<p>In this article, we are going to see how to create AWS VPC peering in detail.<\/p>\n<p>Refer to the following diagram that represents the expected architecture we are trying to achieve or implement.<\/p>\n<p><img class=\"n3VNCb\" src=\"https:\/\/docs.aws.amazon.com\/vpc\/latest\/peering\/images\/peering-intro-diagram.png\" alt=\"What is VPC peering? - Amazon Virtual Private Cloud\" data-noaft=\"1\" \/><\/p>\n<p>There are two VPCs isolated by default ( as it supposed to be ) but with a help of this peering connection, we are going to allow Traffic between these two VPCs.<\/p>\n<p>There are multiple possibilities and scenarios when it comes to VPC peering in AWS.<\/p>\n<ul>\n<li>You can connect two VPCs in two different AWS account<\/li>\n<li>You can establish peering relationships between VPCs across different AWS Regions (also called Inter-Region VPC Peering).<\/li>\n<li>You can connect two or more number of VPCs together<\/li>\n<li>One, two or multiple VPCs peered together.<\/li>\n<\/ul>\n<p>For this article, we are going to take the simple VPC peering within the same AWS account.<\/p>\n<p>With no further ado. let&#8217;s go into the objective.<\/p>\n<h2><\/h2>\n<h2>Pre-requisites:<\/h2>\n<p>AWS management console account: <a href=\"https:\/\/console.aws.amazon.com\/\">https:\/\/console.aws.amazon.com\/<\/a><\/p>\n<p>This article assumes that you have an understanding of basic networking concepts like:<\/p>\n<ul>\n<li>Subnets \u2013 Logical partitioning of network into smaller IP ranges<\/li>\n<li>CIDR Range \u2013 Classless Inter-Domain Routing, is a method for allocating IP addresses for IP routing.<\/li>\n<li>IPV4 and IPV6 addresses \u2013 [IPV4 eg: 10.0.0.0\/8 ] and [IPV6 eg:<em> 2001:db8::8a2e:370:7334<\/em>]<\/li>\n<\/ul>\n<p>&nbsp;<\/p>\n<h2>Some Basics before we start<\/h2>\n<h3><\/h3>\n<h3>What is VPC<\/h3>\n<p>Take a small piece of AWS network and call it your own, control IP address ranges, routing patterns, tighten security etc.<\/p>\n<p><strong>AWS definition<\/strong>: \u201cAmazon VPC lets you provision a logically isolated section of the Amazon Web Services (AWS) cloud where you can launch AWS resources in a virtual network that you define.\u201d<\/p>\n<p>Every account has a default VPC in every region. Your resources are created in this default VPC.<\/p>\n<p>&nbsp;<\/p>\n<h3>What\u00a0 is VPC Peering<\/h3>\n<p>VPC Peering: IPV4 or IPV6 traffic routes between VPCs created to establish communication between one or more multiple VPCs.<\/p>\n<p><strong>AWS definition<\/strong>: \u201cA VPC peering connection is a networking connection between two VPCs that enables you to route traffic between them using private IPv4 addresses or IPv6 addresses. Instances in either VPC can communicate with each other as if they are within the same network.\u00a0\u201c<\/p>\n<ul>\n<li>Through VPC Peering, traffic stays within the AWS network and not go over the internet.<\/li>\n<li>Non-overlapping CIDRs \u2013 The 2 VPCs you are trying to peer, must have a mutually exclusive set of IP ranges.<\/li>\n<li>Transitive VPC Peering \u2013 not allowed i.e<\/li>\n<\/ul>\n<p>To understand what is transitive peering, Please refer to the following image.<\/p>\n<p>(<em>If VPC A &amp; B have peered and VPC A &amp; C have peered, VPC B &amp; C cannot share contents <strong><u>until<\/u><\/strong> there is an exclusive peering done between VPC B &amp; C)<\/em><\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Peering_correct.png\"><img class=\"post-img alignnone wp-image-6835 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Peering_correct.png\" alt=\"\" width=\"281\" height=\"179\" \/><\/a><\/p>\n<p>As mentioned earlier VPC peering can be done to another region or another account as well.<\/p>\n<h3><\/h3>\n<h3>Will VPC Cost me?<\/h3>\n<p>No. VPC itself won\u2019t cost you, however, the resources deployed inside the VPC and data transfers are done will cost you.<\/p>\n<p>&nbsp;<\/p>\n<h2>How to establish peering between 2 VPCs in AWS<\/h2>\n<p>In this section, we are going to see, how to establish a VPC Peering between 2 VPC in AWS.<\/p>\n<p>Since every AWS region comes with a default VPC, let&#8217;s connect a default and custom VPC through peering for this article.<\/p>\n<h3>Find your Default VPC<\/h3>\n<p>To find your default VPC, in your AWS Management Console type VPC in the search bar:<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2.png\"><img class=\"post-img alignnone wp-image-6812 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2.png\" alt=\"AWS VPC Peering\" width=\"1297\" height=\"263\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2.png 1297w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2-300x61.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2-1024x208.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/2-768x156.png 768w\" sizes=\"(max-width: 1297px) 100vw, 1297px\" \/><\/a><\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<p>On the left navigation panel click on \u2018Your VPC\u2019 and if Tenancy is \u2018Default\u2019 then it is your default VPC.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3.png\"><img class=\"post-img alignnone wp-image-6813 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3.png\" alt=\"AWS VPC Peering Tenancy\" width=\"1597\" height=\"664\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3.png 1597w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3-300x125.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3-1024x426.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3-768x319.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/3-1536x639.png 1536w\" sizes=\"(max-width: 1597px) 100vw, 1597px\" \/><\/a><\/p>\n<h3>Create a custom VPC<\/h3>\n<p>Name your VPC and use the IPV4 CIDR range of your choice, I have used 10.0.0.0\/16 for this example.<\/p>\n<div style=\"width: 840px;\" class=\"wp-video\"><!--[if lt IE 9]><script>document.createElement('video');<\/script><![endif]-->\n<video class=\"wp-video-shortcode\" id=\"video-6798-1\" width=\"840\" height=\"425\" preload=\"metadata\" controls=\"controls\"><source type=\"video\/mp4\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/VPC_Creation.mp4?_=1\" \/><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/VPC_Creation.mp4\">https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/VPC_Creation.mp4<\/a><\/video><\/div>\n<p>At the end of the above video, you should be able to see 2 VPC:<\/p>\n<blockquote><p>Note: Following components would be auto-created when you are creating a new VPC<\/p>\n<ul>\n<li>Route Table<\/li>\n<li>Security Group<\/li>\n<li>NACL &#8211; Network Access Control List<\/li>\n<\/ul>\n<\/blockquote>\n<p>&nbsp;<\/p>\n<h3>Creating a Subnet in VPC<\/h3>\n<p>VPC (Virtual Private Cloud) is your private cloud inside AWS as we mentioned earlier. typically we have to divide our big network into multiple subnets so we can place different resources.<\/p>\n<p>Depends on our requirement we can create multiple subnets.<\/p>\n<p>For example, A Subnet allowed to connect to a public network for webserver hosting, A Subnet for a database with no public access and monitored IN\/OUT connections (private subnets) etc.<\/p>\n<p>Now we are going to create a subnet in our newly create VPC, Let&#8217;s navigate to Subnets and click on the \u2018Create Subnet\u2019 and follow the video given below<\/p>\n<div style=\"width: 840px;\" class=\"wp-video\"><video class=\"wp-video-shortcode\" id=\"video-6798-2\" width=\"840\" height=\"425\" preload=\"metadata\" controls=\"controls\"><source type=\"video\/mp4\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Subnet_Creation.mp4?_=2\" \/><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Subnet_Creation.mp4\">https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Subnet_Creation.mp4<\/a><\/video><\/div>\n<blockquote><p><em>Note: Subnets for Default VPC are auto created but not for custom VPC, so go ahead and create one<\/em><\/p><\/blockquote>\n<p>&nbsp;<\/p>\n<h3>Creating EC2 instances<\/h3>\n<p>Let\u2019s create an EC2 instances under each VPC (default and custom).<\/p>\n<p>Under Compute, select EC2 -&gt; Launch instances -&gt; (in the Configure Instance Details form be sure to select the correct VPC under \u2018Network\u2019)<\/p>\n<p>For the instance we are creating under the\u00a0 Custom VPC add the following User_Data, A Startup script to install the apache HTTPD service<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"shell\">#!\/bin\/bash\r\n\r\nyum update -y\r\n\r\nyum install -y httpd.x86_64\r\n\r\nsystemctl start httpd.service\r\n\r\nsystemctl enable httpd.service\r\n\r\necho \"Hello world from $(hostname -f)\" &gt; \/var\/www\/html\/index.html<\/pre>\n<p>Follow the attached video guide for completing the EC2 creation for both VPCs.<\/p>\n<p>&nbsp;<\/p>\n<div style=\"width: 840px;\" class=\"wp-video\"><video class=\"wp-video-shortcode\" id=\"video-6798-3\" width=\"840\" height=\"425\" preload=\"metadata\" controls=\"controls\"><source type=\"video\/mp4\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/EC2_Creation.mp4?_=3\" \/><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/EC2_Creation.mp4\">https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/EC2_Creation.mp4<\/a><\/video><\/div>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>Creating Internet Gateway for the Custom VPC created<\/h3>\n<p>As we have mentioned earlier, we are going to use the EC2 instance we have created under the custom VPC for hosting an Apache HTTP server.<\/p>\n<p>In order to allow traffic, we must create a Gateway.<\/p>\n<p>For the EC2 under Customer VPC, create an Internet Gateway and make sure to add the following entries in its Route Table<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5.png\"><img class=\"post-img alignnone wp-image-6815 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5.png\" alt=\"\" width=\"1645\" height=\"671\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5.png 1645w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5-300x122.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5-1024x418.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5-768x313.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/5-1536x627.png 1536w\" sizes=\"(max-width: 1645px) 100vw, 1645px\" \/><\/a><\/p>\n<p>And associate the Custom VPC Public Subnet to it<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6.png\"><img class=\"post-img alignnone wp-image-6816 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6.png\" alt=\"\" width=\"1621\" height=\"489\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6.png 1621w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6-300x90.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6-1024x309.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6-768x232.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/6-1536x463.png 1536w\" sizes=\"(max-width: 1621px) 100vw, 1621px\" \/><\/a><\/p>\n<p>Security Group of both EC2 instances are set to allow SSH Connection from Global (anywhere) for testing purpose.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7.png\"><img class=\"post-img alignnone wp-image-6817 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7.png\" alt=\"\" width=\"1435\" height=\"217\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7.png 1435w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7-300x45.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7-1024x155.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/7-768x116.png 768w\" sizes=\"(max-width: 1435px) 100vw, 1435px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<h3>Login to EC2 instances<\/h3>\n<p>Now login to both the EC2 instances using their Public IP using the command:<\/p>\n<pre>ssh -I \u201c&lt;ssh_key.pem&gt;\u201d ec2-user@&lt;public_ip&gt;<\/pre>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8.png\"><img class=\"post-img alignnone wp-image-6818 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8.png\" alt=\"\" width=\"1889\" height=\"467\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8.png 1889w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8-300x74.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8-1024x253.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8-768x190.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/8-1536x380.png 1536w\" sizes=\"(max-width: 1889px) 100vw, 1889px\" \/><\/a><\/p>\n<p><em>The instance on left is under Default_VPC(Instance A 172*) and the one on the right is under Custom_VPC(Instance B 10.0*)<\/em><\/p>\n<p>To prove there is no connectivity between <em><code>Instance A <\/code><\/em>and <em><code>Instance B <\/code><\/em>,<\/p>\n<p>let&#8217;s curl the URL which returns the metadata from <em><code>Instance B<\/code> \u2013 (since we had added user-data and setup an apache httpd web server)<\/em><\/p>\n<p><em><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9.png\"><img class=\"post-img alignnone wp-image-6819 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9.png\" alt=\"\" width=\"1914\" height=\"467\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9.png 1914w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9-300x73.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9-1024x250.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9-768x187.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/9-1536x375.png 1536w\" sizes=\"(max-width: 1914px) 100vw, 1914px\" \/><\/a><\/em><\/p>\n<p>Look at the preceding snapshot, See how <code>Instance A<\/code> times out to access <code>Instance B<\/code>.<\/p>\n<p>&nbsp;<\/p>\n<h3>Let&#8217;s create VPC Peering to enable communication<\/h3>\n<p>To establish the connection, lets create VPC peering from both VPCs. On the left navigation panel under VPC -&gt; Peering Connections:<\/p>\n<ul>\n<li style=\"list-style-type: none;\">\n<ul>\n<li>VPC (Requester) = DevopsJunction_CustomVPC<\/li>\n<li>VPC (Accepter) = DevopsJunction_DefaultVPC<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/10.png\"><img class=\"post-img alignnone wp-image-6820 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/10.png\" alt=\"\" width=\"943\" height=\"781\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/10.png 943w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/10-300x248.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/10-768x636.png 768w\" sizes=\"(max-width: 943px) 100vw, 943px\" \/><\/a><\/p>\n<p>Create a Peering Connection.<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/11.png\"><img class=\"post-img alignnone wp-image-6821 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/11.png\" alt=\"\" width=\"970\" height=\"332\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/11.png 970w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/11-300x103.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/11-768x263.png 768w\" sizes=\"(max-width: 970px) 100vw, 970px\" \/><\/a><\/p>\n<p>Now you would see the status <code>Pending Acceptance<\/code> which means, Requestor has sent a request to the peer now target VPC needs to accept the request.<\/p>\n<p>So drop down Actions -&gt; Accept Request<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/12.png\"><img class=\"post-img alignnone wp-image-6823 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/12.png\" alt=\"AWS VPC Peering\" width=\"747\" height=\"200\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/12.png 747w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/12-300x80.png 300w\" sizes=\"(max-width: 747px) 100vw, 747px\" \/><\/a><\/p>\n<p>Yes Accept<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/13.png\"><img class=\"post-img alignnone wp-image-6824 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/13.png\" alt=\"\" width=\"894\" height=\"285\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/13.png 894w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/13-300x96.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/13-768x245.png 768w\" sizes=\"(max-width: 894px) 100vw, 894px\" \/><\/a><\/p>\n<p>Now we need to make entries in Route Tables<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/14.png\"><img class=\"post-img alignnone wp-image-6825 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/14.png\" alt=\"\" width=\"881\" height=\"257\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/14.png 881w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/14-300x88.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/14-768x224.png 768w\" sizes=\"(max-width: 881px) 100vw, 881px\" \/><\/a><\/p>\n<p>The status of VPC Peering turns <code>Active<\/code><\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15.png\"><img class=\"post-img alignnone wp-image-6826 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15.png\" alt=\"\" width=\"1352\" height=\"95\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15.png 1352w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15-300x21.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15-1024x72.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/15-768x54.png 768w\" sizes=\"(max-width: 1352px) 100vw, 1352px\" \/><\/a><\/p>\n<p>To edit Route Tables, copy the IPv4 CIDR ranges of both Default and Custom VPC, in my case it is<\/p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"generic\">DevopsJunction_CustomVPC = 10.0.0.0\/16\r\nDevopsJunction_DefaultVPC = 172.31.0.0\/16<\/pre>\n<p>Now navigate to Route Tables, in <code><code>Default VPC RT(Route Table) -&gt; Edit routes<\/code><\/code><\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16.png\"><img class=\"post-img alignnone wp-image-6827 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16.png\" alt=\"\" width=\"1286\" height=\"386\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16.png 1286w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16-300x90.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16-1024x307.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/16-768x231.png 768w\" sizes=\"(max-width: 1286px) 100vw, 1286px\" \/><\/a><code><\/code><\/p>\n<p>DefaultVPC Route Table would look as below<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17.png\"><img class=\"post-img alignnone wp-image-6828 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17.png\" alt=\"\" width=\"1514\" height=\"562\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17.png 1514w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17-300x111.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17-1024x380.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/17-768x285.png 768w\" sizes=\"(max-width: 1514px) 100vw, 1514px\" \/><\/a><\/p>\n<p>&nbsp;<\/p>\n<p>Do the same <code>CustomVPC<\/code> Route Table and it would look as below<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18.png\"><img class=\"post-img alignnone wp-image-6829 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18.png\" alt=\"\" width=\"1481\" height=\"569\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18.png 1481w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18-300x115.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18-1024x393.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/18-768x295.png 768w\" sizes=\"(max-width: 1481px) 100vw, 1481px\" \/><\/a><\/p>\n<p>Now try to check the connectivity<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19.png\"><img class=\"post-img alignnone wp-image-6830 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19.png\" alt=\"\" width=\"938\" height=\"688\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19.png 938w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19-300x220.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19-768x563.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/19-90x65.png 90w\" sizes=\"(max-width: 938px) 100vw, 938px\" \/><\/a><\/p>\n<p>We have done the VPC Peering. but why it is still not working.<\/p>\n<p>There is one more thing we need to do before we test.<\/p>\n<script async src=\"https:\/\/pagead2.googlesyndication.com\/pagead\/js\/adsbygoogle.js\"><\/script>\r\n<ins class=\"adsbygoogle\"\r\n     style=\"display:block; text-align:center;\"\r\n     data-ad-layout=\"in-article\"\r\n     data-ad-format=\"fluid\"\r\n     data-ad-client=\"ca-pub-3398911159151128\"\r\n     data-ad-slot=\"1946393371\"><\/ins>\r\n<script>\r\n     (adsbygoogle = window.adsbygoogle || []).push({});\r\n<\/script>\n<h3>Allowing Traffic in VPC Security Groups.<\/h3>\n<p>Edit Security Group of Default and Custom VPC to allow traffic from each other<\/p>\n<p>Default VPC Security Group looks like (to secure it better, route SSH from your PC only)<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20.png\"><img class=\"post-img alignnone wp-image-6831 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20.png\" alt=\"\" width=\"1144\" height=\"538\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20.png 1144w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20-300x141.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20-1024x482.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/20-768x361.png 768w\" sizes=\"(max-width: 1144px) 100vw, 1144px\" \/><\/a><\/p>\n<p>Custom VPC Security Group would look like<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21.png\"><img class=\"post-img alignnone wp-image-6832 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21.png\" alt=\"\" width=\"1134\" height=\"565\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21.png 1134w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21-300x149.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21-1024x510.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21-768x383.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/21-840x420.png 840w\" sizes=\"(max-width: 1134px) 100vw, 1134px\" \/><\/a><\/p>\n<p>Now it works like a charm using the PRIVATE IP of the destination VPC !!!<\/p>\n<p><a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22.png\"><img class=\"post-img alignnone wp-image-6833 size-full\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22.png\" alt=\"\" width=\"1691\" height=\"289\" srcset=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22.png 1691w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22-300x51.png 300w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22-1024x175.png 1024w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22-768x131.png 768w, https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/22-1536x263.png 1536w\" sizes=\"(max-width: 1691px) 100vw, 1691px\" \/><\/a><\/p>\n<p>Congratulations!! You have successfully PEERED 2 VPC with separate CIDR ranges on AWS.<\/p>\n<p>If you have any questions. Please write in the comments section.<\/p>\n<a href=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\"><img class=\"post-img\" src=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/09\/DaaS.svg\" alt=\"gritfy\" width=\"1047\" height=\"415\" class=\"alignnone size-full wp-image-6623\" \/><\/a>\n<p>Happy Learnings<\/p>\n<p>Cheers<br \/>\nPooja Gopal<\/p>\n<div id=\"postfollow\">\r\n<a href='https:\/\/ko-fi.com\/O4O51FG7C' target='_blank'><img height='46' style='border:0px;height:46px;width: 186px' src='https:\/\/az743702.vo.msecnd.net\/cdn\/kofi3.png?v=2' border='0' alt='Buy Me a Coffee at ko-fi.com' \/><\/a>\r\n<p>Follow us on <i class=\"fa fa-facebook\"><\/i> <a href=\"http:\/\/www.facebook.com\/middlewareinventory\">Facebook<\/a> or <i class=\"fa fa-twitter\"><\/i>  <a href=\"http:\/\/www.twitter.com\/mwinventory\">Twitter<\/a>\r\n<\/br>\r\n<i class=\"fa fa-youtube\"><\/i>For more practical videos and tutorials. <a href=\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw?sub_confirmation=1\">Subscribe to our channel<\/a>\r\n<\/br>\r\n<i class=\"fa fa-linkedin\"><\/i>Find me on Linkedin <a href=\"https:\/\/www.linkedin.com\/in\/pooja-gopal-0a004461\/\">My Profile<\/a>\r\n<\/br>\r\n<\/i>For any Consultation or to hire us <a href=\"mailto:rumenlishkoff@gmail.com\"> rumenlishkoff@gmail.com<\/a>\r\n<\/br>\r\nIf you like this article. Show your Support! <a href=\"https:\/\/ko-fi.com\/middlewareinventory\">Buy me a Coffee.<\/a>\r\n<\/br>\r\n<\/div>\n<p>&nbsp;<\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>In this article, we are going to see how to create AWS VPC peering in detail. Refer to the following diagram that represents the expected architecture we are trying to achieve or implement. There are two VPCs isolated by default ( as it supposed to be ) but with a[&#8230;]<\/p>\n","protected":false},"author":1,"featured_media":6846,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"_et_pb_use_builder":"","_et_pb_old_content":"","_et_gb_content_width":""},"categories":[234],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v14.9 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\n<title>How to create AWS VPC Peering - Step by Step Tutorial | Devops Junction<\/title>\n<meta name=\"description\" content=\"How to create AWS VPC Peering. Step by Step tutorial with video. Enable VPC peering between two AWS VPCs. AWS VPC Peering Example practical\" \/>\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\n<link rel=\"canonical\" href=\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/\" \/>\n<meta property=\"og:locale\" content=\"en_US\" \/>\n<meta property=\"og:type\" content=\"article\" \/>\n<meta property=\"og:title\" content=\"How to create AWS VPC Peering - Step by Step Tutorial | Devops Junction\" \/>\n<meta property=\"og:description\" content=\"How to create AWS VPC Peering. Step by Step tutorial with video. Enable VPC peering between two AWS VPCs. AWS VPC Peering Example practical\" \/>\n<meta property=\"og:url\" content=\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/\" \/>\n<meta property=\"og:site_name\" content=\"Middleware Inventory\" \/>\n<meta property=\"article:publisher\" content=\"http:\/\/www.facebook.com\/devopsjunc\" \/>\n<meta property=\"article:published_time\" content=\"2021-03-15T12:17:03+00:00\" \/>\n<meta property=\"article:modified_time\" content=\"2022-02-27T08:05:52+00:00\" \/>\n<meta property=\"og:image\" content=\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Screenshot-2021-03-21-at-12.31.23-AM-scaled.jpg\" \/>\n\t<meta property=\"og:image:width\" content=\"2560\" \/>\n\t<meta property=\"og:image:height\" content=\"1386\" \/>\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\n<meta name=\"twitter:creator\" content=\"@mwinventory\" \/>\n<meta name=\"twitter:site\" content=\"@mwinventory\" \/>\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\"@context\":\"https:\/\/schema.org\",\"@graph\":[{\"@type\":\"Organization\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\",\"name\":\"Middleware Inventory\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"sameAs\":[\"http:\/\/www.facebook.com\/devopsjunc\",\"https:\/\/www.youtube.com\/channel\/UCRuqBFM6ioWwviNJkgOjeWw\",\"https:\/\/twitter.com\/mwinventory\"],\"logo\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2020\/09\/Screenshot-2020-09-18-at-3.49.40-AM.jpg\",\"width\":300,\"height\":107,\"caption\":\"Middleware Inventory\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#logo\"}},{\"@type\":\"WebSite\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\",\"url\":\"https:\/\/www.middlewareinventory.com\/\",\"name\":\"Devops Junction\",\"description\":\"An inventory of [i]nformation, Middleware and much more.\",\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"potentialAction\":[{\"@type\":\"SearchAction\",\"target\":\"https:\/\/www.middlewareinventory.com\/?s={search_term_string}\",\"query-input\":\"required name=search_term_string\"}],\"inLanguage\":\"en-US\"},{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#primaryimage\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/www.middlewareinventory.com\/wp-content\/uploads\/2021\/03\/Screenshot-2021-03-21-at-12.31.23-AM-scaled.jpg\",\"width\":2560,\"height\":1386,\"caption\":\"AWS VPC Peering\"},{\"@type\":\"WebPage\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#webpage\",\"url\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/\",\"name\":\"How to create AWS VPC Peering - Step by Step Tutorial | Devops Junction\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#website\"},\"primaryImageOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#primaryimage\"},\"datePublished\":\"2021-03-15T12:17:03+00:00\",\"dateModified\":\"2022-02-27T08:05:52+00:00\",\"description\":\"How to create AWS VPC Peering. Step by Step tutorial with video. Enable VPC peering between two AWS VPCs. AWS VPC Peering Example practical\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"ReadAction\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/\"]}]},{\"@type\":\"Article\",\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#article\",\"isPartOf\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#webpage\"},\"author\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\"},\"headline\":\"How to create AWS VPC Peering &#8211; Step by Step Tutorial\",\"datePublished\":\"2021-03-15T12:17:03+00:00\",\"dateModified\":\"2022-02-27T08:05:52+00:00\",\"mainEntityOfPage\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#webpage\"},\"commentCount\":0,\"publisher\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/#organization\"},\"image\":{\"@id\":\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#primaryimage\"},\"articleSection\":\"AWS\",\"inLanguage\":\"en-US\",\"potentialAction\":[{\"@type\":\"CommentAction\",\"name\":\"Comment\",\"target\":[\"https:\/\/www.middlewareinventory.com\/blog\/aws-vpc-peering-tutorial\/#respond\"]}]},{\"@type\":\"Person\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#\/schema\/person\/050bf13e27b309d29d1bda45c4eb3147\",\"name\":\"Rumen Lishkov\",\"image\":{\"@type\":\"ImageObject\",\"@id\":\"https:\/\/www.middlewareinventory.com\/#personlogo\",\"inLanguage\":\"en-US\",\"url\":\"https:\/\/secure.gravatar.com\/avatar\/c22e4a54d67750291a9892531f94ffb3?s=96&d=mm&r=g\",\"caption\":\"Rumen Lishkov\"}}]}<\/script>\n<!-- \/ Yoast SEO plugin. -->","_links":{"self":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6798"}],"collection":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/comments?post=6798"}],"version-history":[{"count":15,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6798\/revisions"}],"predecessor-version":[{"id":7175,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/posts\/6798\/revisions\/7175"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media\/6846"}],"wp:attachment":[{"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/media?parent=6798"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/categories?post=6798"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.middlewareinventory.com\/wp-json\/wp\/v2\/tags?post=6798"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}